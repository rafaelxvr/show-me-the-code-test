{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n\nimport { EventHandler, Property, Event, compile, KeyboardEvents, append, select } from '@syncfusion/ej2-base';\nimport { attributes, isNullOrUndefined, getUniqueID, formatUnit, isUndefined, getValue } from '@syncfusion/ej2-base';\nimport { Animation, Browser, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, closest, prepend, detach, classList } from '@syncfusion/ej2-base';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { incrementalSearch, resetIncrementalSearchValues } from '../common/incremental-search';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data'; // don't use space in classnames\n\nexport var dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\n\nvar DropDownList =\n/** @class */\nfunction (_super) {\n  __extends(DropDownList, _super);\n  /**\n   * * Constructor for creating the DropDownList component.\n   *\n   * @param {DropDownListModel} options - Specifies the DropDownList model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownList(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isListSearched = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    return _this;\n  }\n  /**\n   * Initialize the event handler.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.preRender = function () {\n    this.valueTempElement = null;\n    this.element.style.opacity = '0';\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n\n    this.activeIndex = this.index;\n    this.queryString = '';\n  };\n\n  DropDownList.prototype.initializeData = function () {\n    this.isPopupOpen = false;\n    this.isDocumentClick = false;\n    this.isInteracted = false;\n    this.isFilterFocus = false;\n    this.beforePopupOpen = false;\n    this.initial = true;\n    this.initRemoteRender = false;\n    this.isNotSearchList = false;\n    this.isTyped = false;\n    this.isSelected = false;\n    this.preventFocus = false;\n    this.preventAutoFill = false;\n    this.isValidKey = false;\n    this.typedString = '';\n    this.isEscapeKey = false;\n    this.isPreventBlur = false;\n    this.isTabKey = false;\n    this.actionCompleteData = {\n      isUpdated: false\n    };\n    this.actionData = {\n      isUpdated: false\n    };\n    this.prevSelectPoints = {};\n    this.isSelectCustom = false;\n    this.isDropDownClick = false;\n    this.preventAltUp = false;\n    this.isCustomFilter = false;\n    this.isSecondClick = false;\n    this.previousValue = null;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n\n  DropDownList.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n\n  DropDownList.prototype.renderList = function (isEmptyData) {\n    _super.prototype.render.call(this, isEmptyData);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n\n  DropDownList.prototype.floatLabelChange = function () {\n    if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n      var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n\n      if (this.inputElement.value !== '' || this.isInteracted) {\n        classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n      } else {\n        classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n      }\n    }\n  };\n\n  DropDownList.prototype.resetHandler = function (e) {\n    e.preventDefault();\n    this.clearAll(e);\n  };\n\n  DropDownList.prototype.resetFocusElement = function () {\n    this.removeHover();\n    this.removeSelection();\n    this.removeFocus();\n    this.list.scrollTop = 0;\n\n    if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n      var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n\n      if (li) {\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  };\n\n  DropDownList.prototype.clearAll = function (e, properties) {\n    if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n      this.isActive = true;\n      this.resetSelection(properties);\n    }\n\n    var dataItem = this.getItemData();\n\n    if (this.previousValue === dataItem.value) {\n      return;\n    }\n\n    this.onChangeEvent(e);\n  };\n\n  DropDownList.prototype.resetSelection = function (properties) {\n    if (this.list) {\n      if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.selectedLI = null;\n        this.actionCompleteData.isUpdated = false;\n        this.actionCompleteData.ulElement = null;\n        this.actionCompleteData.list = null;\n        this.resetList(properties.dataSource);\n      } else {\n        if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n        }\n\n        this.resetFocusElement();\n      }\n    }\n\n    this.hiddenElement.innerHTML = '';\n    this.inputElement.value = '';\n    this.value = null;\n    this.itemData = null;\n    this.text = null;\n    this.index = null;\n    this.activeIndex = null;\n    this.item = null;\n    this.queryString = '';\n\n    if (this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n      this.valueTempElement = null;\n    }\n\n    this.setSelection(null, null);\n    this.isSelectCustom = false;\n    this.updateIconState();\n    this.cloneElements();\n  };\n\n  DropDownList.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n          if (updatedClassValue !== '') {\n            addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n          }\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n          this.enabled = false;\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n          this.readonly = true;\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            defaultAttr.push('tabindex');\n          }\n\n          if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n            } else {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          }\n        }\n      }\n    }\n\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputWrapper.container.removeAttribute('tabindex');\n    }\n  };\n\n  DropDownList.prototype.getAriaAttributes = function () {\n    return {\n      'aria-disabled': 'false',\n      'aria-owns': this.element.id + '_options',\n      'role': 'combobox',\n      'aria-haspopup': 'true',\n      'aria-expanded': 'false',\n      'aria-activedescendant': 'null',\n      'aria-live': 'polite',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownList.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n\n  DropDownList.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'false');\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.hidePopup();\n      addClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'true');\n      this.targetElement().tabIndex = -1;\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownList.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  DropDownList.prototype.getLocaleName = function () {\n    return 'drop-down-list';\n  };\n\n  DropDownList.prototype.preventTabIndex = function (element) {\n    if (this.getModuleName() === 'dropdownlist') {\n      element.tabIndex = -1;\n    }\n  };\n\n  DropDownList.prototype.targetElement = function () {\n    return this.inputWrapper.container;\n  };\n\n  DropDownList.prototype.getNgDirective = function () {\n    return 'EJS-DROPDOWNLIST';\n  };\n\n  DropDownList.prototype.getElementByText = function (text) {\n    return this.getElementByValue(this.getValueByText(text));\n  };\n\n  DropDownList.prototype.getElementByValue = function (value) {\n    var item;\n    var listItems = this.getItems();\n\n    for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n      var liItem = listItems_1[_i];\n\n      if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n        item = liItem;\n        break;\n      }\n    }\n\n    return item;\n  };\n\n  DropDownList.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  DropDownList.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      this.setSelection(this.getElementByValue(this.value), null);\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var element = this.getElementByText(this.text);\n\n      if (isNullOrUndefined(element)) {\n        this.setProperties({\n          text: null\n        });\n        return;\n      } else {\n        this.setSelection(element, null);\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  DropDownList.prototype.onBlurHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n    var currentTarget = e.target;\n    var isPreventBlur = this.isPreventBlur;\n    this.isPreventBlur = false; //IE 11 - issue\n\n    if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n      if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n        this.filterInput.focus();\n      } else {\n        this.targetElement().focus();\n      }\n\n      return;\n    }\n\n    if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n      if (!this.beforePopupOpen) {\n        this.isDocumentClick = false;\n      }\n\n      return;\n    }\n\n    if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n      this.isDocumentClick = this.isPopupOpen ? true : false;\n      this.focusOutAction(e);\n      this.isTabKey = false;\n    }\n\n    if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n      this.isActive = false;\n      this.beforePopupOpen = false;\n    }\n  };\n\n  DropDownList.prototype.focusOutAction = function (e) {\n    this.isInteracted = false;\n    this.focusOut(e);\n    this.onFocusOut();\n  };\n\n  DropDownList.prototype.onFocusOut = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isSelected) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(null);\n    }\n\n    this.floatLabelChange();\n    this.dispatchEvent(this.hiddenElement, 'change');\n\n    if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n      this.dispatchEvent(this.inputElement, 'blur');\n    }\n\n    if (this.inputWrapper.clearButton) {\n      addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n    }\n\n    this.trigger('blur');\n  };\n\n  DropDownList.prototype.onFocus = function (e) {\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n\n    this.updateIconState();\n  };\n\n  DropDownList.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n      this.text = val;\n    }\n  };\n\n  DropDownList.prototype.wireEvent = function () {\n    EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n    this.bindCommonEvent();\n  };\n\n  DropDownList.prototype.bindCommonEvent = function () {\n    EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.mobileKeyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n\n    this.bindClearEvent();\n  };\n\n  DropDownList.prototype.bindClearEvent = function () {\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n    }\n  };\n\n  DropDownList.prototype.unBindCommonEvent = function () {\n    if (this.targetElement()) {\n      EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n    }\n\n    var formElement = this.inputElement && closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n\n    if (this.showClearButton) {\n      EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n    }\n  };\n\n  DropDownList.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n\n  DropDownList.prototype.onSearch = function (e) {\n    if (e.charCode !== 32 && e.charCode !== 13) {\n      if (this.list === undefined) {\n        this.renderList();\n      }\n\n      this.searchKeyEvent = e;\n      this.onServerIncrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onServerIncrementalSearch = function (e) {\n    if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n      this.incrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      history.back();\n    } else {\n      var delay = 100;\n      this.closePopup(delay, e);\n    }\n  };\n\n  DropDownList.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  DropDownList.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  DropDownList.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n\n  DropDownList.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  DropDownList.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  DropDownList.prototype.incrementalSearch = function (e) {\n    if (this.liCollections.length > 0) {\n      var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n\n      if (!isNullOrUndefined(li)) {\n        this.setSelection(li, e);\n        this.setScrollPosition();\n      }\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      this.spinnerElement.innerHTML = '';\n      this.spinnerElement = null;\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n\n  DropDownList.prototype.keyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n    var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n    this.isEscapeKey = e.action === 'escape';\n    this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n    var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n\n    if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      var isTabAction = e.action === 'tab' || e.action === 'close';\n\n      if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n        e.preventDefault();\n      }\n\n      this.isSelected = e.action === 'escape' ? false : this.isSelected;\n      this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n\n      switch (e.action) {\n        case 'down':\n        case 'up':\n          this.updateUpDownAction(e);\n          break;\n\n        case 'pageUp':\n          this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'pageDown':\n          this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'home':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'end':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'space':\n          if (this.getModuleName() === 'dropdownlist') {\n            if (!this.beforePopupOpen) {\n              this.showPopup();\n            }\n          }\n\n          break;\n\n        case 'open':\n          this.showPopup();\n          break;\n\n        case 'hide':\n          this.preventAltUp = this.isPopupOpen;\n          this.hidePopup(e);\n          this.focusDropDown(e);\n          break;\n\n        case 'enter':\n          this.selectCurrentItem(e);\n          break;\n\n        case 'tab':\n          this.selectCurrentValueOnTab(e);\n          break;\n\n        case 'escape':\n        case 'close':\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n            this.focusDropDown(e);\n          }\n\n          break;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n\n      if (this.getModuleName() === 'autocomplete') {\n        startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n        index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      }\n\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  DropDownList.prototype.updateHomeEndAction = function (e) {\n    if (this.getModuleName() === 'dropdownlist') {\n      var findLi = 0;\n\n      if (e.action === 'home') {\n        findLi = 0;\n      } else {\n        findLi = this.getItems().length - 1;\n      }\n\n      e.preventDefault();\n\n      if (this.activeIndex === findLi) {\n        return;\n      }\n\n      this.setSelection(this.liCollections[findLi], e);\n    }\n  };\n\n  DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.selectCurrentItem(e);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        this.focusDropDown(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.mobileKeyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isEditTextBox() && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      if (this.list === undefined && !this.isRequested) {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (e.action === 'enter') {\n        this.selectCurrentItem(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectCurrentItem = function (e) {\n    if (this.isPopupOpen) {\n      var li = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n\n      this.hidePopup(e);\n      this.focusDropDown(e);\n    } else {\n      this.showPopup();\n    }\n  };\n\n  DropDownList.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  DropDownList.prototype.getPageCount = function () {\n    var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n  };\n\n  DropDownList.prototype.pageUpSelection = function (steps, event) {\n    var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.pageDownSelection = function (steps, event) {\n    var list = this.getItems();\n    var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n    EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n    this.unBindCommonEvent();\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  DropDownList.prototype.checkSelector = function (id) {\n    return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n  };\n\n  DropDownList.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !this.inputWrapper.container.contains(e.target)) {\n      if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n        this.isDocumentClick = true;\n        var isActive = this.isRequested;\n        this.isInteracted = false;\n        this.hidePopup(e);\n\n        if (!isActive) {\n          this.onFocusOut();\n          this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n      }\n    } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n      this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n      e.preventDefault();\n    }\n  };\n\n  DropDownList.prototype.activeStateChange = function () {\n    if (this.isDocumentClick) {\n      this.hidePopup();\n      this.onFocusOut();\n      this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n    }\n  };\n\n  DropDownList.prototype.focusDropDown = function (e) {\n    if (!this.initial && this.isFilterLayout()) {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.dropDownClick = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n      return;\n    }\n\n    var target = e.target;\n\n    if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n      e.preventDefault();\n    }\n\n    if (!this.readonly) {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n\n        if (this.isFilterLayout()) {\n          this.focusDropDown(e);\n        }\n      } else {\n        this.focusIn(e);\n        this.floatLabelChange();\n        this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n        this.isDropDownClick = true;\n        this.showPopup();\n      } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n      var proxy_1 = this; // eslint-disable-next-line max-len\n\n      var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n\n      if (!this.isSecondClick) {\n        setTimeout(function () {\n          proxy_1.cloneElements();\n          proxy_1.isSecondClick = true;\n        }, duration);\n      }\n    } else {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.cloneElements = function () {\n    if (this.list) {\n      var ulElement = this.list.querySelector('ul');\n\n      if (ulElement) {\n        ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.actionCompleteData.ulElement = ulElement;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  DropDownList.prototype.activeItem = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      li.setAttribute('aria-selected', 'true');\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n\n    if (dataItem.value === null) {\n      Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n    } else {\n      Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    if (this.valueTemplate && this.itemData !== null) {\n      this.setValueTemplate();\n    } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n    }\n\n    var clearIcon = dropDownListClasses.clearIcon;\n    var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === 'combobox';\n    var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n    if (this.isFiltering() && clearElement) {\n      clearElement.style.removeProperty('visibility');\n    }\n\n    if (this.previousValue === dataItem.value) {\n      this.isSelected = false;\n      return true;\n    } else {\n      this.isSelected = !this.initial ? true : false;\n      this.isSelectCustom = false;\n\n      if (this.getModuleName() === 'dropdownlist') {\n        this.updateIconState();\n      }\n\n      return false;\n    }\n  };\n\n  DropDownList.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  DropDownList.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.setValue(e)) {\n      return;\n    }\n\n    attributes(this.targetElement(), {\n      'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n    });\n\n    if (this.isFilterLayout() && this.filterInput) {\n      attributes(this.filterInput, {\n        'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n      });\n    }\n\n    if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(e);\n    }\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n      this.setScrollPosition(e);\n    }\n\n    if (Browser.info.name !== 'mozilla') {\n      attributes(this.inputElement, {\n        'aria-label': this.inputElement.value\n      });\n      attributes(this.targetElement(), {\n        'aria-describedby': this.inputElement.id\n      });\n      this.targetElement().removeAttribute('aria-live');\n    }\n  };\n\n  DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n    var checkTemplate = false;\n\n    if (dropdownTemplate) {\n      try {\n        checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownList.prototype.setValueTemplate = function () {\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['valueTemplate']);\n\n      if (this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n        this.valueTempElement = null;\n      }\n    }\n\n    if (!this.valueTempElement) {\n      this.valueTempElement = this.createElement('span', {\n        className: dropDownListClasses.value\n      });\n      this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n      this.inputElement.style.display = 'none';\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.valueTempElement.innerHTML = '';\n    }\n\n    var valuecheck = this.dropdownCompiler(this.valueTemplate);\n\n    if (valuecheck) {\n      compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n    } else {\n      compiledString = compile(this.valueTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n\n    if (valueCompTemp && valueCompTemp.length > 0) {\n      for (var i = 0; i < valueCompTemp.length; i++) {\n        this.valueTempElement.appendChild(valueCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n  };\n\n  DropDownList.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  DropDownList.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  /**\n   * To trigger the change event for list.\n   *\n   * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onChangeEvent = function (eve) {\n    var dataItem = this.getItemData();\n    var index = this.isSelectCustom ? null : this.activeIndex;\n    this.setProperties({\n      'index': index,\n      'text': dataItem.text,\n      'value': dataItem.value\n    }, true);\n    this.detachChangeEvent(eve);\n  };\n\n  DropDownList.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  DropDownList.prototype.detachChangeEvent = function (eve) {\n    this.isSelected = false;\n    this.previousValue = this.value;\n    this.activeIndex = this.index;\n    this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n\n    if (!this.initial) {\n      var items = this.detachChanges(this.itemData);\n      var preItems = void 0;\n\n      if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n        preItems = Object.defineProperties({}, {\n          value: {\n            value: this.previousItemData,\n            enumerable: true\n          },\n          text: {\n            value: this.previousItemData,\n            enumerable: true\n          }\n        });\n      } else {\n        preItems = this.previousItemData;\n      }\n\n      this.setHiddenValue();\n      var eventArgs = {\n        e: eve,\n        item: this.item,\n        itemData: items,\n        previousItem: this.previousSelectedLI,\n        previousItemData: preItems,\n        isInteracted: eve ? true : false,\n        value: this.value,\n        element: this.element,\n        event: eve\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n    }\n\n    if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n      removeClass([this.inputWrapper.container], 'e-valid-input');\n    }\n  };\n\n  DropDownList.prototype.setHiddenValue = function () {\n    if (!isNullOrUndefined(this.value)) {\n      if (this.hiddenElement.querySelector('option')) {\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.textContent = this.text;\n        selectedElement.setAttribute('value', this.value.toString());\n      } else {\n        this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.setAttribute('value', this.value.toString());\n      }\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /**\n   * Filter bar implementation\n   *\n   * @param {KeyboardEventArgs} e - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onFilterUp = function (e) {\n    if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        case 38: //up arrow\n\n        case 40:\n          //down arrow\n          if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else {\n            this.preventAutoFill = false;\n          }\n\n          this.preventAltUp = false;\n          e.preventDefault();\n          break;\n\n        case 46: //delete\n\n        case 8:\n          //backspace\n          this.typedString = this.filterInput.value;\n\n          if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '') {\n            if (this.list) {\n              this.resetFocusElement();\n            }\n\n            this.activeIndex = null;\n\n            if (this.getModuleName() !== 'dropdownlist') {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n\n              if (this.getModuleName() === 'autocomplete') {\n                this.hidePopup();\n              }\n            }\n          }\n\n          e.preventDefault();\n          break;\n\n        default:\n          this.typedString = this.filterInput.value;\n          this.preventAutoFill = false;\n          this.searchLists(e);\n          break;\n      }\n    } else {\n      this.isValidKey = false;\n    }\n  };\n\n  DropDownList.prototype.onFilterDown = function (e) {\n    switch (e.keyCode) {\n      case 13:\n        //enter\n        break;\n\n      case 40: //down arrow\n\n      case 38:\n        //up arrow\n        this.queryString = this.filterInput.value;\n        e.preventDefault();\n        break;\n\n      case 9:\n        //tab\n        if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n          e.preventDefault();\n        }\n\n        break;\n\n      default:\n        this.prevSelectPoints = this.getSelectionPoints();\n        this.queryString = this.filterInput.value;\n        break;\n    }\n  };\n\n  DropDownList.prototype.removeFillSelection = function () {\n    if (this.isInteracted) {\n      var selection = this.getSelectionPoints();\n      this.inputElement.setSelectionRange(selection.end, selection.end);\n    }\n  };\n\n  DropDownList.prototype.getQuery = function (query) {\n    var filterQuery;\n\n    if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.typedString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  DropDownList.prototype.getSelectionPoints = function () {\n    var input = this.inputElement;\n    return {\n      start: Math.abs(input.selectionStart),\n      end: Math.abs(input.selectionEnd)\n    };\n  };\n\n  DropDownList.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isTyped = true;\n    this.activeIndex = null;\n    this.isListSearched = true;\n\n    if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n\n    this.isDataFetched = false;\n\n    if (this.isFiltering()) {\n      var eventArgs_1 = {\n        preventDefaultAction: false,\n        text: this.filterInput.value,\n        updateData: function (dataSource, query, fields) {\n          if (eventArgs_1.cancel) {\n            return;\n          }\n\n          _this.isCustomFilter = true;\n\n          _this.filteringAction(dataSource, query, fields);\n        },\n        baseEventArgs: e,\n        cancel: false\n      };\n      this.trigger('filtering', eventArgs_1, function (eventArgs) {\n        if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n          _this.filteringAction(_this.dataSource, null, _this.fields);\n        }\n      });\n    }\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n    */\n\n\n  DropDownList.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFilter = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n    if (!isNullOrUndefined(this.filterInput)) {\n      this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '' ? false : true;\n\n      if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n        this.actionCompleteData.isUpdated = false;\n        this.isTyped = false;\n\n        if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n        }\n\n        this.isTyped = true;\n\n        if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n          this.focusIndexItem();\n          this.setScrollPosition();\n        }\n\n        this.isNotSearchList = true;\n      } else {\n        this.isNotSearchList = false;\n        query = this.filterInput.value.trim() === '' ? null : query;\n        this.resetList(dataSource, fields, query);\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n\n  DropDownList.prototype.setSearchBox = function (popupElement) {\n    if (this.isFiltering()) {\n      var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n        className: dropDownListClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: dropDownListClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], parentElement);\n      prepend([parentElement], popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      if (!Browser.isDevice) {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n      return this.filterInputObj;\n    } else {\n      return inputObject;\n    }\n  };\n\n  DropDownList.prototype.onInput = function (e) {\n    this.isValidKey = true; // For filtering works in mobile firefox.\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.typedString = this.filterInput.value;\n      this.preventAutoFill = true;\n      this.searchLists(e);\n    }\n  };\n\n  DropDownList.prototype.pasteHandler = function (e) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.typedString = _this.filterInput.value;\n\n      _this.searchLists(e);\n    });\n  };\n\n  DropDownList.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    if (this.beforePopupOpen) {\n      this.renderPopup();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    if (this.isNotSearchList) {\n      this.isNotSearchList = false;\n      return;\n    }\n\n    if (this.isActive) {\n      var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n\n      _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n      this.updateSelectElementData(this.allowFiltering);\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n        this.isRequested = false;\n        this.keyActionHandler(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n        this.incrementalSearch(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      this.list.scrollTop = 0;\n\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      if (this.initRemoteRender) {\n        this.initial = true;\n        this.activeIndex = this.index;\n        this.initRemoteRender = false;\n\n        if (this.value && this.dataSource instanceof DataManager) {\n          var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n          var checkVal = list.some(function (x) {\n            return x[checkField_1] === _this.value;\n          });\n\n          if (!checkVal) {\n            this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value))).then(function (e) {\n              if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n\n                _this.updateValues();\n              } else {\n                _this.updateValues();\n              }\n            });\n          } else {\n            this.updateValues();\n          }\n        } else {\n          this.updateValues();\n        }\n\n        this.initial = false;\n      }\n\n      if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n        if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n          if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n            setTimeout(function () {\n              _this.updateActionCompleteDataValues(ulElement, list);\n            }, 0);\n          } else {\n            this.updateActionCompleteDataValues(ulElement, list);\n          }\n        }\n\n        this.addNewItem(list, selectedItem);\n\n        if (!isNullOrUndefined(this.itemData)) {\n          this.focusIndexItem();\n        }\n      }\n\n      if (this.beforePopupOpen) {\n        this.renderPopup();\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n    this.actionCompleteData = {\n      ulElement: ulElement.cloneNode(true),\n      list: list,\n      isUpdated: true\n    };\n\n    if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.addNewItem = function (listData, newElement) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n      var value_1 = this.getItemData().value;\n      var isExist = listData.some(function (data) {\n        return (typeof data === 'string' || typeof data === 'number') && data === value_1 || getValue(_this.fields.value, data) === value_1;\n      });\n\n      if (!isExist) {\n        this.addItem(this.itemData);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n    var _this = this;\n\n    if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n      if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n        setTimeout(function () {\n          _this.actionCompleteDataUpdate(li, item, index);\n        }, 0);\n      } else {\n        this.actionCompleteDataUpdate(li, item, index);\n      }\n    }\n  };\n\n  DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n    if (index != null) {\n      this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n    } else {\n      this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n    }\n\n    if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n      this.actionCompleteData.list.push(item);\n    }\n  };\n\n  DropDownList.prototype.focusIndexItem = function () {\n    var value = this.getItemData().value;\n    this.activeIndex = this.getIndexByValue(value);\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.selectedLI = element;\n    this.activeItem(element);\n    this.removeFocus();\n  };\n\n  DropDownList.prototype.updateSelection = function () {\n    var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (selectedItem) {\n      this.setProperties({\n        'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n      });\n      this.activeIndex = this.index;\n    } else {\n      this.removeFocus();\n      this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.removeFocus = function () {\n    var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n\n    if (highlightedItem && highlightedItem.length) {\n      removeClass(highlightedItem, dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.refreshPopup();\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle = _this.createElement('div', {\n          id: _this.element.id + '_popup',\n          className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n        });\n\n        var searchBox = _this.setSearchBox(popupEle);\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate(popupEle);\n        }\n\n        append([_this.list], popupEle);\n\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate(popupEle);\n        }\n\n        document.body.appendChild(popupEle);\n        popupEle.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.searchBoxHeight = 0;\n\n          if (!isNullOrUndefined(searchBox.container)) {\n            _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n            _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + 'px';\n          }\n\n          if (_this.headerTemplate) {\n            _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n            var height = Math.round(_this.header.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          if (_this.footerTemplate) {\n            _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n            var height = Math.round(_this.footer.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = void 0;\n\n        if (!isNullOrUndefined(_this.selectedLI) && !isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0) {\n          _this.setScrollPosition();\n        } else {\n          _this.list.scrollTop = 0;\n        }\n\n        if (Browser.isDevice && !_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' || _this.isDropDownClick && _this.getModuleName() === 'combobox')) {\n          offsetValue = _this.getOffsetValue(popupEle);\n          var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n          left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n        }\n\n        _this.getFocusElement();\n\n        _this.createPopup(popupEle, offsetValue, left);\n\n        _this.checkCollision(popupEle);\n\n        if (Browser.isDevice) {\n          _this.popupObj.element.classList.add(dropDownListClasses.device);\n\n          if (_this.getModuleName() === 'dropdownlist' || _this.getModuleName() === 'combobox' && !_this.allowFiltering && _this.isDropDownClick) {\n            _this.popupObj.collision = {\n              X: 'fit',\n              Y: 'fit'\n            };\n          }\n\n          if (_this.isFilterLayout()) {\n            _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n\n            _this.popupObj.position = {\n              X: 0,\n              Y: 0\n            };\n\n            _this.popupObj.dataBind();\n\n            attributes(_this.popupObj.element, {\n              style: 'left:0px;right:0px;top:0px;bottom:0px;'\n            });\n            addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n\n            _this.setSearchBoxPosition();\n\n            _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n            _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n            EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n            EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n          }\n        }\n\n        popupEle.style.visibility = 'visible';\n        addClass([popupEle], 'e-popup-close');\n\n        var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n\n        for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n          var element = scrollParentElements_1[_i];\n          EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n        }\n\n        if (Browser.isDevice && _this.isFilterLayout()) {\n          EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\n        }\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        attributes(_this.targetElement(), {\n          'aria-expanded': 'true'\n        });\n        var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n        addClass([inputParent], [dropDownListClasses.inputFocus]);\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('open', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.element : null);\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  DropDownList.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.getOffsetValue = function (popupEle) {\n    var popupStyles = getComputedStyle(popupEle);\n    var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n    var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n    return this.setPopupPosition(borderTop + borderBottom);\n  };\n\n  DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputWrapper.container,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      zIndex: this.zIndex,\n      close: function () {\n        if (!_this.isDocumentClick) {\n          _this.focusDropDown();\n        } // eslint-disable-next-line\n\n\n        if (_this.isReact) {\n          _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n        }\n\n        var isResetItem = _this.getModuleName() === 'autocomplete' ? true : false;\n        _this.isNotSearchList = false;\n        _this.isDocumentClick = false;\n\n        _this.destroyPopup();\n\n        if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n          _this.isActive = true;\n\n          _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n        }\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector('li');\n\n        var ulElement = _this.list.querySelector('ul li');\n\n        if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this.element.tagName !== 'EJS-COMBOBOX') {\n          _this.cloneElements();\n        }\n\n        if (_this.isFilterLayout()) {\n          removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n          _this.isFilterFocus = true;\n\n          _this.filterInput.focus();\n\n          if (_this.inputWrapper.clearButton) {\n            addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n          }\n        }\n\n        _this.activeStateChange();\n      },\n      targetExitViewport: function () {\n        if (!Browser.isDevice) {\n          _this.hidePopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n  };\n\n  DropDownList.prototype.getFocusElement = function () {// combo-box used this method\n  };\n\n  DropDownList.prototype.isFilterLayout = function () {\n    return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n  };\n\n  DropDownList.prototype.scrollHandler = function () {\n    if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n      this.hidePopup();\n    }\n  };\n\n  DropDownList.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    this.popupObj.element.style.maxHeight = '100%';\n    this.popupObj.element.style.width = '100%';\n    this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n    this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  DropDownList.prototype.setPopupPosition = function (border) {\n    var offsetValue;\n    var popupOffset = border;\n    var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n    var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n    var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n    var liHeight = firstItem.getBoundingClientRect().height;\n    var listHeight = this.list.offsetHeight / 2;\n    var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n    var lastItemOffsetValue = lastItem.offsetTop;\n\n    if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n      var count = this.list.offsetHeight / liHeight;\n      var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n      this.list.scrollTop = selectedLI.offsetTop;\n    } else if (height > listHeight) {\n      offsetValue = listHeight - liHeight / 2;\n      this.list.scrollTop = height - listHeight + liHeight / 2;\n    } else {\n      offsetValue = height;\n    }\n\n    var inputHeight = this.inputWrapper.container.offsetHeight;\n    offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n    return -offsetValue;\n  };\n\n  DropDownList.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n\n    return width;\n  };\n\n  DropDownList.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  DropDownList.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  };\n\n  DropDownList.prototype.isEditTextBox = function () {\n    return false;\n  };\n\n  DropDownList.prototype.isFiltering = function () {\n    return this.allowFiltering;\n  };\n\n  DropDownList.prototype.isPopupButton = function () {\n    return true;\n  };\n\n  DropDownList.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  DropDownList.prototype.clearText = function () {\n    this.filterInput.value = this.typedString = '';\n    this.searchLists(null);\n  };\n\n  DropDownList.prototype.listScroll = function () {\n    this.filterInput.blur();\n  };\n\n  DropDownList.prototype.setEleWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.inputWrapper.container.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  DropDownList.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    this.isTyped = false;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.isActive = false;\n    this.filterInputObj = null;\n    this.isDropDownClick = false;\n    this.preventAutoFill = false;\n    var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n\n    for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n      var element = scrollableParentElements_1[_i];\n      EventHandler.remove(element, 'scroll', this.scrollHandler);\n    }\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n      EventHandler.remove(this.list, 'scroll', this.listScroll);\n    }\n\n    if (this.isFilterLayout()) {\n      if (!Browser.isDevice) {\n        this.searchKeyModule.destroy();\n\n        if (this.clearIconElement) {\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n      }\n\n      if (this.backIconElement) {\n        EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n        EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n      }\n\n      EventHandler.remove(this.filterInput, 'input', this.onInput);\n      EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n      EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n      EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n      EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n      this.filterInput = null;\n    }\n\n    attributes(this.targetElement(), {\n      'aria-expanded': 'false'\n    });\n    this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n\n    if (this.isFiltering()) {\n      this.actionCompleteData.isUpdated = false;\n    }\n\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('close', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n        var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n\n        fixedHeader.parentNode.removeChild(fixedHeader);\n        _this.fixedHeaderElement = null;\n      }\n\n      if (!eventArgs.cancel) {\n        if (_this.getModuleName() === 'autocomplete') {\n          _this.rippleFun();\n        }\n\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.isFilterFocus = false;\n    this.popupObj.destroy();\n    detach(this.popupObj.element);\n  };\n\n  DropDownList.prototype.clickOnBackIcon = function () {\n    this.hidePopup();\n    this.focusIn();\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.render = function () {\n    if (this.element.tagName === 'INPUT') {\n      this.inputElement = this.element;\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n        this.inputElement.setAttribute('role', 'textbox');\n      }\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n        this.inputElement.setAttribute('type', 'text');\n      }\n    } else {\n      this.inputElement = this.createElement('input', {\n        attrs: {\n          role: 'textbox',\n          type: 'text'\n        }\n      });\n\n      if (this.element.tagName !== this.getNgDirective()) {\n        this.element.style.display = 'none';\n      }\n\n      this.element.parentElement.insertBefore(this.inputElement, this.element);\n      this.preventTabIndex(this.inputElement);\n    }\n\n    var updatedCssClassValues = this.cssClass;\n\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    this.inputWrapper = Input.createInput({\n      element: this.inputElement,\n      buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n      floatLabelType: this.floatLabelType,\n      properties: {\n        readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n        placeholder: this.placeholder,\n        cssClass: updatedCssClassValues,\n        enabled: this.enabled,\n        enableRtl: this.enableRtl,\n        showClearButton: this.showClearButton\n      }\n    }, this.createElement);\n\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.inputWrapper.container);\n    } else {\n      this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n    }\n\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'tabindex': '-1',\n        'class': dropDownListClasses.hiddenElement\n      }\n    });\n    prepend([this.hiddenElement], this.inputWrapper.container);\n    this.validationAttribute(this.element, this.hiddenElement);\n    this.setReadOnly();\n    this.setFields();\n    this.inputWrapper.container.style.width = formatUnit(this.width);\n    this.inputWrapper.container.classList.add('e-ddl');\n    this.wireEvent();\n    this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n    this.element.removeAttribute('tabindex');\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement.id = id + '_hidden';\n    this.targetElement().setAttribute('tabindex', this.tabIndex);\n    attributes(this.targetElement(), this.getAriaAttributes());\n    this.updateDataAttribute(this.htmlAttributes);\n    this.setHTMLAttributes();\n\n    if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n      this.initValue();\n    } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n      var selectElement = this.element;\n      this.value = selectElement.options[selectElement.selectedIndex].value;\n      this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n      this.initValue();\n    }\n\n    this.preventTabIndex(this.element);\n\n    if (!this.enabled) {\n      this.targetElement().tabIndex = -1;\n    }\n\n    this.initial = false;\n    this.element.style.opacity = '';\n\n    this.inputElement.onselect = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    this.inputElement.onchange = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    if (this.element.hasAttribute('autofocus')) {\n      this.focusIn();\n    }\n\n    if (!isNullOrUndefined(this.text)) {\n      this.inputElement.setAttribute('value', this.text);\n    }\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    this.renderComplete();\n  };\n\n  DropDownList.prototype.setFooterTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.footer) {\n      this.footer.innerHTML = '';\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], dropDownListClasses.footer);\n    }\n\n    var footercheck = this.dropdownCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (footerCompTemp && footerCompTemp.length > 0) {\n      for (var i = 0; i < footerCompTemp.length; i++) {\n        this.footer.appendChild(footerCompTemp[i]);\n      }\n    }\n\n    append([this.footer], popupEle);\n  };\n\n  DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], dropDownListClasses.header);\n    }\n\n    var headercheck = this.dropdownCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (headerCompTemp && headerCompTemp.length) {\n      for (var i = 0; i < headerCompTemp.length; i++) {\n        this.header.appendChild(headerCompTemp[i]);\n      }\n    }\n\n    var contentEle = popupEle.querySelector('div.e-content');\n    popupEle.insertBefore(this.header, contentEle);\n  };\n\n  DropDownList.prototype.setOldText = function (text) {\n    this.text = text;\n  };\n\n  DropDownList.prototype.setOldValue = function (value) {\n    this.value = value;\n  };\n\n  DropDownList.prototype.refreshPopup = function () {\n    if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n      removeClass([this.popupObj.element], 'e-popup-close');\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.checkData = function (newProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n      this.list = null;\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n\n    this.isListSearched = false;\n    var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n    var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n\n    if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n      this.itemData = null;\n    }\n\n    if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n      this.actionData = this.actionCompleteData;\n    } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      this.actionCompleteData = this.getModuleName() === 'combobox' ? {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      } : this.actionCompleteData;\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.updateDataSource = function (props) {\n    if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n      this.clearAll(null, props);\n    }\n\n    if (this.fields.groupBy && props.fields && !this.isGroupChecking && this.list) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(props.dataSource === [])) {\n      this.typedString = '';\n      this.resetList(this.dataSource);\n    }\n\n    if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n      this.checkCustomValue();\n    }\n  };\n\n  DropDownList.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    this.setProperties({\n      'text': dataItem.text,\n      'value': dataItem.value\n    });\n  };\n\n  DropDownList.prototype.updateInputFields = function () {\n    if (this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @private\n   * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    if (this.getModuleName() === 'dropdownlist') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          break;\n\n        case 'htmlAttributes':\n          this_1.setHTMLAttributes();\n          break;\n\n        case 'width':\n          this_1.setEleWidth(newProp.width);\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this_1.filterInput) {\n            Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n          }\n\n          break;\n\n        case 'readonly':\n          if (this_1.getModuleName() !== 'dropdownlist') {\n            Input.setReadonly(newProp.readonly, this_1.inputElement);\n          }\n\n          this_1.setReadOnly();\n          break;\n\n        case 'cssClass':\n          this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n\n        case 'enableRtl':\n          this_1.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this_1.setEnable();\n          break;\n\n        case 'text':\n          if (newProp.text === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var li = this_1.getElementByText(newProp.text);\n\n            if (!this_1.checkValidLi(li)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n              } else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                var listLength_1 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_1);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldText(oldProp.text);\n                  }\n                });\n              } else {\n                this_1.setOldText(oldProp.text);\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'value':\n          if (newProp.value === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          this_1.notify('beforeValueChange', {\n            newProp: newProp\n          }); // gird component value type change\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var item = this_1.getElementByValue(newProp.value);\n\n            if (!this_1.checkValidLi(item)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n              } else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                var listLength_2 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_2);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldValue(oldProp.value);\n                  }\n                });\n              } else {\n                this_1.setOldValue(oldProp.value);\n              }\n            }\n\n            this_1.updateInputFields();\n            this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n          }\n\n          break;\n\n        case 'index':\n          if (newProp.index === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender && this_1.liCollections) {\n            var element = this_1.liCollections[newProp.index];\n\n            if (!this_1.checkValidLi(element)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n              } else {\n                this_1.index = oldProp.index;\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'footerTemplate':\n          if (this_1.popupObj) {\n            this_1.setFooterTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'headerTemplate':\n          if (this_1.popupObj) {\n            this_1.setHeaderTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'valueTemplate':\n          if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate != null) {\n            this_1.setValueTemplate();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this_1.allowFiltering) {\n            this_1.actionCompleteData = {\n              ulElement: this_1.ulElement,\n              list: this_1.listData,\n              isUpdated: true\n            };\n            this_1.actionData = this_1.actionCompleteData;\n            this_1.updateSelectElementData(this_1.allowFiltering);\n          }\n\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this_1.inputWrapper);\n          Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n          break;\n\n        case 'showClearButton':\n          Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n          this_1.bindClearEvent();\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n          }\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      _loop_1(prop);\n    }\n  };\n\n  DropDownList.prototype.checkValidLi = function (element) {\n    if (this.isValidLI(element)) {\n      this.setSelection(element, null);\n      return true;\n    }\n\n    return false;\n  };\n\n  DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n    var _this = this;\n\n    var li;\n\n    this.updateListValues = function () {\n      if (prop === 'text') {\n        li = _this.getElementByText(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldText(oldProp);\n        }\n      } else if (prop === 'value') {\n        li = _this.getElementByValue(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldValue(oldProp);\n        }\n      } else if (prop === 'index') {\n        li = _this.liCollections[newProp];\n\n        if (!_this.checkValidLi(li)) {\n          _this.index = oldProp;\n        }\n      }\n    };\n  };\n\n  DropDownList.prototype.setReadOnly = function () {\n    if (this.readonly) {\n      addClass([this.inputWrapper.container], ['e-readonly']);\n    } else {\n      removeClass([this.inputWrapper.container], ['e-readonly']);\n    }\n  };\n\n  DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n\n    if (this.popupObj) {\n      Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownList.prototype.getModuleName = function () {\n    return 'dropdownlist';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showPopup = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list != this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {\n      this.actionCompleteData = this.actionData;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n\n    if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n      this.isActive = true;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n      this.renderList();\n    }\n\n    this.invokeRenderPopup();\n  };\n\n  DropDownList.prototype.invokeRenderPopup = function () {\n    if (Browser.isDevice && this.isFilterLayout()) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_2 = this;\n\n      window.onpopstate = function () {\n        proxy_2.hidePopup();\n      };\n\n      history.pushState({}, '');\n    }\n\n    if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n      this.renderPopup();\n    }\n\n    attributes(this.targetElement(), {\n      'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n    });\n  };\n\n  DropDownList.prototype.renderHightSearch = function () {// update high light search\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.isEscapeKey = false;\n\n      if (!isNullOrUndefined(this.index)) {\n        var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n        this.selectedLI = this.liCollections[this.index] || element;\n\n        if (this.selectedLI) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n\n          if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n          }\n        }\n      } else {\n        this.resetSelection();\n      }\n    }\n\n    this.closePopup(0, e);\n    var dataItem = this.getItemData();\n    var isSelectVal = !isNullOrUndefined(this.selectedLI);\n\n    if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n      this.isSelectCustom = false;\n      this.clearAll(e);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Sets the focus on the component for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusIn = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n      return;\n    }\n\n    var isFocused = false;\n\n    if (this.preventFocus && Browser.isDevice) {\n      this.inputWrapper.container.tabIndex = 1;\n      this.inputWrapper.container.focus();\n      this.preventFocus = false;\n      isFocused = true;\n    }\n\n    if (!isFocused) {\n      this.targetElement().focus();\n    }\n\n    addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    this.onFocus(e);\n  };\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n\n    this.isTyped = true;\n    this.hidePopup(e);\n\n    if (this.targetElement()) {\n      this.targetElement().blur();\n    }\n\n    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.destroy = function () {\n    this.isActive = false;\n    resetIncrementalSearchValues(this.element.id); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    if (this.inputElement) {\n      var attrArray = ['readonly', 'aria-disabled', 'aria-placeholder', 'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded', 'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n\n      for (var i = 0; i < attrArray.length; i++) {\n        this.inputElement.removeAttribute(attrArray[i]);\n      }\n\n      this.inputElement.setAttribute('tabindex', this.tabIndex);\n      this.inputElement.classList.remove('e-input');\n      Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    this.element.style.display = 'block';\n\n    if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n      detach(this.inputWrapper.container);\n    } else {\n      this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n      detach(this.inputWrapper.container);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownList.prototype.getItems = function () {\n    if (!this.list) {\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      }\n\n      this.renderList();\n    }\n\n    return this.ulElement ? _super.prototype.getItems.call(this) : [];\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownList.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.clear = function () {\n    this.value = null;\n  };\n\n  __decorate([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('100%')], DropDownList.prototype, \"width\", void 0);\n\n  __decorate([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n\n  __decorate([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"query\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"text\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"value\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"index\", void 0);\n\n  __decorate([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"filtering\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"change\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"open\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"close\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"blur\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"focus\", void 0);\n\n  DropDownList = __decorate([NotifyPropertyChanges], DropDownList);\n  return DropDownList;\n}(DropDownBase);\n\nexport { DropDownList };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","EventHandler","Property","Event","compile","KeyboardEvents","append","select","attributes","isNullOrUndefined","getUniqueID","formatUnit","isUndefined","getValue","Animation","Browser","NotifyPropertyChanges","addClass","removeClass","closest","prepend","detach","classList","Popup","isCollide","createSpinner","showSpinner","hideSpinner","Input","incrementalSearch","resetIncrementalSearchValues","DropDownBase","dropDownBaseClasses","DataManager","Query","Predicate","dropDownListClasses","root","hover","selected","rtl","li","disable","disabled","base","focus","input","inputFocus","icon","iconAnimation","value","device","backIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","inputObject","container","buttons","DropDownList","_super","options","element","_this","call","isListSearched","preventChange","isAngular","preRender","valueTempElement","style","opacity","initializeData","activeIndex","index","queryString","isPopupOpen","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isTyped","isSelected","preventFocus","preventAutoFill","isValidKey","typedString","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","actionData","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isCustomFilter","isSecondClick","previousValue","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","setZIndex","popupObj","setProperties","zIndex","renderList","isEmptyData","render","unWireListEvents","wireListEvents","floatLabelChange","getModuleName","floatLabelType","floatElement","inputWrapper","querySelector","inputElement","resetHandler","e","preventDefault","clearAll","resetFocusElement","removeHover","removeSelection","removeFocus","list","scrollTop","ulElement","add","properties","dataSource","isActive","resetSelection","dataItem","getItemData","onChangeEvent","selectedLI","resetList","allowFiltering","onActionComplete","cloneNode","innerHTML","itemData","text","item","display","setSelection","updateIconState","cloneElements","setHTMLAttributes","keys","htmlAttributes","_i","_a","htmlAttr","updatedClassValue","replace","trim","split","enabled","setEnable","readonly","dataBind","setAttribute","defaultAttr","validateAttr","push","indexOf","setPlaceholder","removeAttribute","getAriaAttributes","id","setEnableRtl","enableRtl","parentElement","setEnabled","targetElement","tabIndex","hidePopup","getPersistData","addOnPersist","getLocaleName","preventTabIndex","getNgDirective","getElementByText","getElementByValue","getValueByText","listItems","getItems","listItems_1","liItem","getFormattedValue","getAttribute","initValue","updateValues","liCollections","setHiddenValue","setValue","showClearButton","onBlurHandler","relatedTarget","currentTarget","isFilterLayout","document","body","contains","activeElement","focusOutAction","isRequested","focusOut","onFocusOut","dispatchEvent","tagName","clearButton","trigger","onFocus","args","event","resetValueHandler","formElement","val","wireEvent","dropDownClick","focusIn","onSearch","bindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","unBindCommonEvent","remove","destroy","onMouseClick","onMouseOver","onMouseLeave","charCode","undefined","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","delay","closePopup","currentLi","setHover","hoveredItem","querySelectorAll","hasAttribute","setScrollPosition","spinnerElement","filterInputObj","width","createElement","preventAction","action","preventHomeEnd","isNavAction","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","getPageCount","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","focusEle","isSelectFocusItem","startIndex","nextItem","findLi","liHeight","noData","getComputedStyle","getPropertyValue","Math","round","getBoundingClientRect","height","parseInt","steps","previousItem","unWireEvent","checkSelector","onDocumentClick","isIE","info","name","activeStateChange","which","button","proxy_1","duration","itemTemplate","setTimeout","updateSelectedItem","preventSelect","isSelection","selectedData","getDataByValue","items","detachChanges","eventArgs","cancel","selectEventCallback","setSelectOptions","previousItemData","focusedItem","getIndexByValue","activeItem","valueTemplate","setValueTemplate","previousSibling","isFilterElement","isFiltering","clearElement","removeProperty","previousSelectedLI","type","dropdownCompiler","dropdownTemplate","checkTemplate","exception","compiledString","isReact","clearTemplate","className","insertBefore","valuecheck","valueCompTemp","valueTemplateId","isStringTemplate","appendChild","renderReactTemplates","selectedItems","fields","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","selectedElement","textContent","toString","onFilterUp","ctrlKey","keyCode","searchLists","onFilterDown","getSelectionPoints","removeFillSelection","selection","setSelectionRange","getQuery","query","filterQuery","clone","filterType","dataType","typeOfData","typeof","where","ignoreCase","ignoreAccent","start","abs","selectionStart","selectionEnd","visibility","isDataFetched","eventArgs_1","preventDefaultAction","updateData","filteringAction","baseEventArgs","filter","focusIndexItem","setSearchBox","popupElement","attrs","parentNode","createInput","placeholder","filterBarPlaceholder","cssClass","clearIconElement","clearText","searchKeyModule","onInput","pasteHandler","onActionFailure","renderPopup","selectedItem","updateSelectElementData","checkField_1","checkVal","some","x","executeQuery","then","result","addItem","updateActionCompleteDataValues","addNewItem","listData","newElement","value_1","isExist","data","updateActionCompleteData","actionCompleteDataUpdate","childNodes","findListElement","updateSelection","highlightedItem","refreshPopup","popupEle","searchBox","listHeight","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","searchBoxHeight","maxHeight","offsetValue","left","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","borderLeftWidth","getFocusElement","createPopup","checkCollision","collision","X","Y","position","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollParentElements_1","scrollHandler","listScroll","inputParent","animModel","popupInstance","popup","animation","show","destroyPopup","marginTop","resolveCollision","popupStyles","borderTop","borderTopWidth","borderBottom","borderBottomWidth","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","isResetItem","actionList","targetExitViewport","window","innerHeight","border","popupOffset","lastItem","offsetHeight","offsetTop","lastItemOffsetValue","count","paddingBottom","inputHeight","popupWidth","inputWidth","offsetWidth","parseFloat","scrollBottom","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","groupBy","fixedHeaderElement","isPopupButton","blur","setEleWidth","match","scrollableParentElements","scrollableParentElements_1","fixedHeader","removeChild","rippleFun","role","updatedCssClassValues","validationAttribute","setReadOnly","setFields","updateDataAttribute","selectElement","selectedIndex","onselect","stopImmediatePropagation","onchange","renderComplete","footercheck","footerCompTemp","footerTemplateId","headercheck","headerCompTemp","headerTemplateId","contentEle","setOldText","setOldValue","refreshPosition","checkData","newProp","isChangeValue","isChangeText","updateDataSource","props","isGroupChecking","setFloatingHeader","checkCustomValue","updateInputFields","onPropertyChanged","oldProp","setUpdateInitial","_loop_1","prop","this_1","setReadonly","setCssClass","checkValidLi","setSelectionData","listLength_1","checkField","notify","listLength_2","removeFloating","addFloating","setClearButton","ddlProps","getPropObject","newProperty","oldProperty","updateListValues","newClass","oldClass","invokeRenderPopup","proxy_2","onpopstate","pushState","children","renderHightSearch","isSelectVal","isFocused","attrArray","clear"],"sources":["C:/Project/show-me-the-code-test/view/node_modules/@syncfusion/ej2-dropdowns/src/drop-down-list/drop-down-list.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nimport { EventHandler, Property, Event, compile, KeyboardEvents, append, select } from '@syncfusion/ej2-base';\nimport { attributes, isNullOrUndefined, getUniqueID, formatUnit, isUndefined, getValue } from '@syncfusion/ej2-base';\nimport { Animation, Browser, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, closest, prepend, detach, classList } from '@syncfusion/ej2-base';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { incrementalSearch, resetIncrementalSearchValues } from '../common/incremental-search';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\n// don't use space in classnames\nexport var dropDownListClasses = {\n    root: 'e-dropdownlist',\n    hover: dropDownBaseClasses.hover,\n    selected: dropDownBaseClasses.selected,\n    rtl: dropDownBaseClasses.rtl,\n    li: dropDownBaseClasses.li,\n    disable: dropDownBaseClasses.disabled,\n    base: dropDownBaseClasses.root,\n    focus: dropDownBaseClasses.focus,\n    input: 'e-input-group',\n    inputFocus: 'e-input-focus',\n    icon: 'e-input-group-icon e-ddl-icon',\n    iconAnimation: 'e-icon-anim',\n    value: 'e-input-value',\n    device: 'e-ddl-device',\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    mobileFilter: 'e-ddl-device-filter',\n    footer: 'e-ddl-footer',\n    header: 'e-ddl-header',\n    clearIcon: 'e-clear-icon',\n    clearIconHide: 'e-clear-icon-hide',\n    popupFullScreen: 'e-popup-full-page',\n    disableIcon: 'e-ddl-disable-icon',\n    hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n    container: null,\n    buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nvar DropDownList = /** @class */ (function (_super) {\n    __extends(DropDownList, _super);\n    /**\n     * * Constructor for creating the DropDownList component.\n     *\n     * @param {DropDownListModel} options - Specifies the DropDownList model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isListSearched = false;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        return _this;\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.preRender = function () {\n        this.valueTempElement = null;\n        this.element.style.opacity = '0';\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n        this.activeIndex = this.index;\n        this.queryString = '';\n    };\n    DropDownList.prototype.initializeData = function () {\n        this.isPopupOpen = false;\n        this.isDocumentClick = false;\n        this.isInteracted = false;\n        this.isFilterFocus = false;\n        this.beforePopupOpen = false;\n        this.initial = true;\n        this.initRemoteRender = false;\n        this.isNotSearchList = false;\n        this.isTyped = false;\n        this.isSelected = false;\n        this.preventFocus = false;\n        this.preventAutoFill = false;\n        this.isValidKey = false;\n        this.typedString = '';\n        this.isEscapeKey = false;\n        this.isPreventBlur = false;\n        this.isTabKey = false;\n        this.actionCompleteData = { isUpdated: false };\n        this.actionData = { isUpdated: false };\n        this.prevSelectPoints = {};\n        this.isSelectCustom = false;\n        this.isDropDownClick = false;\n        this.preventAltUp = false;\n        this.isCustomFilter = false;\n        this.isSecondClick = false;\n        this.previousValue = null;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    DropDownList.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    DropDownList.prototype.renderList = function (isEmptyData) {\n        _super.prototype.render.call(this, isEmptyData);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    DropDownList.prototype.floatLabelChange = function () {\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n            var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n            if (this.inputElement.value !== '' || this.isInteracted) {\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n            }\n            else {\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n            }\n        }\n    };\n    DropDownList.prototype.resetHandler = function (e) {\n        e.preventDefault();\n        this.clearAll(e);\n    };\n    DropDownList.prototype.resetFocusElement = function () {\n        this.removeHover();\n        this.removeSelection();\n        this.removeFocus();\n        this.list.scrollTop = 0;\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n            var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n            if (li) {\n                li.classList.add(dropDownListClasses.focus);\n            }\n        }\n    };\n    DropDownList.prototype.clearAll = function (e, properties) {\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\n            (isNullOrUndefined(properties.dataSource) ||\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n            this.isActive = true;\n            this.resetSelection(properties);\n        }\n        var dataItem = this.getItemData();\n        if (this.previousValue === dataItem.value) {\n            return;\n        }\n        this.onChangeEvent(e);\n    };\n    DropDownList.prototype.resetSelection = function (properties) {\n        if (this.list) {\n            if ((!isNullOrUndefined(properties) &&\n                (isNullOrUndefined(properties.dataSource) ||\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n                this.selectedLI = null;\n                this.actionCompleteData.isUpdated = false;\n                this.actionCompleteData.ulElement = null;\n                this.actionCompleteData.list = null;\n                this.resetList(properties.dataSource);\n            }\n            else {\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n                }\n                this.resetFocusElement();\n            }\n        }\n        this.hiddenElement.innerHTML = '';\n        this.inputElement.value = '';\n        this.value = null;\n        this.itemData = null;\n        this.text = null;\n        this.index = null;\n        this.activeIndex = null;\n        this.item = null;\n        this.queryString = '';\n        if (this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n            this.valueTempElement = null;\n        }\n        this.setSelection(null, null);\n        this.isSelectCustom = false;\n        this.updateIconState();\n        this.cloneElements();\n    };\n    DropDownList.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    var updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\n                    if (updatedClassValue !== '') {\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n                    }\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n                    this.enabled = false;\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n                    this.readonly = true;\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        defaultAttr.push('tabindex');\n                    }\n                    if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n                    }\n                }\n            }\n        }\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputWrapper.container.removeAttribute('tabindex');\n        }\n    };\n    DropDownList.prototype.getAriaAttributes = function () {\n        return {\n            'aria-disabled': 'false',\n            'aria-owns': this.element.id + '_options',\n            'role': 'combobox',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false',\n            'aria-activedescendant': 'null',\n            'aria-live': 'polite',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownList.prototype.setEnableRtl = function () {\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n        if (this.popupObj) {\n            this.popupObj.enableRtl = this.enableRtl;\n            this.popupObj.dataBind();\n        }\n    };\n    DropDownList.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputElement);\n        if (this.enabled) {\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'false');\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.hidePopup();\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'true');\n            this.targetElement().tabIndex = -1;\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownList.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    DropDownList.prototype.getLocaleName = function () {\n        return 'drop-down-list';\n    };\n    DropDownList.prototype.preventTabIndex = function (element) {\n        if (this.getModuleName() === 'dropdownlist') {\n            element.tabIndex = -1;\n        }\n    };\n    DropDownList.prototype.targetElement = function () {\n        return this.inputWrapper.container;\n    };\n    DropDownList.prototype.getNgDirective = function () {\n        return 'EJS-DROPDOWNLIST';\n    };\n    DropDownList.prototype.getElementByText = function (text) {\n        return this.getElementByValue(this.getValueByText(text));\n    };\n    DropDownList.prototype.getElementByValue = function (value) {\n        var item;\n        var listItems = this.getItems();\n        for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n            var liItem = listItems_1[_i];\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n                item = liItem;\n                break;\n            }\n        }\n        return item;\n    };\n    DropDownList.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    DropDownList.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            this.setSelection(this.getElementByValue(this.value), null);\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var element = this.getElementByText(this.text);\n            if (isNullOrUndefined(element)) {\n                this.setProperties({ text: null });\n                return;\n            }\n            else {\n                this.setSelection(element, null);\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    DropDownList.prototype.onBlurHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var target = e.relatedTarget;\n        var currentTarget = e.target;\n        var isPreventBlur = this.isPreventBlur;\n        this.isPreventBlur = false;\n        //IE 11 - issue\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n                this.filterInput.focus();\n            }\n            else {\n                this.targetElement().focus();\n            }\n            return;\n        }\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\n            && document.body.contains(this.popupObj.element) &&\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\n            if (!this.beforePopupOpen) {\n                this.isDocumentClick = false;\n            }\n            return;\n        }\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\n            && (document.activeElement !== target || (document.activeElement === target &&\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\n            this.isDocumentClick = this.isPopupOpen ? true : false;\n            this.focusOutAction(e);\n            this.isTabKey = false;\n        }\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n            this.isActive = false;\n            this.beforePopupOpen = false;\n        }\n    };\n    DropDownList.prototype.focusOutAction = function (e) {\n        this.isInteracted = false;\n        this.focusOut(e);\n        this.onFocusOut();\n    };\n    DropDownList.prototype.onFocusOut = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isSelected) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(null);\n        }\n        this.floatLabelChange();\n        this.dispatchEvent(this.hiddenElement, 'change');\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n            this.dispatchEvent(this.inputElement, 'blur');\n        }\n        if (this.inputWrapper.clearButton) {\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n        this.trigger('blur');\n    };\n    DropDownList.prototype.onFocus = function (e) {\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            var args = { isInteracted: e ? true : false, event: e };\n            this.trigger('focus', args);\n        }\n        this.updateIconState();\n    };\n    DropDownList.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\n            this.text = val;\n        }\n    };\n    DropDownList.prototype.wireEvent = function () {\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n        this.bindCommonEvent();\n    };\n    DropDownList.prototype.bindCommonEvent = function () {\n        EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        this.bindClearEvent();\n    };\n    DropDownList.prototype.bindClearEvent = function () {\n        if (this.showClearButton) {\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n        }\n    };\n    DropDownList.prototype.unBindCommonEvent = function () {\n        if (this.targetElement()) {\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n        }\n        var formElement = this.inputElement && closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n        if (this.showClearButton) {\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n        }\n    };\n    DropDownList.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    DropDownList.prototype.onSearch = function (e) {\n        if (e.charCode !== 32 && e.charCode !== 13) {\n            if (this.list === undefined) {\n                this.renderList();\n            }\n            this.searchKeyEvent = e;\n            this.onServerIncrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onServerIncrementalSearch = function (e) {\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n            this.incrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        if (Browser.isDevice && this.isFilterLayout()) {\n            history.back();\n        }\n        else {\n            var delay = 100;\n            this.closePopup(delay, e);\n        }\n    };\n    DropDownList.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    DropDownList.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    DropDownList.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    DropDownList.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    DropDownList.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    DropDownList.prototype.incrementalSearch = function (e) {\n        if (this.liCollections.length > 0) {\n            var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n            if (!isNullOrUndefined(li)) {\n                this.setSelection(li, e);\n                this.setScrollPosition();\n            }\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            this.spinnerElement.innerHTML = '';\n            this.spinnerElement = null;\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    DropDownList.prototype.keyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n        var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n        this.isEscapeKey = e.action === 'escape';\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n        var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            var isTabAction = e.action === 'tab' || e.action === 'close';\n            if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                isNavigation && this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\n                || e.action === 'escape') {\n                e.preventDefault();\n            }\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\n            switch (e.action) {\n                case 'down':\n                case 'up':\n                    this.updateUpDownAction(e);\n                    break;\n                case 'pageUp':\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'pageDown':\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'home':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'end':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'space':\n                    if (this.getModuleName() === 'dropdownlist') {\n                        if (!this.beforePopupOpen) {\n                            this.showPopup();\n                        }\n                    }\n                    break;\n                case 'open':\n                    this.showPopup();\n                    break;\n                case 'hide':\n                    this.preventAltUp = this.isPopupOpen;\n                    this.hidePopup(e);\n                    this.focusDropDown(e);\n                    break;\n                case 'enter':\n                    this.selectCurrentItem(e);\n                    break;\n                case 'tab':\n                    this.selectCurrentValueOnTab(e);\n                    break;\n                case 'escape':\n                case 'close':\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                        this.focusDropDown(e);\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownList.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            if (this.getModuleName() === 'autocomplete') {\n                startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n                index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            }\n            var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        e.preventDefault();\n    };\n    DropDownList.prototype.updateHomeEndAction = function (e) {\n        if (this.getModuleName() === 'dropdownlist') {\n            var findLi = 0;\n            if (e.action === 'home') {\n                findLi = 0;\n            }\n            else {\n                findLi = this.getItems().length - 1;\n            }\n            e.preventDefault();\n            if (this.activeIndex === findLi) {\n                return;\n            }\n            this.setSelection(this.liCollections[findLi], e);\n        }\n    };\n    DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.selectCurrentItem(e);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                this.focusDropDown(e);\n            }\n        }\n    };\n    DropDownList.prototype.mobileKeyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            if (this.list === undefined && !this.isRequested) {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if (e.action === 'enter') {\n                this.selectCurrentItem(e);\n            }\n        }\n    };\n    DropDownList.prototype.selectCurrentItem = function (e) {\n        if (this.isPopupOpen) {\n            var li = this.list.querySelector('.' + dropDownListClasses.focus);\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n            this.hidePopup(e);\n            this.focusDropDown(e);\n        }\n        else {\n            this.showPopup();\n        }\n    };\n    DropDownList.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    DropDownList.prototype.getPageCount = function () {\n        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    };\n    DropDownList.prototype.pageUpSelection = function (steps, event) {\n        var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.pageDownSelection = function (steps, event) {\n        var list = this.getItems();\n        var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n        EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n        this.unBindCommonEvent();\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    DropDownList.prototype.checkSelector = function (id) {\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    };\n    DropDownList.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\n            !this.inputWrapper.container.contains(e.target)) {\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n                this.isDocumentClick = true;\n                var isActive = this.isRequested;\n                this.isInteracted = false;\n                this.hidePopup(e);\n                if (!isActive) {\n                    this.onFocusOut();\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n                }\n            }\n        }\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\n            && !(this.getModuleName() === 'combobox' &&\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\n                document.activeElement === this.filterInput);\n            e.preventDefault();\n        }\n    };\n    DropDownList.prototype.activeStateChange = function () {\n        if (this.isDocumentClick) {\n            this.hidePopup();\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n    };\n    DropDownList.prototype.focusDropDown = function (e) {\n        if (!this.initial && this.isFilterLayout()) {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.dropDownClick = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n            return;\n        }\n        var target = e.target;\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n            e.preventDefault();\n        }\n        if (!this.readonly) {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                if (this.isFilterLayout()) {\n                    this.focusDropDown(e);\n                }\n            }\n            else {\n                this.focusIn(e);\n                this.floatLabelChange();\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n                this.isDropDownClick = true;\n                this.showPopup();\n            }\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            // eslint-disable-next-line max-len\n            var duration = (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\n            if (!this.isSecondClick) {\n                setTimeout(function () {\n                    proxy_1.cloneElements();\n                    proxy_1.isSecondClick = true;\n                }, duration);\n            }\n        }\n        else {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.cloneElements = function () {\n        if (this.list) {\n            var ulElement = this.list.querySelector('ul');\n            if (ulElement) {\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                this.actionCompleteData.ulElement = ulElement;\n            }\n        }\n    };\n    DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    DropDownList.prototype.activeItem = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n            this.removeSelection();\n            li.classList.add(dropDownBaseClasses.selected);\n            this.removeHover();\n            li.setAttribute('aria-selected', 'true');\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.setValue = function (e) {\n        var dataItem = this.getItemData();\n        if (dataItem.value === null) {\n            Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        else {\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n        }\n        else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n        }\n        var clearIcon = dropDownListClasses.clearIcon;\n        var isFilterElement = this.isFiltering() && this.filterInput && (this.getModuleName() === 'combobox');\n        var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n        if (this.isFiltering() && clearElement) {\n            clearElement.style.removeProperty('visibility');\n        }\n        if (this.previousValue === dataItem.value) {\n            this.isSelected = false;\n            return true;\n        }\n        else {\n            this.isSelected = !this.initial ? true : false;\n            this.isSelectCustom = false;\n            if (this.getModuleName() === 'dropdownlist') {\n                this.updateIconState();\n            }\n            return false;\n        }\n    };\n    DropDownList.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    DropDownList.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.setValue(e)) {\n            return;\n        }\n        attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n        if (this.isFilterLayout() && this.filterInput) {\n            attributes(this.filterInput, { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n        }\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(e);\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n            this.setScrollPosition(e);\n        }\n        if (Browser.info.name !== 'mozilla') {\n            attributes(this.inputElement, { 'aria-label': this.inputElement.value });\n            attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id });\n            this.targetElement().removeAttribute('aria-live');\n        }\n    };\n    DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n        var checkTemplate = false;\n        if (dropdownTemplate) {\n            try {\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownList.prototype.setValueTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['valueTemplate']);\n            if (this.valueTempElement) {\n                detach(this.valueTempElement);\n                this.inputElement.style.display = 'block';\n                this.valueTempElement = null;\n            }\n        }\n        if (!this.valueTempElement) {\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n            this.inputElement.style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.valueTempElement.innerHTML = '';\n        }\n        var valuecheck = this.dropdownCompiler(this.valueTemplate);\n        if (valuecheck) {\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.valueTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n        if (valueCompTemp && valueCompTemp.length > 0) {\n            for (var i = 0; i < valueCompTemp.length; i++) {\n                this.valueTempElement.appendChild(valueCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n    };\n    DropDownList.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    DropDownList.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onChangeEvent = function (eve) {\n        var dataItem = this.getItemData();\n        var index = this.isSelectCustom ? null : this.activeIndex;\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\n        this.detachChangeEvent(eve);\n    };\n    DropDownList.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    DropDownList.prototype.detachChangeEvent = function (eve) {\n        this.isSelected = false;\n        this.previousValue = this.value;\n        this.activeIndex = this.index;\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n        if (!this.initial) {\n            var items = this.detachChanges(this.itemData);\n            var preItems = void 0;\n            if (typeof this.previousItemData === 'string' ||\n                typeof this.previousItemData === 'boolean' ||\n                typeof this.previousItemData === 'number') {\n                preItems = Object.defineProperties({}, {\n                    value: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    },\n                    text: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    }\n                });\n            }\n            else {\n                preItems = this.previousItemData;\n            }\n            this.setHiddenValue();\n            var eventArgs = {\n                e: eve,\n                item: this.item,\n                itemData: items,\n                previousItem: this.previousSelectedLI,\n                previousItemData: preItems,\n                isInteracted: eve ? true : false,\n                value: this.value,\n                element: this.element,\n                event: eve\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n        }\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n            removeClass([this.inputWrapper.container], 'e-valid-input');\n        }\n    };\n    DropDownList.prototype.setHiddenValue = function () {\n        if (!isNullOrUndefined(this.value)) {\n            if (this.hiddenElement.querySelector('option')) {\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.textContent = this.text;\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n            else {\n                this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onFilterUp = function (e) {\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                case 38: //up arrow\n                case 40: //down arrow\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else {\n                        this.preventAutoFill = false;\n                    }\n                    this.preventAltUp = false;\n                    e.preventDefault();\n                    break;\n                case 46: //delete\n                case 8: //backspace\n                    this.typedString = this.filterInput.value;\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '') {\n                        if (this.list) {\n                            this.resetFocusElement();\n                        }\n                        this.activeIndex = null;\n                        if (this.getModuleName() !== 'dropdownlist') {\n                            this.preventAutoFill = true;\n                            this.searchLists(e);\n                            if (this.getModuleName() === 'autocomplete') {\n                                this.hidePopup();\n                            }\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                default:\n                    this.typedString = this.filterInput.value;\n                    this.preventAutoFill = false;\n                    this.searchLists(e);\n                    break;\n            }\n        }\n        else {\n            this.isValidKey = false;\n        }\n    };\n    DropDownList.prototype.onFilterDown = function (e) {\n        switch (e.keyCode) {\n            case 13: //enter\n                break;\n            case 40: //down arrow\n            case 38: //up arrow\n                this.queryString = this.filterInput.value;\n                e.preventDefault();\n                break;\n            case 9: //tab\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n                    e.preventDefault();\n                }\n                break;\n            default:\n                this.prevSelectPoints = this.getSelectionPoints();\n                this.queryString = this.filterInput.value;\n                break;\n        }\n    };\n    DropDownList.prototype.removeFillSelection = function () {\n        if (this.isInteracted) {\n            var selection = this.getSelectionPoints();\n            this.inputElement.setSelectionRange(selection.end, selection.end);\n        }\n    };\n    DropDownList.prototype.getQuery = function (query) {\n        var filterQuery;\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n            var filterType = this.typedString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        }\n        return filterQuery;\n    };\n    DropDownList.prototype.getSelectionPoints = function () {\n        var input = this.inputElement;\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\n    };\n    DropDownList.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isTyped = true;\n        this.activeIndex = null;\n        this.isListSearched = true;\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n        this.isDataFetched = false;\n        if (this.isFiltering()) {\n            var eventArgs_1 = {\n                preventDefaultAction: false,\n                text: this.filterInput.value,\n                updateData: function (dataSource, query, fields) {\n                    if (eventArgs_1.cancel) {\n                        return;\n                    }\n                    _this.isCustomFilter = true;\n                    _this.filteringAction(dataSource, query, fields);\n                },\n                baseEventArgs: e,\n                cancel: false\n            };\n            this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n                    _this.filteringAction(_this.dataSource, null, _this.fields);\n                }\n            });\n        }\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n\n     */\n    DropDownList.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFilter = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n        if (!isNullOrUndefined(this.filterInput)) {\n            this.beforePopupOpen = (!this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '') ?\n                false : true;\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n                this.actionCompleteData.isUpdated = false;\n                this.isTyped = false;\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n                }\n                this.isTyped = true;\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n                    this.focusIndexItem();\n                    this.setScrollPosition();\n                }\n                this.isNotSearchList = true;\n            }\n            else {\n                this.isNotSearchList = false;\n                query = (this.filterInput.value.trim() === '') ? null : query;\n                this.resetList(dataSource, fields, query);\n            }\n            this.renderReactTemplates();\n        }\n    };\n    DropDownList.prototype.setSearchBox = function (popupElement) {\n        if (this.isFiltering()) {\n            var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n                className: dropDownListClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: dropDownListClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ?\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            if (!isNullOrUndefined(this.cssClass)) {\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], parentElement);\n            prepend([parentElement], popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            if (!Browser.isDevice) {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.keyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            else {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.mobileKeyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n            return this.filterInputObj;\n        }\n        else {\n            return inputObject;\n        }\n    };\n    DropDownList.prototype.onInput = function (e) {\n        this.isValidKey = true;\n        // For filtering works in mobile firefox.\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = true;\n            this.searchLists(e);\n        }\n    };\n    DropDownList.prototype.pasteHandler = function (e) {\n        var _this = this;\n        setTimeout(function () {\n            _this.typedString = _this.filterInput.value;\n            _this.searchLists(e);\n        });\n    };\n    DropDownList.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        if (this.beforePopupOpen) {\n            this.renderPopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        if (this.isNotSearchList) {\n            this.isNotSearchList = false;\n            return;\n        }\n        if (this.isActive) {\n            var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n            _super.prototype.onActionComplete.call(this, ulElement, list, e);\n            this.updateSelectElementData(this.allowFiltering);\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n                this.isRequested = false;\n                this.keyActionHandler(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n                this.incrementalSearch(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            this.list.scrollTop = 0;\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            if (this.initRemoteRender) {\n                this.initial = true;\n                this.activeIndex = this.index;\n                this.initRemoteRender = false;\n                if (this.value && this.dataSource instanceof DataManager) {\n                    var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n                    var checkVal = list.some(function (x) { return x[checkField_1] === _this.value; });\n                    if (!checkVal) {\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value)))\n                            .then(function (e) {\n                            if (e.result.length > 0) {\n                                _this.addItem(e.result, list.length);\n                                _this.updateValues();\n                            }\n                            else {\n                                _this.updateValues();\n                            }\n                        });\n                    }\n                    else {\n                        this.updateValues();\n                    }\n                }\n                else {\n                    this.updateValues();\n                }\n                this.initial = false;\n            }\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\n                    && ((this.dataSource instanceof DataManager)\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\n                            this.dataSource.length !== 0)))) {\n                    if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                        setTimeout(function () {\n                            _this.updateActionCompleteDataValues(ulElement, list);\n                        }, 0);\n                    }\n                    else {\n                        this.updateActionCompleteDataValues(ulElement, list);\n                    }\n                }\n                this.addNewItem(list, selectedItem);\n                if (!isNullOrUndefined(this.itemData)) {\n                    this.focusIndexItem();\n                }\n            }\n            if (this.beforePopupOpen) {\n                this.renderPopup();\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\n        if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.addNewItem = function (listData, newElement) {\n        var _this = this;\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n            var value_1 = this.getItemData().value;\n            var isExist = listData.some(function (data) {\n                return (((typeof data === 'string' || typeof data === 'number') && data === value_1) ||\n                    (getValue(_this.fields.value, data) === value_1));\n            });\n            if (!isExist) {\n                this.addItem(this.itemData);\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n        var _this = this;\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                setTimeout(function () {\n                    _this.actionCompleteDataUpdate(li, item, index);\n                }, 0);\n            }\n            else {\n                this.actionCompleteDataUpdate(li, item, index);\n            }\n        }\n    };\n    DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n        if (index != null) {\n            this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n        }\n        else {\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n        }\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n            this.actionCompleteData.list.push(item);\n        }\n    };\n    DropDownList.prototype.focusIndexItem = function () {\n        var value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n        this.activeItem(element);\n        this.removeFocus();\n    };\n    DropDownList.prototype.updateSelection = function () {\n        var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        if (selectedItem) {\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\n            this.activeIndex = this.index;\n        }\n        else {\n            this.removeFocus();\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.removeFocus = function () {\n        var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n        if (highlightedItem && highlightedItem.length) {\n            removeClass(highlightedItem, dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.renderPopup = function () {\n        var _this = this;\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\n            this.refreshPopup();\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle = _this.createElement('div', {\n                    id: _this.element.id + '_popup', className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                });\n                var searchBox = _this.setSearchBox(popupEle);\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate(popupEle);\n                }\n                append([_this.list], popupEle);\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate(popupEle);\n                }\n                document.body.appendChild(popupEle);\n                popupEle.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.searchBoxHeight = 0;\n                    if (!isNullOrUndefined(searchBox.container)) {\n                        _this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (_this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.headerTemplate) {\n                        _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n                        var height = Math.round(_this.header.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.footerTemplate) {\n                        _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n                        var height = Math.round(_this.footer.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = void 0;\n                if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {\n                    _this.setScrollPosition();\n                }\n                else {\n                    _this.list.scrollTop = 0;\n                }\n                if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' ||\n                    (_this.isDropDownClick && _this.getModuleName() === 'combobox')))) {\n                    offsetValue = _this.getOffsetValue(popupEle);\n                    var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n                    left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                        parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) +\n                        parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n                }\n                _this.getFocusElement();\n                _this.createPopup(popupEle, offsetValue, left);\n                _this.checkCollision(popupEle);\n                if (Browser.isDevice) {\n                    _this.popupObj.element.classList.add(dropDownListClasses.device);\n                    if (_this.getModuleName() === 'dropdownlist' || (_this.getModuleName() === 'combobox'\n                        && !_this.allowFiltering && _this.isDropDownClick)) {\n                        _this.popupObj.collision = { X: 'fit', Y: 'fit' };\n                    }\n                    if (_this.isFilterLayout()) {\n                        _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n                        _this.popupObj.position = { X: 0, Y: 0 };\n                        _this.popupObj.dataBind();\n                        attributes(_this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n                        addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n                        _this.setSearchBoxPosition();\n                        _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n                        _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n                        EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n                        EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n                    }\n                }\n                popupEle.style.visibility = 'visible';\n                addClass([popupEle], 'e-popup-close');\n                var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n                for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n                    var element = scrollParentElements_1[_i];\n                    EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n                }\n                if (Browser.isDevice && _this.isFilterLayout()) {\n                    EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\n                }\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                attributes(_this.targetElement(), { 'aria-expanded': 'true' });\n                var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('open', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n                        _this.renderReactTemplates();\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.element : null);\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    DropDownList.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.getOffsetValue = function (popupEle) {\n        var popupStyles = getComputedStyle(popupEle);\n        var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n        var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n        return this.setPopupPosition(borderTop + borderBottom);\n    };\n    DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputWrapper.container, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' },\n            zIndex: this.zIndex,\n            close: function () {\n                if (!_this.isDocumentClick) {\n                    _this.focusDropDown();\n                }\n                // eslint-disable-next-line\n                if (_this.isReact) {\n                    _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n                }\n                var isResetItem = (_this.getModuleName() === 'autocomplete') ? true : false;\n                _this.isNotSearchList = false;\n                _this.isDocumentClick = false;\n                _this.destroyPopup();\n                if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n                    _this.isActive = true;\n                    _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n                }\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement &&\n                    _this.actionCompleteData.ulElement.querySelector('li');\n                var ulElement = _this.list.querySelector('ul li');\n                if (_this.isFiltering() && _this.itemTemplate && (_this.element.tagName === _this.getNgDirective()) &&\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\n                    _this.element.tagName !== 'EJS-COMBOBOX') {\n                    _this.cloneElements();\n                }\n                if (_this.isFilterLayout()) {\n                    removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n                    _this.isFilterFocus = true;\n                    _this.filterInput.focus();\n                    if (_this.inputWrapper.clearButton) {\n                        addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n                    }\n                }\n                _this.activeStateChange();\n            },\n            targetExitViewport: function () {\n                if (!Browser.isDevice) {\n                    _this.hidePopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.isEmptyList = function () {\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    };\n    DropDownList.prototype.getFocusElement = function () {\n        // combo-box used this method\n    };\n    DropDownList.prototype.isFilterLayout = function () {\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    };\n    DropDownList.prototype.scrollHandler = function () {\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\n            this.hidePopup();\n        }\n    };\n    DropDownList.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        this.popupObj.element.style.maxHeight = '100%';\n        this.popupObj.element.style.width = '100%';\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    DropDownList.prototype.setPopupPosition = function (border) {\n        var offsetValue;\n        var popupOffset = border;\n        var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n        var liHeight = firstItem.getBoundingClientRect().height;\n        var listHeight = this.list.offsetHeight / 2;\n        var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n        var lastItemOffsetValue = lastItem.offsetTop;\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n            var count = this.list.offsetHeight / liHeight;\n            var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n            this.list.scrollTop = selectedLI.offsetTop;\n        }\n        else if (height > listHeight) {\n            offsetValue = listHeight - liHeight / 2;\n            this.list.scrollTop = height - listHeight + liHeight / 2;\n        }\n        else {\n            offsetValue = height;\n        }\n        var inputHeight = this.inputWrapper.container.offsetHeight;\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\n        return -offsetValue;\n    };\n    DropDownList.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n            var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\n        }\n        return width;\n    };\n    DropDownList.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    DropDownList.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                    this.fixedHeaderElement.offsetHeight : 0);\n            }\n        }\n    };\n    DropDownList.prototype.isEditTextBox = function () {\n        return false;\n    };\n    DropDownList.prototype.isFiltering = function () {\n        return this.allowFiltering;\n    };\n    DropDownList.prototype.isPopupButton = function () {\n        return true;\n    };\n    DropDownList.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    DropDownList.prototype.clearText = function () {\n        this.filterInput.value = this.typedString = '';\n        this.searchLists(null);\n    };\n    DropDownList.prototype.listScroll = function () {\n        this.filterInput.blur();\n    };\n    DropDownList.prototype.setEleWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.inputWrapper.container.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    DropDownList.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        this.isTyped = false;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.isActive = false;\n        this.filterInputObj = null;\n        this.isDropDownClick = false;\n        this.preventAutoFill = false;\n        var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n        for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n            var element = scrollableParentElements_1[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (Browser.isDevice && this.isFilterLayout()) {\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n            EventHandler.remove(this.list, 'scroll', this.listScroll);\n        }\n        if (this.isFilterLayout()) {\n            if (!Browser.isDevice) {\n                this.searchKeyModule.destroy();\n                if (this.clearIconElement) {\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n                }\n            }\n            if (this.backIconElement) {\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n            }\n            EventHandler.remove(this.filterInput, 'input', this.onInput);\n            EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n            EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n            EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n            this.filterInput = null;\n        }\n        attributes(this.targetElement(), { 'aria-expanded': 'false' });\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n        if (this.isFiltering()) {\n            this.actionCompleteData.isUpdated = false;\n        }\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('close', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.popupObj) &&\n                !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n                var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n                fixedHeader.parentNode.removeChild(fixedHeader);\n                _this.fixedHeaderElement = null;\n            }\n            if (!eventArgs.cancel) {\n                if (_this.getModuleName() === 'autocomplete') {\n                    _this.rippleFun();\n                }\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.isFilterFocus = false;\n        this.popupObj.destroy();\n        detach(this.popupObj.element);\n    };\n    DropDownList.prototype.clickOnBackIcon = function () {\n        this.hidePopup();\n        this.focusIn();\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.render = function () {\n        if (this.element.tagName === 'INPUT') {\n            this.inputElement = this.element;\n            if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n                this.inputElement.setAttribute('role', 'textbox');\n            }\n            if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n                this.inputElement.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputElement = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            if (this.element.tagName !== this.getNgDirective()) {\n                this.element.style.display = 'none';\n            }\n            this.element.parentElement.insertBefore(this.inputElement, this.element);\n            this.preventTabIndex(this.inputElement);\n        }\n        var updatedCssClassValues = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.inputWrapper = Input.createInput({\n            element: this.inputElement,\n            buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n            floatLabelType: this.floatLabelType,\n            properties: {\n                readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n                placeholder: this.placeholder,\n                cssClass: updatedCssClassValues,\n                enabled: this.enabled,\n                enableRtl: this.enableRtl,\n                showClearButton: this.showClearButton\n            }\n        }, this.createElement);\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.inputWrapper.container);\n        }\n        else {\n            this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n        }\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\n        });\n        prepend([this.hiddenElement], this.inputWrapper.container);\n        this.validationAttribute(this.element, this.hiddenElement);\n        this.setReadOnly();\n        this.setFields();\n        this.inputWrapper.container.style.width = formatUnit(this.width);\n        this.inputWrapper.container.classList.add('e-ddl');\n        this.wireEvent();\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        this.element.removeAttribute('tabindex');\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement.id = id + '_hidden';\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n        attributes(this.targetElement(), this.getAriaAttributes());\n        this.updateDataAttribute(this.htmlAttributes);\n        this.setHTMLAttributes();\n        if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n            this.initValue();\n        }\n        else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n            var selectElement = this.element;\n            this.value = selectElement.options[selectElement.selectedIndex].value;\n            this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n            this.initValue();\n        }\n        this.preventTabIndex(this.element);\n        if (!this.enabled) {\n            this.targetElement().tabIndex = -1;\n        }\n        this.initial = false;\n        this.element.style.opacity = '';\n        this.inputElement.onselect = function (e) {\n            e.stopImmediatePropagation();\n        };\n        this.inputElement.onchange = function (e) {\n            e.stopImmediatePropagation();\n        };\n        if (this.element.hasAttribute('autofocus')) {\n            this.focusIn();\n        }\n        if (!isNullOrUndefined(this.text)) {\n            this.inputElement.setAttribute('value', this.text);\n        }\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        this.renderComplete();\n    };\n    DropDownList.prototype.setFooterTemplate = function (popupEle) {\n        var compiledString;\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], dropDownListClasses.footer);\n        }\n        var footercheck = this.dropdownCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (footerCompTemp && footerCompTemp.length > 0) {\n            for (var i = 0; i < footerCompTemp.length; i++) {\n                this.footer.appendChild(footerCompTemp[i]);\n            }\n        }\n        append([this.footer], popupEle);\n    };\n    DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n        var compiledString;\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], dropDownListClasses.header);\n        }\n        var headercheck = this.dropdownCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (headerCompTemp && headerCompTemp.length) {\n            for (var i = 0; i < headerCompTemp.length; i++) {\n                this.header.appendChild(headerCompTemp[i]);\n            }\n        }\n        var contentEle = popupEle.querySelector('div.e-content');\n        popupEle.insertBefore(this.header, contentEle);\n    };\n    DropDownList.prototype.setOldText = function (text) {\n        this.text = text;\n    };\n    DropDownList.prototype.setOldValue = function (value) {\n        this.value = value;\n    };\n    DropDownList.prototype.refreshPopup = function () {\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\n            removeClass([this.popupObj.element], 'e-popup-close');\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.checkData = function (newProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\n            this.list = null;\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n        }\n        this.isListSearched = false;\n        var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n        var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n            this.itemData = null;\n        }\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n            this.actionData = this.actionCompleteData;\n        }\n        else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.actionCompleteData = this.getModuleName() === 'combobox' ?\n                { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.updateDataSource = function (props) {\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\n            this.clearAll(null, props);\n        }\n        if ((this.fields.groupBy && props.fields) && !this.isGroupChecking && this.list) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(props.dataSource === [])) {\n            this.typedString = '';\n            this.resetList(this.dataSource);\n        }\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n            this.checkCustomValue();\n        }\n    };\n    DropDownList.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n    };\n    DropDownList.prototype.updateInputFields = function () {\n        if (this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n    DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (this.getModuleName() === 'dropdownlist') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource': break;\n                case 'htmlAttributes':\n                    this_1.setHTMLAttributes();\n                    break;\n                case 'width':\n                    this_1.setEleWidth(newProp.width);\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this_1.filterInput) {\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n                    }\n                    break;\n                case 'readonly':\n                    if (this_1.getModuleName() !== 'dropdownlist') {\n                        Input.setReadonly(newProp.readonly, this_1.inputElement);\n                    }\n                    this_1.setReadOnly();\n                    break;\n                case 'cssClass':\n                    this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this_1.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this_1.setEnable();\n                    break;\n                case 'text':\n                    if (newProp.text === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var li = this_1.getElementByText(newProp.text);\n                        if (!this_1.checkValidLi(li)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n                            }\n                            else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                                var listLength_1 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_1);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldText(oldProp.text);\n                                    }\n                                });\n                            }\n                            else {\n                                this_1.setOldText(oldProp.text);\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'value':\n                    if (newProp.value === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    this_1.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var item = this_1.getElementByValue(newProp.value);\n                        if (!this_1.checkValidLi(item)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n                            }\n                            else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                                var listLength_2 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_2);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldValue(oldProp.value);\n                                    }\n                                });\n                            }\n                            else {\n                                this_1.setOldValue(oldProp.value);\n                            }\n                        }\n                        this_1.updateInputFields();\n                        this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n                    }\n                    break;\n                case 'index':\n                    if (newProp.index === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender && this_1.liCollections) {\n                        var element = this_1.liCollections[newProp.index];\n                        if (!this_1.checkValidLi(element)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n                            }\n                            else {\n                                this_1.index = oldProp.index;\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setFooterTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'headerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setHeaderTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'valueTemplate':\n                    if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate != null) {\n                        this_1.setValueTemplate();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this_1.allowFiltering) {\n                        this_1.actionCompleteData = { ulElement: this_1.ulElement,\n                            list: this_1.listData, isUpdated: true };\n                        this_1.actionData = this_1.actionCompleteData;\n                        this_1.updateSelectElementData(this_1.allowFiltering);\n                    }\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this_1.inputWrapper);\n                    Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n                    break;\n                case 'showClearButton':\n                    Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n                    this_1.bindClearEvent();\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n                    }\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    DropDownList.prototype.checkValidLi = function (element) {\n        if (this.isValidLI(element)) {\n            this.setSelection(element, null);\n            return true;\n        }\n        return false;\n    };\n    DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n        var _this = this;\n        var li;\n        this.updateListValues = function () {\n            if (prop === 'text') {\n                li = _this.getElementByText(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldText(oldProp);\n                }\n            }\n            else if (prop === 'value') {\n                li = _this.getElementByValue(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldValue(oldProp);\n                }\n            }\n            else if (prop === 'index') {\n                li = _this.liCollections[newProp];\n                if (!_this.checkValidLi(li)) {\n                    _this.index = oldProp;\n                }\n            }\n        };\n    };\n    DropDownList.prototype.setReadOnly = function () {\n        if (this.readonly) {\n            addClass([this.inputWrapper.container], ['e-readonly']);\n        }\n        else {\n            removeClass([this.inputWrapper.container], ['e-readonly']);\n        }\n    };\n    DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n        if (this.popupObj) {\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownList.prototype.getModuleName = function () {\n        return 'dropdownlist';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showPopup = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isFiltering() && this.dataSource instanceof DataManager && (this.actionData.list != this.actionCompleteData.list) &&\n            this.actionData.list && this.actionData.ulElement) {\n            this.actionCompleteData = this.actionData;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n            this.isActive = true;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n            this.renderList();\n        }\n        this.invokeRenderPopup();\n    };\n    DropDownList.prototype.invokeRenderPopup = function () {\n        if (Browser.isDevice && this.isFilterLayout()) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_2 = this;\n            window.onpopstate = function () {\n                proxy_2.hidePopup();\n            };\n            history.pushState({}, '');\n        }\n        if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n            this.renderPopup();\n        }\n        attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\n    };\n    DropDownList.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.isEscapeKey = false;\n            if (!isNullOrUndefined(this.index)) {\n                var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n                this.selectedLI = this.liCollections[this.index] || element;\n                if (this.selectedLI) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                    if (this.valueTemplate && this.itemData !== null) {\n                        this.setValueTemplate();\n                    }\n                }\n            }\n            else {\n                this.resetSelection();\n            }\n        }\n        this.closePopup(0, e);\n        var dataItem = this.getItemData();\n        var isSelectVal = !isNullOrUndefined(this.selectedLI);\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\n            this.isSelectCustom = false;\n            this.clearAll(e);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusIn = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n            return;\n        }\n        var isFocused = false;\n        if (this.preventFocus && Browser.isDevice) {\n            this.inputWrapper.container.tabIndex = 1;\n            this.inputWrapper.container.focus();\n            this.preventFocus = false;\n            isFocused = true;\n        }\n        if (!isFocused) {\n            this.targetElement().focus();\n        }\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        this.onFocus(e);\n    };\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        this.isTyped = true;\n        this.hidePopup(e);\n        if (this.targetElement()) {\n            this.targetElement().blur();\n        }\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownList.prototype.destroy = function () {\n        this.isActive = false;\n        resetIncrementalSearchValues(this.element.id);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        if (this.inputElement) {\n            var attrArray = ['readonly', 'aria-disabled', 'aria-placeholder',\n                'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded',\n                'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect',\n                'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n            for (var i = 0; i < attrArray.length; i++) {\n                this.inputElement.removeAttribute(attrArray[i]);\n            }\n            this.inputElement.setAttribute('tabindex', this.tabIndex);\n            this.inputElement.classList.remove('e-input');\n            Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        this.element.style.display = 'block';\n        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n            detach(this.inputWrapper.container);\n        }\n        else {\n            this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n            detach(this.inputWrapper.container);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownList.prototype.getItems = function () {\n        if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n            }\n            this.renderList();\n        }\n        return this.ulElement ? _super.prototype.getItems.call(this) : [];\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownList.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.clear = function () {\n        this.value = null;\n    };\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('100%')\n    ], DropDownList.prototype, \"width\", void 0);\n    __decorate([\n        Property('300px')\n    ], DropDownList.prototype, \"popupHeight\", void 0);\n    __decorate([\n        Property('100%')\n    ], DropDownList.prototype, \"popupWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate([\n        Property({})\n    ], DropDownList.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"query\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"valueTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownList.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownList.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"text\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"value\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownList.prototype, \"index\", void 0);\n    __decorate([\n        Property('Never')\n    ], DropDownList.prototype, \"floatLabelType\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownList.prototype, \"showClearButton\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"filtering\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"close\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"blur\", void 0);\n    __decorate([\n        Event()\n    ], DropDownList.prototype, \"focus\", void 0);\n    DropDownList = __decorate([\n        NotifyPropertyChanges\n    ], DropDownList);\n    return DropDownList;\n}(DropDownBase));\nexport { DropDownList };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}