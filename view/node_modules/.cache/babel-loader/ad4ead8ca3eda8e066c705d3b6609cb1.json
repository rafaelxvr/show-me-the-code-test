{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, EventHandler, addClass, append, Property, Event, L10n, compile } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend, removeClass, prepend, isNullOrUndefined, detach, getValue } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, rippleEffect, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { DataManager, Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { select, selectAll } from '@syncfusion/ej2-base';\n\nvar FieldSettings =\n/** @class */\nfunction (_super) {\n  __extends(FieldSettings, _super);\n\n  function FieldSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property()], FieldSettings.prototype, \"text\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"value\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"iconCss\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"groupBy\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"htmlAttributes\", void 0);\n\n  return FieldSettings;\n}(ChildProperty);\n\nexport { FieldSettings };\nexport var dropDownBaseClasses = {\n  root: 'e-dropdownbase',\n  rtl: 'e-rtl',\n  content: 'e-content',\n  selected: 'e-active',\n  hover: 'e-hover',\n  noData: 'e-nodata',\n  fixedHead: 'e-fixed-head',\n  focus: 'e-item-focus',\n  li: 'e-list-item',\n  group: 'e-list-group-item',\n  disabled: 'e-disabled',\n  grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\n\nvar DropDownBase =\n/** @class */\nfunction (_super) {\n  __extends(DropDownBase, _super);\n  /**\n   * * Constructor for DropDownBase class\n   *\n   * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.isPreventChange = false;\n    _this.isDynamicDataChange = false;\n    return _this;\n  }\n\n  DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n    var newProperty = new Object();\n    var oldProperty = new Object();\n\n    var propName = function (prop) {\n      return prop;\n    };\n\n    newProperty[propName(prop)] = newProp[propName(prop)];\n    oldProperty[propName(prop)] = oldProp[propName(prop)];\n    var data = new Object();\n    data.newProperty = newProperty;\n    data.oldProperty = oldProperty;\n    return data;\n  };\n\n  DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n    var value = null;\n\n    if (!isNullOrUndefined(this.listData)) {\n      if (ignoreCase) {\n        value = this.checkValueCase(text, true, ignoreAccent);\n      } else {\n        value = this.checkValueCase(text, false, ignoreAccent);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n    var _this = this;\n\n    var value = null;\n\n    if (isTextByValue) {\n      value = text;\n    }\n\n    var dataSource = this.listData;\n    var fields = this.fields;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var item = dataSource_1[_i];\n\n        if (!isNullOrUndefined(item)) {\n          if (ignoreAccent) {\n            value = this.checkingAccent(String(item), text, ignoreCase);\n          } else {\n            if (ignoreCase) {\n              if (this.checkIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n              }\n            } else {\n              if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n              }\n            }\n          }\n        }\n      }\n    } else {\n      if (ignoreCase) {\n        dataSource.filter(function (item) {\n          var itemValue = getValue(fields.value, item);\n\n          if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n            value = getValue(fields.value, item);\n          }\n        });\n      } else {\n        if (isTextByValue) {\n          var compareValue_1 = null;\n          compareValue_1 = value;\n          dataSource.filter(function (item) {\n            var itemValue = getValue(fields.value, item);\n\n            if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n              value = getValue(fields.text, item);\n            }\n          });\n        } else {\n          dataSource.filter(function (item) {\n            if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n              value = getValue(fields.value, item);\n            }\n          });\n        }\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n    var dataItem = DataUtil.ignoreDiacritics(String(item));\n    var textItem = DataUtil.ignoreDiacritics(text.toString());\n    var value = null;\n\n    if (ignoreCase) {\n      if (this.checkIgnoreCase(dataItem, textItem)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    } else {\n      if (this.checkNonIgnoreCase(String(item), text)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n    return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n  };\n\n  DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n    return String(item) === text.toString() ? true : false;\n  };\n\n  DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n    var value = null;\n    var dataSource = this.listData;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (isTextByValue) {\n      value = dataItem.toString();\n    } else {\n      if (ignoreCase) {\n        value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n      } else {\n        value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n    var checkTemplate = false;\n\n    if (baseTemplate) {\n      try {\n        checkTemplate = selectAll(baseTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n    var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n\n    if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var compiledString = void 0;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      ele.innerHTML = '';\n      var tempaltecheck = this.templateCompiler(template);\n\n      if (tempaltecheck) {\n        compiledString = compile(select(template, document).innerHTML.trim());\n      } else {\n        compiledString = compile(template);\n      }\n\n      var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n\n      if (noDataCompTemp && noDataCompTemp.length > 0) {\n        for (var i = 0; i < noDataCompTemp.length; i++) {\n          ele.appendChild(noDataCompTemp[i]);\n        }\n      }\n\n      this.renderReactTemplates();\n    } else {\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed'\n      };\n      var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n\n      if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n        this.l10n = componentLocale;\n      } else {\n        this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n      }\n\n      var content = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n\n      if (this.getModuleName() === 'listbox') {\n        var liElem = this.createElement('li');\n        liElem.textContent = content;\n        ele.appendChild(liElem);\n        liElem.classList.add('e-list-nrt');\n      } else {\n        ele.innerHTML = content;\n      }\n    }\n  };\n\n  DropDownBase.prototype.getLocaleName = function () {\n    return 'drop-down-base';\n  };\n\n  DropDownBase.prototype.getTextByValue = function (value) {\n    var text = this.checkValueCase(value, false, false, true);\n    return text;\n  };\n\n  DropDownBase.prototype.getFormattedValue = function (value) {\n    if (this.listData && this.listData.length) {\n      var item = this.typeOfData(this.listData);\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'number' || item.typeof === 'number') {\n        return parseFloat(value);\n      }\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'boolean' || item.typeof === 'boolean') {\n        return value === 'true' || '' + value === 'true';\n      }\n    }\n\n    return value;\n  };\n  /**\n   * Sets RTL to dropdownbase wrapper\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setEnableRtl = function () {\n    if (this.list) {\n      this.enableRtlElements.push(this.list);\n    }\n\n    if (this.enableRtl) {\n      addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n    } else {\n      removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n    }\n  };\n  /**\n   * Initialize the Component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.initialize = function () {\n    this.bindEvent = true;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n\n    if (this.element.tagName === 'UL') {\n      var jsonElement = ListBase.createJsonFromElement(this.element);\n      this.setProperties({\n        fields: {\n          text: 'text',\n          value: 'text'\n        }\n      }, true);\n      this.resetList(jsonElement, this.fields);\n    } else if (this.element.tagName === 'SELECT') {\n      var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;\n\n      if (!dataSource) {\n        this.renderItemsBySelect();\n      } else if (this.isDynamicDataChange) {\n        this.setListData(this.dataSource, this.fields, this.query);\n      }\n    } else {\n      this.setListData(this.dataSource, this.fields, this.query);\n    }\n  };\n  /**\n   * Get the properties to be maintained in persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownBase.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @param {string} value - Specifies the attribute values to add on the input element.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.updateDataAttribute = function (value) {\n    var invalidAttr = ['class', 'style', 'id', 'type'];\n    var attr = {};\n\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n\n  DropDownBase.prototype.renderItemsBySelect = function () {\n    var element = this.element;\n    var fields = {\n      value: 'value',\n      text: 'text'\n    };\n    var jsonElement = [];\n    var group = element.querySelectorAll('select>optgroup');\n    var option = element.querySelectorAll('select>option');\n    this.getJSONfromOption(jsonElement, option, fields);\n\n    if (group.length) {\n      for (var i = 0; i < group.length; i++) {\n        var item = group[i];\n        var optionGroup = {};\n        optionGroup[fields.text] = item.label;\n        optionGroup.isHeader = true;\n        var child = item.querySelectorAll('option');\n        jsonElement.push(optionGroup);\n        this.getJSONfromOption(jsonElement, child, fields);\n      }\n\n      element.querySelectorAll('select>option');\n    }\n\n    this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n    this.resetList(jsonElement, fields);\n  };\n\n  DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n    var field = {\n      'fields': {\n        text: text,\n        value: value,\n        groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n        htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n        iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n      }\n    };\n    this.setProperties(field, true);\n  };\n\n  DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n      var option = options_1[_i];\n      var json = {};\n      json[fields.text] = option.innerText;\n      json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;\n      items.push(json);\n    }\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.preRender = function () {\n    // there is no event handler\n    this.scrollTimer = -1;\n    this.enableRtlElements = [];\n    this.isRequested = false;\n    this.isDataFetched = false;\n    this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n    this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n    this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n  };\n  /**\n   * Creates the list items of DropDownBase component.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setListData = function (dataSource, fields, query) {\n    var _this = this;\n\n    fields = fields ? fields : this.fields;\n    var ulElement;\n    this.isActive = true;\n    var eventArgs = {\n      cancel: false,\n      data: dataSource,\n      query: query\n    };\n    this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n    this.trigger('actionBegin', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.showSpinner();\n\n        if (dataSource instanceof DataManager) {\n          _this.isRequested = true;\n\n          if (_this.isDataFetched) {\n            _this.emptyDataRequest(fields);\n\n            return;\n          }\n\n          eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n            _this.trigger('actionComplete', e, function (e) {\n              if (!e.cancel) {\n                var listItems = e.result;\n\n                if (listItems.length === 0) {\n                  _this.isDataFetched = true;\n                }\n\n                ulElement = _this.renderItems(listItems, fields);\n\n                if (_this.groupTemplate) {\n                  _this.renderGroupTemplate(ulElement);\n                }\n\n                _this.onActionComplete(ulElement, listItems, e);\n\n                _this.isRequested = false;\n\n                _this.bindChildItems(listItems, ulElement, fields, e);\n              }\n            });\n          }).catch(function (e) {\n            _this.isRequested = false;\n\n            _this.onActionFailure(e);\n\n            _this.hideSpinner();\n          });\n        } else {\n          var dataManager = new DataManager(eventArgs.data);\n\n          var listItems = _this.getQuery(eventArgs.query).executeLocal(dataManager);\n\n          var localDataArgs = {\n            cancel: false,\n            result: listItems\n          };\n          _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n          _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n            if (!localDataArgs.cancel) {\n              ulElement = _this.renderItems(localDataArgs.result, fields);\n\n              _this.onActionComplete(ulElement, localDataArgs.result);\n\n              if (_this.groupTemplate) {\n                _this.renderGroupTemplate(ulElement);\n              }\n\n              _this.bindChildItems(localDataArgs.result, ulElement, fields);\n\n              setTimeout(function () {\n                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)) {\n                  _this.updateDataList();\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n  };\n\n  DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n    var _this = this;\n\n    if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n      setTimeout(function () {\n        var childNode = _this.remainingItems(_this.sortedData, fields);\n\n        append(childNode, ulElement);\n        _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n        _this.updateListValues();\n\n        _this.raiseDataBound(listItems, e);\n      }, 0);\n    } else {\n      this.raiseDataBound(listItems, e);\n    }\n  };\n\n  DropDownBase.prototype.updateListValues = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n    var liElement = null;\n\n    if (list) {\n      var listArr = [].slice.call(list.querySelectorAll(findNode));\n\n      for (var index = 0; index < listArr.length; index++) {\n        if (listArr[index].getAttribute(attribute) === value + '') {\n          liElement = listArr[index];\n          break;\n        }\n      }\n    }\n\n    return liElement;\n  };\n\n  DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n    this.hideSpinner();\n    var dataBoundEventArgs = {\n      items: listItems,\n      e: e\n    };\n    this.trigger('dataBound', dataBoundEventArgs);\n  };\n\n  DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n    var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n\n    if (this.itemTemplate) {\n      var listElements = this.templateListItem(spliceData, fields);\n      return [].slice.call(listElements.childNodes);\n    }\n\n    var type = this.typeOfData(spliceData).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n    }\n\n    return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n  };\n\n  DropDownBase.prototype.emptyDataRequest = function (fields) {\n    var listItems = [];\n    this.onActionComplete(this.renderItems(listItems, fields), listItems);\n    this.isRequested = false;\n    this.hideSpinner();\n  };\n\n  DropDownBase.prototype.showSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.hideSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.onActionFailure = function (e) {\n    this.liCollections = [];\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    addClass([this.list], dropDownBaseClasses.noData);\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    this.listData = list; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n    }\n\n    this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n\n    if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n      for (var i = 0; i < ulElement.childElementCount; i++) {\n        if (ulElement.children[i].classList.contains('e-list-group-item')) {\n          if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n            addClass([ulElement.children[i]], HIDE_GROUPLIST);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(this.list)) {\n      this.list.innerHTML = '';\n      this.list.appendChild(ulElement);\n      this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n      this.ulElement = this.list.querySelector('ul');\n      this.postRender(this.list, list, this.bindEvent);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n    var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (focusItem && !selectedItem) {\n      focusItem.classList.add(dropDownBaseClasses.focus);\n    }\n\n    if (list.length <= 0) {\n      this.l10nUpdate();\n      addClass([listElement], dropDownBaseClasses.noData);\n    } else {\n      listElement.classList.remove(dropDownBaseClasses.noData);\n    }\n  };\n  /**\n   * Get the query to do the data operation before list item generation.\n   *\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {Query} Returns the query to do the data query operation.\n   */\n\n\n  DropDownBase.prototype.getQuery = function (query) {\n    return query ? query : this.query ? this.query : new Query();\n  };\n  /**\n   * To render the template content for group header element.\n   *\n   * @param {HTMLElement} listEle - Specifies the group list elements.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n    if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n      var dataSource = this.dataSource;\n      var option = {\n        groupTemplateID: this.groupTemplateId,\n        isStringTemplate: this.isStringTemplate\n      };\n      var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n      var groupcheck = this.templateCompiler(this.groupTemplate);\n\n      if (groupcheck) {\n        var groupValue = select(this.groupTemplate, document).innerHTML.trim(); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n        var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * To create the ul li list items\n   *\n   * @param {object []} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the ul li list items.\n   */\n\n\n  DropDownBase.prototype.createListItems = function (dataSource, fields) {\n    if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n      if (fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      }\n\n      addClass([this.list], dropDownBaseClasses.grouping);\n    } else {\n      dataSource = this.getSortedDataSource(dataSource);\n    }\n\n    var options = this.listOption(dataSource, fields);\n    var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n    this.sortedData = dataSource;\n    return ListBase.createList(this.createElement, this.getModuleName() === 'autocomplete' ? spliceData : dataSource, options, true, this);\n  };\n\n  DropDownBase.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;\n    var options = fields.text !== null || fields.value !== null ? {\n      fields: fieldValues,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    return extend({}, options, fields, true);\n  };\n\n  DropDownBase.prototype.setFloatingHeader = function (e) {\n    if (isNullOrUndefined(this.fixedHeaderElement)) {\n      this.fixedHeaderElement = this.createElement('div', {\n        className: dropDownBaseClasses.fixedHead\n      });\n\n      if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n        this.fixedHeaderElement.style.display = 'none';\n      }\n\n      prepend([this.fixedHeaderElement], this.list);\n      this.setFixedHeader();\n    }\n\n    if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n      this.setFixedHeader();\n    }\n\n    this.scrollStop(e);\n  };\n\n  DropDownBase.prototype.scrollStop = function (e) {\n    var target = !isNullOrUndefined(e) ? e.target : this.list;\n    var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n    var topIndex = Math.round(target.scrollTop / liHeight);\n    var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n\n    for (var i = topIndex; i > -1; i--) {\n      if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n        var currentLi = liCollections[i];\n        this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n        this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n        this.fixedHeaderElement.style.display = 'block';\n        break;\n      } else {\n        this.fixedHeaderElement.style.display = 'none';\n        this.fixedHeaderElement.style.top = 'none';\n      }\n    }\n  };\n\n  DropDownBase.prototype.getValidLi = function () {\n    return this.liCollections[0];\n  };\n  /**\n   * To render the list items\n   *\n   * @param {object[]} listData - Specifies the list of array of data.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the list items.\n   */\n\n\n  DropDownBase.prototype.renderItems = function (listData, fields) {\n    var ulElement;\n\n    if (this.itemTemplate && listData) {\n      var dataSource = listData;\n\n      if (dataSource && fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n\n      this.sortedData = dataSource;\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      ulElement = this.templateListItem(this.getModuleName() === 'autocomplete' ? spliceData : dataSource, fields);\n    } else {\n      ulElement = this.createListItems(listData, fields);\n    }\n\n    return ulElement;\n  };\n\n  DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n    var option = this.listOption(dataSource, fields);\n    option.templateID = this.itemTemplateId;\n    option.isStringTemplate = this.isStringTemplate;\n    var itemcheck = this.templateCompiler(this.itemTemplate);\n\n    if (itemcheck) {\n      var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n      return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n    } else {\n      return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n    }\n  };\n\n  DropDownBase.prototype.typeOfData = function (items) {\n    var item = {\n      typeof: null,\n      item: null\n    };\n\n    for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {\n      if (!isNullOrUndefined(items[i])) {\n        var listDataType = typeof items[i] === 'string' || typeof items[i] === 'number' || typeof items[i] === 'boolean';\n        var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : 'value', items[i]));\n\n        if (!isNullData) {\n          return item = {\n            typeof: typeof items[i],\n            item: items[i]\n          };\n        }\n      }\n    }\n\n    return item;\n  };\n\n  DropDownBase.prototype.setFixedHeader = function () {\n    this.list.parentElement.style.display = 'block';\n    var borderWidth = 0;\n\n    if (this.list && this.list.parentElement) {\n      borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n      /*Shorthand property not working in Firefox for getComputedStyle method.\n      Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n      Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n\n      if (isNaN(borderWidth)) {\n        var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n        var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n        var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n        var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n        borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;\n      }\n    }\n\n    var liWidth = this.getValidLi().offsetWidth - borderWidth;\n    this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n    setStyleAttribute(this.fixedHeaderElement, {\n      zIndex: 10\n    });\n    var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n    this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n  };\n\n  DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n    if (dataSource && this.sortOrder !== 'None') {\n      var textField = this.fields.text ? this.fields.text : 'text';\n\n      if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number' || this.typeOfData(dataSource).typeof === 'boolean') {\n        textField = '';\n      }\n\n      dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n    }\n\n    return dataSource;\n  };\n  /**\n   * Return the index of item which matched with given value in data source\n   *\n   * @param {string | number | boolean} value - Specifies given value.\n   * @returns {number} Returns the index of the item.\n   */\n\n\n  DropDownBase.prototype.getIndexByValue = function (value) {\n    var index;\n    var listItems = this.getItems();\n\n    for (var i = 0; i < listItems.length; i++) {\n      if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * To dispatch the event manually\n   *\n   * @param {HTMLElement} element - Specifies the element to dispatch the event.\n   * @param {string} type - Specifies the name of the event.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.dispatchEvent = function (element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n  };\n  /**\n   * To set the current fields\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setFields = function () {\n    if (this.fields.value && !this.fields.text) {\n      this.updateFields(this.fields.value, this.fields.value);\n    } else if (!this.fields.value && this.fields.text) {\n      this.updateFields(this.fields.text, this.fields.text);\n    } else if (!this.fields.value && !this.fields.text) {\n      this.updateFields('text', 'text');\n    }\n  };\n  /**\n   * reset the items list.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.resetList = function (dataSource, fields, query) {\n    if (this.list) {\n      if (this.element.tagName === 'SELECT' && this.element.options.length > 0 || this.element.tagName === 'UL' && this.element.childNodes.length > 0) {\n        var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);\n\n        if (!data && this.selectData && this.selectData.length > 0) {\n          dataSource = this.selectData;\n        }\n      }\n\n      dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length ? this.selectData : dataSource;\n      this.setListData(dataSource, fields, query);\n    }\n  };\n\n  DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n    if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n      this.selectData = this.listData;\n    }\n  };\n\n  DropDownBase.prototype.updateSelection = function () {// This is for after added the item, need to update the selected index values.\n  };\n\n  DropDownBase.prototype.renderList = function () {\n    // This is for render the list items.\n    this.render();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateDataSource = function (props) {\n    this.resetList(this.dataSource);\n  };\n\n  DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n    this.isDataFetched = false;\n    var updateData = {};\n\n    for (var j = 0; props.length > j; j++) {\n      if (newProp[props[j]] && props[j] === 'fields') {\n        this.setFields();\n        updateData[props[j]] = newProp[props[j]];\n      } else if (newProp[props[j]]) {\n        updateData[props[j]] = newProp[props[j]];\n      }\n    }\n\n    if (Object.keys(updateData).length > 0) {\n      if (Object.keys(updateData).indexOf('dataSource') === -1) {\n        updateData.dataSource = this.dataSource;\n      }\n\n      this.updateDataSource(updateData);\n    }\n  };\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'dropdownbase') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'sortOrder':\n        case 'dataSource':\n        case 'itemTemplate':\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this.setEnabled();\n          break;\n\n        case 'groupTemplate':\n          this.renderGroupTemplate(this.list);\n\n          if (this.ulElement && this.fixedHeaderElement) {\n            var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n            this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n          }\n\n          break;\n\n        case 'locale':\n          if (this.list && !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0) {\n            this.l10nUpdate();\n          }\n\n          break;\n\n        case 'zIndex':\n          this.setProperties({\n            zIndex: newProp.zIndex\n          }, true);\n          this.setZIndex();\n          break;\n      }\n    }\n  };\n  /**\n   * Build and render the component\n   *\n   * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.render = function (isEmptyData) {\n    this.list = this.createElement('div', {\n      className: dropDownBaseClasses.content,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.list.classList.add(dropDownBaseClasses.root);\n    this.setFields();\n    var rippleModel = {\n      duration: 300,\n      selector: '.' + dropDownBaseClasses.li\n    };\n    this.rippleFun = rippleEffect(this.list, rippleModel);\n    var group = this.element.querySelector('select>optgroup');\n\n    if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (this.getModuleName() === 'dropdownbase') {\n      if (this.element.getAttribute('tabindex')) {\n        this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n      }\n\n      removeClass([this.element], dropDownBaseClasses.root);\n      this.element.style.display = 'none';\n      var wrapperElement = this.createElement('div');\n      this.element.parentElement.insertBefore(wrapperElement, this.element);\n      wrapperElement.appendChild(this.element);\n      wrapperElement.appendChild(this.list);\n    }\n\n    this.setEnableRtl();\n    this.setEnabled();\n\n    if (!isEmptyData) {\n      this.initialize();\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownBase.prototype.getModuleName = function () {\n    return 'dropdownbase';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownBase.prototype.getItems = function () {\n    return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n    */\n\n\n  DropDownBase.prototype.addItem = function (items, itemIndex) {\n    if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox') {\n      this.renderList();\n    }\n\n    if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n      var newList = [].slice.call(this.listData);\n      newList.push(items);\n      newList = this.getSortedDataSource(newList);\n\n      if (this.fields.groupBy) {\n        newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n        itemIndex = newList.indexOf(items);\n      } else {\n        itemIndex = newList.indexOf(items);\n      }\n    }\n\n    var itemsCount = this.getItems().length;\n    var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n    items = items instanceof Array ? items : [items];\n    var index;\n    index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;\n    var fields = this.fields;\n\n    if (items && fields.groupBy) {\n      items = ListBase.groupDataSource(items, fields.properties);\n    }\n\n    var liCollections = [];\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var isHeader = item.isHeader;\n      var li = this.createElement('li', {\n        className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li,\n        id: 'option-add-' + i\n      });\n      var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n\n      if (isHeader) {\n        li.innerText = itemText;\n      }\n\n      if (this.itemTemplate && !isHeader) {\n        var itemCheck = this.templateCompiler(this.itemTemplate);\n        var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n\n        if (addItemTemplate) {\n          append(addItemTemplate, li);\n        }\n      } else if (!isHeader) {\n        li.appendChild(document.createTextNode(itemText));\n      }\n\n      li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n      li.setAttribute('role', 'option');\n      this.notify('addItem', {\n        module: 'CheckBoxSelection',\n        item: li\n      });\n      liCollections.push(li);\n      this.listData.push(item);\n\n      if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n        index = null;\n      }\n\n      this.updateActionCompleteData(li, item, index); //Listbox event\n\n      this.trigger('beforeItemRender', {\n        element: li,\n        item: item\n      });\n    }\n\n    if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n      this.list.innerHTML = '';\n      this.list.classList.remove(dropDownBaseClasses.noData);\n      this.list.appendChild(this.ulElement);\n      this.liCollections = liCollections;\n      append(liCollections, this.ulElement);\n      this.updateAddItemList(this.list, itemsCount);\n    } else {\n      if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n        this.ulElement.innerHTML = '';\n      }\n\n      var attr = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n\n        for (var j = 0; j < listGroupItem.length; j++) {\n          attr[j] = listGroupItem[j].innerText;\n        }\n\n        if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n          for (var j = 0; j < listGroupItem.length; j++) {\n            if (attr[j] === liCollections[i].innerText) {\n              if (this.sortOrder === 'None') {\n                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n              } else {\n                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n              }\n\n              i = i + 1;\n              break;\n            }\n          }\n        } else {\n          if (this.liCollections[index]) {\n            this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n          } else {\n            this.ulElement.appendChild(liCollections[i]);\n          }\n        }\n\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 0, liCollections[i]);\n        this.liCollections = tempLi;\n        index += 1;\n\n        if (this.getModuleName() === 'multiselect') {\n          this.updateDataList();\n        }\n      }\n    }\n\n    if (selectedItemValue || itemIndex === 0) {\n      this.updateSelection();\n    }\n  };\n\n  DropDownBase.prototype.validationAttribute = function (target, hidden) {\n    var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n    hidden.setAttribute('name', name);\n    target.removeAttribute('name');\n    var attributes = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes.length; i++) {\n      if (!target.getAttribute(attributes[i])) {\n        continue;\n      }\n\n      var attr = target.getAttribute(attributes[i]);\n      hidden.setAttribute(attributes[i], attr);\n      target.removeAttribute(attributes[i]);\n    }\n  };\n\n  DropDownBase.prototype.setZIndex = function () {// this is for component wise\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {// this is for ComboBox custom value\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateAddItemList = function (list, itemCount) {// this is for multiselect add item\n  };\n\n  DropDownBase.prototype.updateDataList = function () {// this is for multiselect update list items\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownBase.prototype.getDataByValue = function (value) {\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n\n          if (!isNullOrUndefined(item) && item === value) {\n            return item;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n\n          if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n            return item;\n          }\n        }\n      }\n    }\n\n    return null;\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.destroy = function () {\n    if (document.body.contains(this.list)) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n\n      if (!isNullOrUndefined(this.rippleFun)) {\n        this.rippleFun();\n      }\n\n      detach(this.list);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], DropDownBase.prototype, \"fields\", void 0);\n\n  __decorate([Property(false)], DropDownBase.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"itemTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"groupTemplate\", void 0);\n\n  __decorate([Property('No records found')], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate([Property('Request failed')], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate([Property('None')], DropDownBase.prototype, \"sortOrder\", void 0);\n\n  __decorate([Property(true)], DropDownBase.prototype, \"enabled\", void 0);\n\n  __decorate([Property([])], DropDownBase.prototype, \"dataSource\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"query\", void 0);\n\n  __decorate([Property('StartsWith')], DropDownBase.prototype, \"filterType\", void 0);\n\n  __decorate([Property(true)], DropDownBase.prototype, \"ignoreCase\", void 0);\n\n  __decorate([Property(1000)], DropDownBase.prototype, \"zIndex\", void 0);\n\n  __decorate([Property(false)], DropDownBase.prototype, \"ignoreAccent\", void 0);\n\n  __decorate([Property()], DropDownBase.prototype, \"locale\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionBegin\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionFailure\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"select\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"dataBound\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"created\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"destroyed\", void 0);\n\n  DropDownBase = __decorate([NotifyPropertyChanges], DropDownBase);\n  return DropDownBase;\n}(Component);\n\nexport { DropDownBase };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","EventHandler","addClass","append","Property","Event","L10n","compile","setStyleAttribute","extend","removeClass","prepend","isNullOrUndefined","detach","getValue","NotifyPropertyChanges","rippleEffect","ChildProperty","Complex","DataManager","Query","DataUtil","ListBase","select","selectAll","FieldSettings","_super","apply","dropDownBaseClasses","root","rtl","content","selected","hover","noData","fixedHead","focus","li","group","disabled","grouping","ITEMTEMPLATE_PROPERTY","VALUETEMPLATE_PROPERTY","GROUPTEMPLATE_PROPERTY","HEADERTEMPLATE_PROPERTY","FOOTERTEMPLATE_PROPERTY","NORECORDSTEMPLATE_PROPERTY","ACTIONFAILURETEMPLATE_PROPERTY","HIDE_GROUPLIST","DropDownBase","options","element","_this","call","preventChange","isAngular","isPreventChange","isDynamicDataChange","getPropObject","prop","newProp","oldProp","newProperty","oldProperty","propName","data","getValueByText","text","ignoreCase","ignoreAccent","value","listData","checkValueCase","isTextByValue","dataSource","fields","type","typeOfData","typeof","_i","dataSource_1","item","checkingAccent","String","checkIgnoreCase","getItemValue","checkNonIgnoreCase","filter","itemValue","toString","compareValue_1","dataItem","ignoreDiacritics","textItem","toLowerCase","typedText","getFormattedValue","templateCompiler","baseTemplate","checkTemplate","document","exception","l10nUpdate","actionFailure","ele","getModuleName","ulElement","list","noRecordsTemplate","actionFailureTemplate","template","compiledString","templateId","actionFailureTemplateId","noRecordsTemplateId","innerHTML","tempaltecheck","trim","templateName","noDataCompTemp","isStringTemplate","appendChild","renderReactTemplates","l10nLocale","componentLocale","getLocaleName","locale","getConstant","l10n","liElem","createElement","textContent","classList","add","getTextByValue","parseFloat","setEnableRtl","enableRtlElements","push","enableRtl","initialize","bindEvent","id","tagName","jsonElement","createJsonFromElement","setProperties","resetList","renderItemsBySelect","setListData","query","getPersistData","addOnPersist","setEnabled","setAttribute","enabled","updateDataAttribute","invalidAttr","attr","a","attributes","indexOf","name","getAttribute","htmlAttributes","querySelectorAll","option","getJSONfromOption","optionGroup","label","isHeader","child","updateFields","groupBy","iconCss","field","items","options_1","json","innerText","preRender","scrollTimer","isRequested","isDataFetched","itemTemplateId","valueTemplateId","groupTemplateId","headerTemplateId","footerTemplateId","isActive","eventArgs","cancel","trigger","showSpinner","emptyDataRequest","executeQuery","getQuery","then","e","listItems","result","renderItems","groupTemplate","renderGroupTemplate","onActionComplete","bindChildItems","catch","onActionFailure","hideSpinner","dataManager","executeLocal","localDataArgs","setTimeout","itemTemplate","childElementCount","children","updateDataList","childNode","remainingItems","sortedData","liCollections","updateListValues","raiseDataBound","findListElement","findNode","attribute","liElement","listArr","slice","index","dataBoundEventArgs","spliceData","skip","listElements","templateListItem","childNodes","createListItemFromArray","listOption","createListItemFromJson","isReact","clearTemplate","fixedHeaderElement","properties","allowCustomValue","contains","querySelector","postRender","listElement","focusItem","selectedItem","remove","listEle","groupTemplateID","headerItems","groupcheck","groupValue","tempHeaders","isGroupChecking","notify","module","createListItems","sortOrder","getSortedDataSource","groupDataSource","take","createList","fieldValues","showIcon","ariaAttributes","groupItemRole","setFloatingHeader","className","style","display","setFixedHeader","zIndex","scrollStop","liHeight","parseInt","getComputedStyle","getValidLi","getPropertyValue","topIndex","Math","round","scrollTop","currentLi","top","templateID","itemcheck","renderContentTemplate","listDataType","isNullData","parentElement","borderWidth","defaultView","isNaN","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","liWidth","offsetWidth","width","firstLi","textField","getDataSource","addSorting","getIndexByValue","getItems","dispatchEvent","evt","createEvent","initEvent","setFields","selectData","updateSelectElementData","isFiltering","updateSelection","renderList","render","updateDataSource","props","setUpdateInitial","updateData","j","keys","onPropertyChanged","_a","setZIndex","isEmptyData","attrs","rippleModel","duration","selector","rippleFun","wrapperElement","insertBefore","addItem","itemIndex","newList","itemsCount","selectedItemValue","itemText","itemCheck","addItemTemplate","createTextNode","updateActionCompleteData","updateAddItemList","listGroupItem","parentNode","tempLi","splice","validationAttribute","hidden","removeAttribute","itemCount","getDataByValue","_b","_c","destroy","body"],"sources":["C:/Project/show-me-the-code-test/view/node_modules/@syncfusion/ej2-dropdowns/src/drop-down-base/drop-down-base.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, addClass, append, Property, Event, L10n, compile } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend, removeClass, prepend, isNullOrUndefined, detach, getValue } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, rippleEffect, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { DataManager, Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { select, selectAll } from '@syncfusion/ej2-base';\nvar FieldSettings = /** @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"groupBy\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nexport { FieldSettings };\nexport var dropDownBaseClasses = {\n    root: 'e-dropdownbase',\n    rtl: 'e-rtl',\n    content: 'e-content',\n    selected: 'e-active',\n    hover: 'e-hover',\n    noData: 'e-nodata',\n    fixedHead: 'e-fixed-head',\n    focus: 'e-item-focus',\n    li: 'e-list-item',\n    group: 'e-list-group-item',\n    disabled: 'e-disabled',\n    grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nvar DropDownBase = /** @class */ (function (_super) {\n    __extends(DropDownBase, _super);\n    /**\n     * * Constructor for DropDownBase class\n     *\n     * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.isPreventChange = false;\n        _this.isDynamicDataChange = false;\n        return _this;\n    }\n    DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n        var newProperty = new Object();\n        var oldProperty = new Object();\n        var propName = function (prop) {\n            return prop;\n        };\n        newProperty[propName(prop)] = newProp[propName(prop)];\n        oldProperty[propName(prop)] = oldProp[propName(prop)];\n        var data = new Object();\n        data.newProperty = newProperty;\n        data.oldProperty = oldProperty;\n        return data;\n    };\n    DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n        var value = null;\n        if (!isNullOrUndefined(this.listData)) {\n            if (ignoreCase) {\n                value = this.checkValueCase(text, true, ignoreAccent);\n            }\n            else {\n                value = this.checkValueCase(text, false, ignoreAccent);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n        var _this = this;\n        var value = null;\n        if (isTextByValue) {\n            value = text;\n        }\n        var dataSource = this.listData;\n        var fields = this.fields;\n        var type = this.typeOfData(dataSource).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n                var item = dataSource_1[_i];\n                if (!isNullOrUndefined(item)) {\n                    if (ignoreAccent) {\n                        value = this.checkingAccent(String(item), text, ignoreCase);\n                    }\n                    else {\n                        if (ignoreCase) {\n                            if (this.checkIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase);\n                            }\n                        }\n                        else {\n                            if (this.checkNonIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (ignoreCase) {\n                dataSource.filter(function (item) {\n                    var itemValue = getValue(fields.value, item);\n                    if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n                        value = getValue(fields.value, item);\n                    }\n                });\n            }\n            else {\n                if (isTextByValue) {\n                    var compareValue_1 = null;\n                    compareValue_1 = value;\n                    dataSource.filter(function (item) {\n                        var itemValue = getValue(fields.value, item);\n                        if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n                            value = getValue(fields.text, item);\n                        }\n                    });\n                }\n                else {\n                    dataSource.filter(function (item) {\n                        if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                            value = getValue(fields.value, item);\n                        }\n                    });\n                }\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n        var dataItem = DataUtil.ignoreDiacritics(String(item));\n        var textItem = DataUtil.ignoreDiacritics(text.toString());\n        var value = null;\n        if (ignoreCase) {\n            if (this.checkIgnoreCase(dataItem, textItem)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        else {\n            if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n        return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    };\n    DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n        return String(item) === text.toString() ? true : false;\n    };\n    DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n        var value = null;\n        var dataSource = this.listData;\n        var type = this.typeOfData(dataSource).typeof;\n        if (isTextByValue) {\n            value = dataItem.toString();\n        }\n        else {\n            if (ignoreCase) {\n                value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n            }\n            else {\n                value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n        var checkTemplate = false;\n        if (baseTemplate) {\n            try {\n                checkTemplate = (selectAll(baseTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n        var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n        if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var compiledString = void 0;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            ele.innerHTML = '';\n            var tempaltecheck = this.templateCompiler(template);\n            if (tempaltecheck) {\n                compiledString = compile(select(template, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(template);\n            }\n            var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n            if (noDataCompTemp && noDataCompTemp.length > 0) {\n                for (var i = 0; i < noDataCompTemp.length; i++) {\n                    ele.appendChild(noDataCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else {\n            var l10nLocale = { noRecordsTemplate: 'No records found', actionFailureTemplate: 'Request failed' };\n            var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n            if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n                this.l10n = componentLocale;\n            }\n            else {\n                this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : 'dropdowns', l10nLocale, this.locale);\n            }\n            var content = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            if (this.getModuleName() === 'listbox') {\n                var liElem = this.createElement('li');\n                liElem.textContent = content;\n                ele.appendChild(liElem);\n                liElem.classList.add('e-list-nrt');\n            }\n            else {\n                ele.innerHTML = content;\n            }\n        }\n    };\n    DropDownBase.prototype.getLocaleName = function () {\n        return 'drop-down-base';\n    };\n    DropDownBase.prototype.getTextByValue = function (value) {\n        var text = this.checkValueCase(value, false, false, true);\n        return text;\n    };\n    DropDownBase.prototype.getFormattedValue = function (value) {\n        if (this.listData && this.listData.length) {\n            var item = this.typeOfData(this.listData);\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'number'\n                || item.typeof === 'number') {\n                return parseFloat(value);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'boolean'\n                || item.typeof === 'boolean') {\n                return ((value === 'true') || ('' + value === 'true'));\n            }\n        }\n        return value;\n    };\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnableRtl = function () {\n        if (this.list) {\n            this.enableRtlElements.push(this.list);\n        }\n        if (this.enableRtl) {\n            addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n        else {\n            removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n        }\n    };\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.initialize = function () {\n        this.bindEvent = true;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n        if (this.element.tagName === 'UL') {\n            var jsonElement = ListBase.createJsonFromElement(this.element);\n            this.setProperties({ fields: { text: 'text', value: 'text' } }, true);\n            this.resetList(jsonElement, this.fields);\n        }\n        else if (this.element.tagName === 'SELECT') {\n            var dataSource = this.dataSource instanceof Array ? (this.dataSource.length > 0 ? true : false)\n                : !isNullOrUndefined(this.dataSource) ? true : false;\n            if (!dataSource) {\n                this.renderItemsBySelect();\n            }\n            else if (this.isDynamicDataChange) {\n                this.setListData(this.dataSource, this.fields, this.query);\n            }\n        }\n        else {\n            this.setListData(this.dataSource, this.fields, this.query);\n        }\n    };\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n    DropDownBase.prototype.updateDataAttribute = function (value) {\n        var invalidAttr = ['class', 'style', 'id', 'type'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownBase.prototype.renderItemsBySelect = function () {\n        var element = this.element;\n        var fields = { value: 'value', text: 'text' };\n        var jsonElement = [];\n        var group = element.querySelectorAll('select>optgroup');\n        var option = element.querySelectorAll('select>option');\n        this.getJSONfromOption(jsonElement, option, fields);\n        if (group.length) {\n            for (var i = 0; i < group.length; i++) {\n                var item = group[i];\n                var optionGroup = {};\n                optionGroup[fields.text] = item.label;\n                optionGroup.isHeader = true;\n                var child = item.querySelectorAll('option');\n                jsonElement.push(optionGroup);\n                this.getJSONfromOption(jsonElement, child, fields);\n            }\n            element.querySelectorAll('select>option');\n        }\n        this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n        this.resetList(jsonElement, fields);\n    };\n    DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n        var field = {\n            'fields': {\n                text: text,\n                value: value,\n                groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n                htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n                iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n            }\n        };\n        this.setProperties(field, true);\n    };\n    DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n        for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n            var option = options_1[_i];\n            var json = {};\n            json[fields.text] = option.innerText;\n            json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ?\n                option.getAttribute(fields.value) : option.innerText;\n            items.push(json);\n        }\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.preRender = function () {\n        // there is no event handler\n        this.scrollTimer = -1;\n        this.enableRtlElements = [];\n        this.isRequested = false;\n        this.isDataFetched = false;\n        this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n        this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n        this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n    };\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.setListData = function (dataSource, fields, query) {\n        var _this = this;\n        fields = fields ? fields : this.fields;\n        var ulElement;\n        this.isActive = true;\n        var eventArgs = { cancel: false, data: dataSource, query: query };\n        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n        this.trigger('actionBegin', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.showSpinner();\n                if (dataSource instanceof DataManager) {\n                    _this.isRequested = true;\n                    if (_this.isDataFetched) {\n                        _this.emptyDataRequest(fields);\n                        return;\n                    }\n                    eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n                        _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                        _this.trigger('actionComplete', e, function (e) {\n                            if (!e.cancel) {\n                                var listItems = e.result;\n                                if (listItems.length === 0) {\n                                    _this.isDataFetched = true;\n                                }\n                                ulElement = _this.renderItems(listItems, fields);\n                                if (_this.groupTemplate) {\n                                    _this.renderGroupTemplate(ulElement);\n                                }\n                                _this.onActionComplete(ulElement, listItems, e);\n                                _this.isRequested = false;\n                                _this.bindChildItems(listItems, ulElement, fields, e);\n                            }\n                        });\n                    }).catch(function (e) {\n                        _this.isRequested = false;\n                        _this.onActionFailure(e);\n                        _this.hideSpinner();\n                    });\n                }\n                else {\n                    var dataManager = new DataManager(eventArgs.data);\n                    var listItems = (_this.getQuery(eventArgs.query)).executeLocal(dataManager);\n                    var localDataArgs = { cancel: false, result: listItems };\n                    _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                    _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n                        if (!localDataArgs.cancel) {\n                            ulElement = _this.renderItems(localDataArgs.result, fields);\n                            _this.onActionComplete(ulElement, localDataArgs.result);\n                            if (_this.groupTemplate) {\n                                _this.renderGroupTemplate(ulElement);\n                            }\n                            _this.bindChildItems(localDataArgs.result, ulElement, fields);\n                            setTimeout(function () {\n                                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || (_this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)))) {\n                                    _this.updateDataList();\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    };\n    DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n        var _this = this;\n        if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n            setTimeout(function () {\n                var childNode = _this.remainingItems(_this.sortedData, fields);\n                append(childNode, ulElement);\n                _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                _this.updateListValues();\n                _this.raiseDataBound(listItems, e);\n            }, 0);\n        }\n        else {\n            this.raiseDataBound(listItems, e);\n        }\n    };\n    DropDownBase.prototype.updateListValues = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n        var liElement = null;\n        if (list) {\n            var listArr = [].slice.call(list.querySelectorAll(findNode));\n            for (var index = 0; index < listArr.length; index++) {\n                if (listArr[index].getAttribute(attribute) === (value + '')) {\n                    liElement = listArr[index];\n                    break;\n                }\n            }\n        }\n        return liElement;\n    };\n    DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n        this.hideSpinner();\n        var dataBoundEventArgs = {\n            items: listItems,\n            e: e\n        };\n        this.trigger('dataBound', dataBoundEventArgs);\n    };\n    DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n        var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n        if (this.itemTemplate) {\n            var listElements = this.templateListItem(spliceData, fields);\n            return [].slice.call(listElements.childNodes);\n        }\n        var type = this.typeOfData(spliceData).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n        }\n        return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    };\n    DropDownBase.prototype.emptyDataRequest = function (fields) {\n        var listItems = [];\n        this.onActionComplete(this.renderItems(listItems, fields), listItems);\n        this.isRequested = false;\n        this.hideSpinner();\n    };\n    DropDownBase.prototype.showSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.hideSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.onActionFailure = function (e) {\n        this.liCollections = [];\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.list], dropDownBaseClasses.noData);\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        this.listData = list;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n        }\n        this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n        if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n            for (var i = 0; i < ulElement.childElementCount; i++) {\n                if (ulElement.children[i].classList.contains('e-list-group-item')) {\n                    if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n                        addClass([ulElement.children[i]], HIDE_GROUPLIST);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(this.list)) {\n            this.list.innerHTML = '';\n            this.list.appendChild(ulElement);\n            this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n            this.ulElement = this.list.querySelector('ul');\n            this.postRender(this.list, list, this.bindEvent);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n        var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n        if (focusItem && !selectedItem) {\n            focusItem.classList.add(dropDownBaseClasses.focus);\n        }\n        if (list.length <= 0) {\n            this.l10nUpdate();\n            addClass([listElement], dropDownBaseClasses.noData);\n        }\n        else {\n            listElement.classList.remove(dropDownBaseClasses.noData);\n        }\n    };\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n    DropDownBase.prototype.getQuery = function (query) {\n        return query ? query : this.query ? this.query : new Query();\n    };\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n    DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n        if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n            var dataSource = this.dataSource;\n            var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };\n            var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n            var groupcheck = this.templateCompiler(this.groupTemplate);\n            if (groupcheck) {\n                var groupValue = select(this.groupTemplate, document).innerHTML.trim();\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n    DropDownBase.prototype.createListItems = function (dataSource, fields) {\n        if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n            if (fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            addClass([this.list], dropDownBaseClasses.grouping);\n        }\n        else {\n            dataSource = this.getSortedDataSource(dataSource);\n        }\n        var options = this.listOption(dataSource, fields);\n        var spliceData = (dataSource.length > 100) ?\n            new DataManager(dataSource).executeLocal(new Query().take(100))\n            : dataSource;\n        this.sortedData = dataSource;\n        return ListBase.createList(this.createElement, (this.getModuleName() === 'autocomplete') ? spliceData : dataSource, options, true, this);\n    };\n    DropDownBase.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldValues = !isNullOrUndefined(fields.properties) ?\n            fields.properties : fields;\n        var options = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldValues,\n            showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        return extend({}, options, fields, true);\n    };\n    DropDownBase.prototype.setFloatingHeader = function (e) {\n        if (isNullOrUndefined(this.fixedHeaderElement)) {\n            this.fixedHeaderElement = this.createElement('div', { className: dropDownBaseClasses.fixedHead });\n            if (!this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n                this.fixedHeaderElement.style.display = 'none';\n            }\n            prepend([this.fixedHeaderElement], this.list);\n            this.setFixedHeader();\n        }\n        if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n            this.setFixedHeader();\n        }\n        this.scrollStop(e);\n    };\n    DropDownBase.prototype.scrollStop = function (e) {\n        var target = !isNullOrUndefined(e) ? e.target : this.list;\n        var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n        var topIndex = Math.round(target.scrollTop / liHeight);\n        var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n        for (var i = topIndex; i > -1; i--) {\n            if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n                var currentLi = liCollections[i];\n                this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n                this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n                this.fixedHeaderElement.style.display = 'block';\n                break;\n            }\n            else {\n                this.fixedHeaderElement.style.display = 'none';\n                this.fixedHeaderElement.style.top = 'none';\n            }\n        }\n    };\n    DropDownBase.prototype.getValidLi = function () {\n        return this.liCollections[0];\n    };\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n    DropDownBase.prototype.renderItems = function (listData, fields) {\n        var ulElement;\n        if (this.itemTemplate && listData) {\n            var dataSource = listData;\n            if (dataSource && fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            this.sortedData = dataSource;\n            var spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            ulElement = this.templateListItem((this.getModuleName() === 'autocomplete') ? spliceData : dataSource, fields);\n        }\n        else {\n            ulElement = this.createListItems(listData, fields);\n        }\n        return ulElement;\n    };\n    DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n        var option = this.listOption(dataSource, fields);\n        option.templateID = this.itemTemplateId;\n        option.isStringTemplate = this.isStringTemplate;\n        var itemcheck = this.templateCompiler(this.itemTemplate);\n        if (itemcheck) {\n            var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n            return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n        }\n        else {\n            return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n        }\n    };\n    DropDownBase.prototype.typeOfData = function (items) {\n        var item = { typeof: null, item: null };\n        for (var i = 0; (!isNullOrUndefined(items) && i < items.length); i++) {\n            if (!isNullOrUndefined(items[i])) {\n                var listDataType = typeof (items[i]) === 'string' ||\n                    typeof (items[i]) === 'number' || typeof (items[i]) === 'boolean';\n                var isNullData = listDataType ? isNullOrUndefined(items[i]) :\n                    isNullOrUndefined(getValue((this.fields.value ? this.fields.value : 'value'), items[i]));\n                if (!isNullData) {\n                    return item = { typeof: typeof items[i], item: items[i] };\n                }\n            }\n        }\n        return item;\n    };\n    DropDownBase.prototype.setFixedHeader = function () {\n        this.list.parentElement.style.display = 'block';\n        var borderWidth = 0;\n        if (this.list && this.list.parentElement) {\n            borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n            /*Shorthand property not working in Firefox for getComputedStyle method.\n            Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n            Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n            if (isNaN(borderWidth)) {\n                var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n                var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n                var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n                var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n                borderWidth = (borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth);\n            }\n        }\n        var liWidth = this.getValidLi().offsetWidth - borderWidth;\n        this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n        setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });\n        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    };\n    DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n        if (dataSource && this.sortOrder !== 'None') {\n            var textField = this.fields.text ? this.fields.text : 'text';\n            if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number'\n                || this.typeOfData(dataSource).typeof === 'boolean') {\n                textField = '';\n            }\n            dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n        }\n        return dataSource;\n    };\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    DropDownBase.prototype.getIndexByValue = function (value) {\n        var index;\n        var listItems = this.getItems();\n        for (var i = 0; i < listItems.length; i++) {\n            if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n    DropDownBase.prototype.dispatchEvent = function (element, type) {\n        var evt = document.createEvent('HTMLEvents');\n        evt.initEvent(type, false, true);\n        element.dispatchEvent(evt);\n    };\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setFields = function () {\n        if (this.fields.value && !this.fields.text) {\n            this.updateFields(this.fields.value, this.fields.value);\n        }\n        else if (!this.fields.value && this.fields.text) {\n            this.updateFields(this.fields.text, this.fields.text);\n        }\n        else if (!this.fields.value && !this.fields.text) {\n            this.updateFields('text', 'text');\n        }\n    };\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.resetList = function (dataSource, fields, query) {\n        if (this.list) {\n            if ((this.element.tagName === 'SELECT' && this.element.options.length > 0)\n                || (this.element.tagName === 'UL' && this.element.childNodes.length > 0)) {\n                var data = dataSource instanceof Array ? (dataSource.length > 0)\n                    : !isNullOrUndefined(dataSource);\n                if (!data && this.selectData && this.selectData.length > 0) {\n                    dataSource = this.selectData;\n                }\n            }\n            dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length ? this.selectData : dataSource;\n            this.setListData(dataSource, fields, query);\n        }\n    };\n    DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n        if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n            this.selectData = this.listData;\n        }\n    };\n    DropDownBase.prototype.updateSelection = function () {\n        // This is for after added the item, need to update the selected index values.\n    };\n    DropDownBase.prototype.renderList = function () {\n        // This is for render the list items.\n        this.render();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateDataSource = function (props) {\n        this.resetList(this.dataSource);\n    };\n    DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n        this.isDataFetched = false;\n        var updateData = {};\n        for (var j = 0; props.length > j; j++) {\n            if (newProp[props[j]] && props[j] === 'fields') {\n                this.setFields();\n                updateData[props[j]] = newProp[props[j]];\n            }\n            else if (newProp[props[j]]) {\n                updateData[props[j]] = newProp[props[j]];\n            }\n        }\n        if (Object.keys(updateData).length > 0) {\n            if (Object.keys(updateData).indexOf('dataSource') === -1) {\n                updateData.dataSource = this.dataSource;\n            }\n            this.updateDataSource(updateData);\n        }\n    };\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownbase') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'sortOrder':\n                case 'dataSource':\n                case 'itemTemplate':\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this.setEnabled();\n                    break;\n                case 'groupTemplate':\n                    this.renderGroupTemplate(this.list);\n                    if (this.ulElement && this.fixedHeaderElement) {\n                        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n                        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n                    }\n                    break;\n                case 'locale':\n                    if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {\n                        this.l10nUpdate();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setProperties({ zIndex: newProp.zIndex }, true);\n                    this.setZIndex();\n                    break;\n            }\n        }\n    };\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.render = function (isEmptyData) {\n        this.list = this.createElement('div', { className: dropDownBaseClasses.content, attrs: { 'tabindex': '0' } });\n        this.list.classList.add(dropDownBaseClasses.root);\n        this.setFields();\n        var rippleModel = { duration: 300, selector: '.' + dropDownBaseClasses.li };\n        this.rippleFun = rippleEffect(this.list, rippleModel);\n        var group = this.element.querySelector('select>optgroup');\n        if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (this.getModuleName() === 'dropdownbase') {\n            if (this.element.getAttribute('tabindex')) {\n                this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n            }\n            removeClass([this.element], dropDownBaseClasses.root);\n            this.element.style.display = 'none';\n            var wrapperElement = this.createElement('div');\n            this.element.parentElement.insertBefore(wrapperElement, this.element);\n            wrapperElement.appendChild(this.element);\n            wrapperElement.appendChild(this.list);\n        }\n        this.setEnableRtl();\n        this.setEnabled();\n        if (!isEmptyData) {\n            this.initialize();\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownBase.prototype.getModuleName = function () {\n        return 'dropdownbase';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownBase.prototype.getItems = function () {\n        return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n\n     */\n    DropDownBase.prototype.addItem = function (items, itemIndex) {\n        if (!this.list || (this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox')) {\n            this.renderList();\n        }\n        if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n            var newList = [].slice.call(this.listData);\n            newList.push(items);\n            newList = this.getSortedDataSource(newList);\n            if (this.fields.groupBy) {\n                newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n                itemIndex = newList.indexOf(items);\n            }\n            else {\n                itemIndex = newList.indexOf(items);\n            }\n        }\n        var itemsCount = this.getItems().length;\n        var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        items = (items instanceof Array ? items : [items]);\n        var index;\n        index = (isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1) ? itemsCount : itemIndex;\n        var fields = this.fields;\n        if (items && fields.groupBy) {\n            items = ListBase.groupDataSource(items, fields.properties);\n        }\n        var liCollections = [];\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var isHeader = item.isHeader;\n            var li = this.createElement('li', { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: 'option-add-' + i });\n            var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n            if (isHeader) {\n                li.innerText = itemText;\n            }\n            if (this.itemTemplate && !isHeader) {\n                var itemCheck = this.templateCompiler(this.itemTemplate);\n                var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n                if (addItemTemplate) {\n                    append(addItemTemplate, li);\n                }\n            }\n            else if (!isHeader) {\n                li.appendChild(document.createTextNode(itemText));\n            }\n            li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n            li.setAttribute('role', 'option');\n            this.notify('addItem', { module: 'CheckBoxSelection', item: li });\n            liCollections.push(li);\n            this.listData.push(item);\n            if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n                index = null;\n            }\n            this.updateActionCompleteData(li, item, index);\n            //Listbox event\n            this.trigger('beforeItemRender', { element: li, item: item });\n        }\n        if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n            this.list.innerHTML = '';\n            this.list.classList.remove(dropDownBaseClasses.noData);\n            this.list.appendChild(this.ulElement);\n            this.liCollections = liCollections;\n            append(liCollections, this.ulElement);\n            this.updateAddItemList(this.list, itemsCount);\n        }\n        else {\n            if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n                this.ulElement.innerHTML = '';\n            }\n            var attr = [];\n            for (var i = 0; i < items.length; i++) {\n                var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n                for (var j = 0; j < listGroupItem.length; j++) {\n                    attr[j] = listGroupItem[j].innerText;\n                }\n                if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n                    for (var j = 0; j < listGroupItem.length; j++) {\n                        if (attr[j] === liCollections[i].innerText) {\n                            if (this.sortOrder === 'None') {\n                                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n                            }\n                            else {\n                                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n                            }\n                            i = i + 1;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.liCollections[index]) {\n                        this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n                    }\n                    else {\n                        this.ulElement.appendChild(liCollections[i]);\n                    }\n                }\n                var tempLi = [].slice.call(this.liCollections);\n                tempLi.splice(index, 0, liCollections[i]);\n                this.liCollections = tempLi;\n                index += 1;\n                if (this.getModuleName() === 'multiselect') {\n                    this.updateDataList();\n                }\n            }\n        }\n        if (selectedItemValue || itemIndex === 0) {\n            this.updateSelection();\n        }\n    };\n    DropDownBase.prototype.validationAttribute = function (target, hidden) {\n        var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n        hidden.setAttribute('name', name);\n        target.removeAttribute('name');\n        var attributes = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes.length; i++) {\n            if (!target.getAttribute(attributes[i])) {\n                continue;\n            }\n            var attr = target.getAttribute(attributes[i]);\n            hidden.setAttribute(attributes[i], attr);\n            target.removeAttribute(attributes[i]);\n        }\n    };\n    DropDownBase.prototype.setZIndex = function () {\n        // this is for component wise\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {\n        // this is for ComboBox custom value\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateAddItemList = function (list, itemCount) {\n        // this is for multiselect add item\n    };\n    DropDownBase.prototype.updateDataList = function () {\n        // this is for multiselect update list items\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownBase.prototype.getDataByValue = function (value) {\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (!isNullOrUndefined(item) && item === value) {\n                        return item;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                        return item;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownBase.prototype.destroy = function () {\n        if (document.body.contains(this.list)) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            if (!isNullOrUndefined(this.rippleFun)) {\n                this.rippleFun();\n            }\n            detach(this.list);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], DropDownBase.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"groupTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property('Request failed')\n    ], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n    __decorate([\n        Property('None')\n    ], DropDownBase.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"enabled\", void 0);\n    __decorate([\n        Property([])\n    ], DropDownBase.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"query\", void 0);\n    __decorate([\n        Property('StartsWith')\n    ], DropDownBase.prototype, \"filterType\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(1000)\n    ], DropDownBase.prototype, \"zIndex\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], DropDownBase.prototype, \"locale\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"destroyed\", void 0);\n    DropDownBase = __decorate([\n        NotifyPropertyChanges\n    ], DropDownBase);\n    return DropDownBase;\n}(Component));\nexport { DropDownBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}