{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { Component, EventHandler, Property, Event } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, isVisible, closest, attributes, detach, classList, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { selectAll, setStyleAttribute as setStyle, select } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, getUniqueID, formatUnit, Collection, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Browser, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { HScroll } from '../common/h-scroll';\nimport { VScroll } from '../common/v-scroll';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_ITEMS = 'e-toolbar-items';\nvar CLS_ITEM = 'e-toolbar-item';\nvar CLS_RTL = 'e-rtl';\nvar CLS_SEPARATOR = 'e-separator';\nvar CLS_POPUPICON = 'e-popup-up-icon';\nvar CLS_POPUPDOWN = 'e-popup-down-icon';\nvar CLS_POPUPOPEN = 'e-popup-open';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_POPUPTEXT = 'e-toolbar-text';\nvar CLS_TBARTEXT = 'e-popup-text';\nvar CLS_TBAROVERFLOW = 'e-overflow-show';\nvar CLS_POPOVERFLOW = 'e-overflow-hide';\nvar CLS_TBARBTN = 'e-tbar-btn';\nvar CLS_TBARNAV = 'e-hor-nav';\nvar CLS_TBARSCRLNAV = 'e-scroll-nav';\nvar CLS_TBARRIGHT = 'e-toolbar-right';\nvar CLS_TBARLEFT = 'e-toolbar-left';\nvar CLS_TBARCENTER = 'e-toolbar-center';\nvar CLS_TBARPOS = 'e-tbar-pos';\nvar CLS_HSCROLLCNT = 'e-hscroll-content';\nvar CLS_VSCROLLCNT = 'e-vscroll-content';\nvar CLS_HSCROLLBAR = 'e-hscroll-bar';\nvar CLS_POPUPNAV = 'e-hor-nav';\nvar CLS_POPUPCLASS = 'e-toolbar-pop';\nvar CLS_POPUP = 'e-toolbar-popup';\nvar CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nvar CLS_TBARNAVACT = 'e-nav-active';\nvar CLS_TBARIGNORE = 'e-ignore';\nvar CLS_POPPRI = 'e-popup-alone';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_MULTIROW = 'e-toolbar-multirow';\nvar CLS_MULTIROWPOS = 'e-multirow-pos';\nvar CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nvar CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nvar CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nvar CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nvar CLS_EXTENDPOPUP = 'e-expended-nav';\nvar CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\n\nvar Item =\n/** @class */\nfunction (_super) {\n  __extends(Item, _super);\n\n  function Item() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], Item.prototype, \"id\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"text\", void 0);\n\n  __decorate([Property('auto')], Item.prototype, \"width\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], Item.prototype, \"showAlwaysInPopup\", void 0);\n\n  __decorate([Property(false)], Item.prototype, \"disabled\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"prefixIcon\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"suffixIcon\", void 0);\n\n  __decorate([Property(true)], Item.prototype, \"visible\", void 0);\n\n  __decorate([Property('None')], Item.prototype, \"overflow\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"template\", void 0);\n\n  __decorate([Property('Button')], Item.prototype, \"type\", void 0);\n\n  __decorate([Property('Both')], Item.prototype, \"showTextOn\", void 0);\n\n  __decorate([Property(null)], Item.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"tooltipText\", void 0);\n\n  __decorate([Property('Left')], Item.prototype, \"align\", void 0);\n\n  __decorate([Event()], Item.prototype, \"click\", void 0);\n\n  return Item;\n}(ChildProperty);\n\nexport { Item };\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\n\nvar Toolbar =\n/** @class */\nfunction (_super) {\n  __extends(Toolbar, _super);\n  /**\n   * Initializes a new instance of the Toolbar class.\n   *\n   * @param {ToolbarModel} options  - Specifies Toolbar model properties as options.\n   * @param { string | HTMLElement} element  - Specifies the element that is rendered as a Toolbar.\n   */\n\n\n  function Toolbar(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.resizeContext = _this.resize.bind(_this);\n    /**\n     * Contains the keyboard configuration of the Toolbar.\n     */\n\n    _this.keyConfigs = {\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow',\n      popupOpen: 'enter',\n      popupClose: 'escape',\n      tab: 'tab',\n      home: 'home',\n      end: 'end'\n    };\n    return _this;\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   *\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.destroy = function () {\n    var _this = this;\n\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    var btnItems = this.element.querySelectorAll('.e-control.e-btn');\n    [].slice.call(btnItems).forEach(function (el) {\n      if (!isNOU(el) && !isNOU(el.ej2_instances) && !isNOU(el.ej2_instances[0]) && !el.ej2_instances[0].isDestroyed) {\n        el.ej2_instances[0].destroy();\n      }\n    });\n    this.unwireEvents();\n    this.tempId.forEach(function (ele) {\n      if (!isNOU(_this.element.querySelector(ele))) {\n        document.body.appendChild(_this.element.querySelector(ele)).style.display = 'none';\n      }\n    });\n    this.destroyItems();\n\n    while (this.element.lastElementChild) {\n      this.element.removeChild(this.element.lastElementChild);\n    }\n\n    if (this.trgtEle) {\n      this.element.appendChild(this.ctrlTem);\n      this.trgtEle = null;\n      this.ctrlTem = null;\n    }\n\n    if (this.popObj) {\n      this.popObj.destroy();\n      detach(this.popObj.element);\n    }\n\n    if (this.activeEle) {\n      this.activeEle = null;\n    }\n\n    this.popObj = null;\n    this.tbarAlign = null;\n    this.tbarItemsCol = [];\n    this.remove(this.element, 'e-toolpop');\n\n    if (this.cssClass) {\n      removeClass([this.element], this.cssClass.split(' '));\n    }\n\n    this.element.removeAttribute('style');\n    ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n      return _this.element.removeAttribute(attrb);\n    });\n\n    _super.prototype.destroy.call(this);\n  };\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Toolbar.prototype.preRender = function () {\n    var eventArgs = {\n      enableCollision: this.enableCollision,\n      scrollStep: this.scrollStep\n    };\n    this.trigger('beforeCreate', eventArgs);\n    this.enableCollision = eventArgs.enableCollision;\n    this.scrollStep = eventArgs.scrollStep;\n    this.scrollModule = null;\n    this.popObj = null;\n    this.tempId = [];\n    this.tbarItemsCol = this.items;\n    this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n    this.isExtendedOpen = false;\n    this.popupPriCount = 0;\n\n    if (this.enableRtl) {\n      this.add(this.element, CLS_RTL);\n    }\n  };\n\n  Toolbar.prototype.wireEvents = function () {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n    window.addEventListener('resize', this.resizeContext);\n\n    if (this.allowKeyboard) {\n      this.wireKeyboardEvent();\n    }\n  };\n\n  Toolbar.prototype.wireKeyboardEvent = function () {\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n    this.element.setAttribute('tabIndex', '0');\n  };\n\n  Toolbar.prototype.unwireKeyboardEvent = function () {\n    if (this.keyModule) {\n      EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n      this.keyModule.destroy();\n      this.keyModule = null;\n    }\n  };\n\n  Toolbar.prototype.docKeyDown = function (e) {\n    if (e.target.tagName === 'INPUT') {\n      return;\n    }\n\n    var popCheck = !isNOU(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n\n    if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n\n    var keyCheck = e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36;\n\n    if (keyCheck) {\n      e.preventDefault();\n    }\n  };\n\n  Toolbar.prototype.unwireEvents = function () {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n    this.destroyScroll();\n    this.unwireKeyboardEvent();\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(document, 'scroll', this.docEvent);\n    EventHandler.remove(document, 'click', this.docEvent);\n  };\n\n  Toolbar.prototype.clearProperty = function () {\n    this.tbarEle = [];\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n  };\n\n  Toolbar.prototype.docEvent = function (e) {\n    var popEle = closest(e.target, '.e-popup');\n\n    if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n  };\n\n  Toolbar.prototype.destroyScroll = function () {\n    if (this.scrollModule) {\n      if (this.tbarAlign) {\n        this.add(this.scrollModule.element, CLS_TBARPOS);\n      }\n\n      this.scrollModule.destroy();\n      this.scrollModule = null;\n    }\n  };\n\n  Toolbar.prototype.destroyItems = function () {\n    if (this.element) {\n      [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n        detach(el);\n      });\n    }\n\n    if (this.tbarAlign) {\n      var tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n      [].slice.call(tbarItems.children).forEach(function (el) {\n        detach(el);\n      });\n      this.tbarAlign = false;\n      this.remove(tbarItems, CLS_TBARPOS);\n    }\n\n    this.clearProperty();\n  };\n\n  Toolbar.prototype.destroyMode = function () {\n    if (this.scrollModule) {\n      this.remove(this.scrollModule.element, CLS_RTL);\n      this.destroyScroll();\n    }\n\n    this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n    this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n    var tempEle = this.element.querySelector('.e-toolbar-multirow');\n\n    if (tempEle) {\n      this.remove(tempEle, CLS_MULTIROW);\n    }\n\n    if (this.popObj) {\n      this.popupRefresh(this.popObj.element, true);\n    }\n  };\n\n  Toolbar.prototype.add = function (ele, val) {\n    ele.classList.add(val);\n  };\n\n  Toolbar.prototype.remove = function (ele, val) {\n    ele.classList.remove(val);\n  };\n\n  Toolbar.prototype.elementFocus = function (ele) {\n    var fChild = ele.firstElementChild;\n\n    if (fChild) {\n      fChild.focus();\n      this.activeEleSwitch(ele);\n    } else {\n      ele.focus();\n    }\n  };\n\n  Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n    var clst;\n\n    if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n      clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n    } else if (this.element === trgt || tbrNavChk) {\n      clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n    } else {\n      clst = closest(trgt, '.' + CLS_ITEM);\n    }\n\n    return clst;\n  };\n\n  Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n    var popObj = this.popObj;\n    var rootEle = this.element;\n    var popAnimate = {\n      name: 'FadeOut',\n      duration: 100\n    };\n    var value = e.action === 'moveUp' ? 'previous' : 'next';\n    var ele;\n    var nodes;\n\n    switch (e.action) {\n      case 'moveRight':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (rootEle === trgt) {\n          this.elementFocus(clst);\n        } else if (!navChk) {\n          this.eleFocus(clst, 'next');\n        }\n\n        break;\n\n      case 'moveLeft':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (!navChk) {\n          this.eleFocus(clst, 'previous');\n        }\n\n        break;\n\n      case 'home':\n      case 'end':\n        if (clst) {\n          var popupCheck = closest(clst, '.e-popup');\n          var extendedPopup = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n\n          if (this.overflowMode === 'Extended' && extendedPopup && extendedPopup.classList.contains('e-popup-open')) {\n            popupCheck = e.action === 'end' ? extendedPopup : null;\n          }\n\n          if (popupCheck) {\n            if (isVisible(this.popObj.element)) {\n              nodes = [].slice.call(popupCheck.children);\n\n              if (e.action === 'home') {\n                ele = nodes[0];\n              } else {\n                ele = nodes[nodes.length - 1];\n              }\n            }\n          } else {\n            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ')');\n\n            if (e.action === 'home') {\n              ele = nodes[0];\n            } else {\n              ele = nodes[nodes.length - 1];\n            }\n          }\n\n          if (ele) {\n            this.elementFocus(ele);\n          }\n        }\n\n        break;\n\n      case 'moveUp':\n      case 'moveDown':\n        if (!this.isVertical) {\n          if (popObj && closest(trgt, '.e-popup')) {\n            var popEle = popObj.element;\n            var popFrstEle = popEle.firstElementChild;\n\n            if (value === 'previous' && popFrstEle === clst || value === 'next' && popEle.lastElementChild === clst) {\n              return;\n            } else {\n              this.eleFocus(clst, value);\n            }\n          } else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n            this.elementFocus(clst);\n          }\n        } else {\n          if (e.action === 'moveUp') {\n            this.eleFocus(clst, 'previous');\n          } else {\n            this.eleFocus(clst, 'next');\n          }\n        }\n\n        break;\n\n      case 'tab':\n        if (!scrollChk && !navChk) {\n          var ele_1 = clst.firstElementChild;\n\n          if (rootEle === trgt) {\n            if (this.activeEle) {\n              this.activeEle.focus();\n            } else {\n              this.activeEleRemove(ele_1);\n              ele_1.focus();\n            }\n\n            this.element.removeAttribute('tabindex');\n          }\n        }\n\n        break;\n\n      case 'popupClose':\n        if (popObj && this.overflowMode !== 'Extended') {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n\n      case 'popupOpen':\n        if (!navChk) {\n          return;\n        }\n\n        if (popObj && !isVisible(popObj.element)) {\n          popObj.element.style.top = rootEle.offsetHeight + 'px';\n          popObj.show({\n            name: 'FadeIn',\n            duration: 100\n          });\n        } else {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n    }\n  };\n\n  Toolbar.prototype.keyActionHandler = function (e) {\n    var trgt = e.target;\n\n    if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {\n      return;\n    }\n\n    e.preventDefault();\n    var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n    var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n    var clst = this.clstElement(tbrNavChk, trgt);\n\n    if (clst || tbarScrollChk) {\n      this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n    }\n  };\n  /**\n   * Specifies the value to disable/enable the Toolbar component.\n   * When set to `true`, the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.disable = function (value) {\n    var rootEle = this.element;\n\n    if (value) {\n      rootEle.classList.add(CLS_DISABLE);\n    } else {\n      rootEle.classList.remove(CLS_DISABLE);\n    }\n\n    rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n\n    if (this.activeEle) {\n      this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n    }\n\n    if (this.scrollModule) {\n      this.scrollModule.disable(value);\n    }\n\n    if (this.popObj) {\n      if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n        this.popObj.hide();\n      }\n\n      rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n    }\n  };\n\n  Toolbar.prototype.eleContains = function (el) {\n    return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el);\n  };\n\n  Toolbar.prototype.eleFocus = function (closest, pos) {\n    var sib = Object(closest)[pos + 'ElementSibling'];\n\n    if (sib) {\n      var skipEle = this.eleContains(sib);\n\n      if (skipEle) {\n        this.eleFocus(sib, pos);\n        return;\n      }\n\n      this.elementFocus(sib);\n    } else if (this.tbarAlign) {\n      var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\n      if (!isNOU(elem) && elem.children.length === 0) {\n        elem = Object(elem)[pos + 'ElementSibling'];\n      }\n\n      if (!isNOU(elem) && elem.children.length > 0) {\n        if (pos === 'next') {\n          var el = elem.querySelector('.' + CLS_ITEM);\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            el.firstElementChild.focus();\n            this.activeEleSwitch(el);\n          }\n        } else {\n          var el = elem.lastElementChild;\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            this.elementFocus(el);\n          }\n        }\n      }\n    }\n  };\n\n  Toolbar.prototype.clickHandler = function (e) {\n    var _this = this;\n\n    var trgt = e.target;\n    var ele = this.element;\n    var isPopupElement = !isNOU(closest(trgt, '.' + CLS_POPUPCLASS));\n    var clsList = trgt.classList;\n    var popupNav = closest(trgt, '.' + CLS_TBARNAV);\n\n    if (!popupNav) {\n      popupNav = trgt;\n    }\n\n    if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll') && clsList.contains(CLS_TBARNAV)) {\n      clsList = trgt.querySelector('.e-icons').classList;\n    }\n\n    if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n      this.popupClickHandler(ele, popupNav, CLS_RTL);\n    }\n\n    var itemObj;\n    var clst = closest(e.target, '.' + CLS_ITEM);\n\n    if ((isNOU(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n      return;\n    }\n\n    if (clst) {\n      var tempItem = this.items[this.tbarEle.indexOf(clst)];\n      itemObj = tempItem;\n    }\n\n    var eventArgs = {\n      originalEvent: e,\n      item: itemObj\n    };\n\n    if (itemObj && !isNOU(itemObj.click)) {\n      this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n    }\n\n    if (!eventArgs.cancel) {\n      this.trigger('clicked', eventArgs, function (clickedArgs) {\n        if (!isNOU(_this.popObj) && isPopupElement && !clickedArgs.cancel && _this.overflowMode === 'Popup' && clickedArgs.item && clickedArgs.item.type !== 'Input') {\n          _this.popObj.hide({\n            name: 'FadeOut',\n            duration: 100\n          });\n        }\n      });\n    }\n  };\n\n  Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n    var popObj = this.popObj;\n\n    if (isVisible(popObj.element)) {\n      popupNav.classList.remove(CLS_TBARNAVACT);\n      popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    } else {\n      if (ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = true;\n        popObj.position = {\n          X: 'left',\n          Y: 'top'\n        };\n      }\n\n      if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = false;\n        popObj.position = {\n          X: 'right',\n          Y: 'top'\n        };\n      }\n\n      popObj.dataBind();\n      popObj.refreshPosition();\n      popObj.element.style.top = this.getElementOffsetY() + 'px';\n\n      if (this.overflowMode === 'Extended') {\n        popObj.element.style.minHeight = '0px';\n      }\n\n      popupNav.classList.add(CLS_TBARNAVACT);\n      popObj.show({\n        name: 'FadeIn',\n        duration: 100\n      });\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Toolbar.prototype.render = function () {\n    this.initialize();\n    this.renderControl();\n    this.wireEvents();\n    this.renderComplete();\n  };\n\n  Toolbar.prototype.initialize = function () {\n    var width = formatUnit(this.width);\n    var height = formatUnit(this.height);\n\n    if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n      setStyle(this.element, {\n        'height': height\n      });\n    }\n\n    setStyle(this.element, {\n      'width': width\n    });\n    var ariaAttr = {\n      'role': 'toolbar',\n      'aria-disabled': 'false',\n      'aria-haspopup': 'false',\n      'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical'\n    };\n    attributes(this.element, ariaAttr);\n\n    if (this.cssClass) {\n      addClass([this.element], this.cssClass.split(' '));\n    }\n  };\n\n  Toolbar.prototype.renderControl = function () {\n    var ele = this.element;\n    this.trgtEle = ele.children.length > 0 ? ele.querySelector('div') : null;\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n    this.renderItems();\n    this.renderLayout();\n  };\n\n  Toolbar.prototype.renderLayout = function () {\n    this.renderOverflowMode();\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n      this.popupRefresh(this.popObj.element, false);\n    }\n\n    this.separator();\n  };\n\n  Toolbar.prototype.itemsAlign = function (items, itemEleDom) {\n    var innerItem;\n    var innerPos;\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    for (var i = 0; i < items.length; i++) {\n      innerItem = this.renderSubComponent(items[i], i);\n\n      if (this.tbarEle.indexOf(innerItem) === -1) {\n        this.tbarEle.push(innerItem);\n      }\n\n      if (!this.tbarAlign) {\n        this.tbarItemAlign(items[i], itemEleDom, i);\n      }\n\n      innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\n      if (innerPos) {\n        if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n          this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n        }\n\n        innerPos.appendChild(innerItem);\n      } else {\n        itemEleDom.appendChild(innerItem);\n      }\n    }\n\n    if (this.isReact) {\n      var portals = 'portals';\n      this.notify('render-react-toolbar-template', this[portals]);\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * @hidden\n   * @returns {void}\n   */\n\n\n  Toolbar.prototype.changeOrientation = function () {\n    var ele = this.element;\n\n    if (this.isVertical) {\n      ele.classList.remove(CLS_VERTICAL);\n      this.isVertical = false;\n\n      if (this.height === 'auto' || this.height === '100%') {\n        ele.style.height = this.height;\n      }\n\n      ele.setAttribute('aria-orientation', 'horizontal');\n    } else {\n      ele.classList.add(CLS_VERTICAL);\n      this.isVertical = true;\n      ele.setAttribute('aria-orientation', 'vertical');\n      setStyle(this.element, {\n        'height': formatUnit(this.height),\n        'width': formatUnit(this.width)\n      });\n    }\n\n    this.destroyMode();\n    this.refreshOverflow();\n  };\n\n  Toolbar.prototype.initScroll = function (element, innerItems) {\n    if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n      if (this.tbarAlign) {\n        this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n      }\n\n      if (this.isVertical) {\n        this.scrollModule = new VScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      } else {\n        this.scrollModule = new HScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      }\n\n      if (this.cssClass) {\n        addClass([innerItems[0]], this.cssClass.split(' '));\n      }\n\n      this.remove(this.scrollModule.element, CLS_TBARPOS);\n      setStyle(this.element, {\n        overflow: 'hidden'\n      });\n    }\n  };\n\n  Toolbar.prototype.itemWidthCal = function (items) {\n    var _this = this;\n\n    var width = 0;\n    var style;\n    [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n      if (isVisible(el)) {\n        style = window.getComputedStyle(el);\n        width += _this.isVertical ? el.offsetHeight : el.offsetWidth;\n        width += parseFloat(_this.isVertical ? style.marginTop : style.marginRight);\n        width += parseFloat(_this.isVertical ? style.marginBottom : style.marginLeft);\n      }\n    });\n    return width;\n  };\n\n  Toolbar.prototype.getScrollCntEle = function (innerItem) {\n    var trgClass = this.isVertical ? '.e-vscroll-content' : '.e-hscroll-content';\n    return innerItem.querySelector(trgClass);\n  };\n\n  Toolbar.prototype.checkOverflow = function (element, innerItem) {\n    if (isNOU(element) || isNOU(innerItem) || !isVisible(element)) {\n      return false;\n    }\n\n    var eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n    var itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n\n    if (this.tbarAlign || this.scrollModule || eleWidth === itemWidth) {\n      itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n    }\n\n    var popNav = element.querySelector('.' + CLS_TBARNAV);\n    var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n    var navEleWidth = 0;\n\n    if (popNav) {\n      navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n    } else if (scrollNav) {\n      navEleWidth = this.isVertical ? scrollNav.offsetHeight * 2 : scrollNav.offsetWidth * 2;\n    }\n\n    if (itemWidth > eleWidth - navEleWidth) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * Refresh the whole Toolbar component without re-rendering.\n   * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n   * - It will refresh the Toolbar component after loading items dynamically.\n   *\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.refreshOverflow = function () {\n    this.resize();\n  };\n\n  Toolbar.prototype.toolbarAlign = function (innerItems) {\n    if (this.tbarAlign) {\n      this.add(innerItems, CLS_TBARPOS);\n      this.itemPositioning();\n    }\n  };\n\n  Toolbar.prototype.renderOverflowMode = function () {\n    var ele = this.element;\n    var innerItems = ele.querySelector('.' + CLS_ITEMS);\n    var priorityCheck = this.popupPriCount > 0;\n\n    if (ele && ele.children.length > 0) {\n      this.offsetWid = ele.offsetWidth;\n      this.remove(this.element, 'e-toolpop');\n\n      if (Browser.info.name === 'msie' && this.height === 'auto') {\n        ele.style.height = '';\n      }\n\n      switch (this.overflowMode) {\n        case 'Scrollable':\n          if (isNOU(this.scrollModule)) {\n            this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n          }\n\n          break;\n\n        case 'Popup':\n          this.add(this.element, 'e-toolpop');\n\n          if (this.tbarAlign) {\n            this.removePositioning();\n          }\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n          break;\n\n        case 'MultiRow':\n          this.add(innerItems, CLS_MULTIROW);\n\n          if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n            this.removePositioning();\n            this.add(innerItems, CLS_MULTIROWPOS);\n          }\n\n          if (ele.style.overflow === 'hidden') {\n            ele.style.overflow = '';\n          }\n\n          if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n            ele.style.height = 'auto';\n          }\n\n          break;\n\n        case 'Extended':\n          this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            if (this.tbarAlign) {\n              this.removePositioning();\n            }\n\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n      }\n    }\n  };\n\n  Toolbar.prototype.setOverflowAttributes = function (ele) {\n    this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n  };\n\n  Toolbar.prototype.separator = function () {\n    var element = this.element;\n    var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n    var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n    var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n    var eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n\n    if (eleInlineItem !== null) {\n      if (this.overflowMode === 'MultiRow') {\n        eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n      } else if (this.overflowMode === 'Extended') {\n        eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n      }\n    }\n\n    for (var i = 0; i <= eleItem.length - 1; i++) {\n      if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n        if (this.overflowMode === 'MultiRow') {\n          eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n        } else if (this.overflowMode === 'Extended') {\n          eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n        }\n      }\n    }\n  };\n\n  Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n    var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    var vertical = this.isVertical;\n\n    if (!innerNav) {\n      this.createPopupIcon(ele);\n    }\n\n    innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    var innerNavDom = vertical ? innerNav.offsetHeight : innerNav.offsetWidth;\n    var eleWidth = (vertical ? ele.offsetHeight : ele.offsetWidth) - innerNavDom;\n    this.element.classList.remove('e-rtl');\n    setStyle(this.element, {\n      direction: 'initial'\n    });\n    this.checkPriority(ele, innerEle, eleWidth, true);\n\n    if (this.enableRtl) {\n      this.element.classList.add('e-rtl');\n    }\n\n    this.element.style.removeProperty('direction');\n    this.createPopup();\n  };\n\n  Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {\n    var element = tbarObj.element;\n    var poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n    var nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n    var nodeIndex = 0;\n    var nodePri = 0;\n    poppedEle.forEach(function (el, index) {\n      nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n\n      if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n        if (tbarObj.tbResize && nodes.length > index) {\n          ele.insertBefore(el, nodes[index]);\n          ++nodePri;\n        } else {\n          ele.insertBefore(el, ele.children[nodes.length]);\n          ++nodePri;\n        }\n      } else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (el.classList.contains(CLS_POPOVERFLOW)) {\n        popupPri.push(el);\n      } else if (tbarObj.tbResize) {\n        ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n        ++nodeIndex;\n      } else {\n        ele.appendChild(el);\n      }\n\n      if (el.classList.contains(CLS_SEPARATOR)) {\n        setStyle(el, {\n          display: '',\n          height: sepHeight + 'px'\n        });\n      } else {\n        setStyle(el, {\n          display: '',\n          height: eleHeight + 'px'\n        });\n      }\n    });\n    popupPri.forEach(function (el) {\n      ele.appendChild(el);\n    });\n    var tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\n    for (var i = tbarEle.length - 1; i >= 0; i--) {\n      var tbarElement = tbarEle[i];\n\n      if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n        setStyle(tbarElement, {\n          display: 'none'\n        });\n      } else {\n        break;\n      }\n    }\n  };\n\n  Toolbar.prototype.createPopup = function () {\n    var element = this.element;\n    var sepHeight;\n    var sepItem;\n\n    if (this.overflowMode === 'Extended') {\n      sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n      sepHeight = element.style.height === 'auto' || element.style.height === '' ? null : sepItem.offsetHeight;\n    }\n\n    var eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n    var eleHeight = element.style.height === 'auto' || element.style.height === '' ? null : eleItem && eleItem.offsetHeight;\n    var ele;\n    var popupPri = [];\n\n    if (select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element)) {\n      ele = select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element);\n    } else {\n      var extendEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n      });\n      var popupEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS\n      });\n      ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n    }\n\n    this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n    this.popupInit(element, ele);\n  };\n\n  Toolbar.prototype.getElementOffsetY = function () {\n    return this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ? this.element.clientHeight : this.element.offsetHeight;\n  };\n\n  Toolbar.prototype.popupInit = function (element, ele) {\n    if (!this.popObj) {\n      element.appendChild(ele);\n\n      if (this.cssClass) {\n        addClass([ele], this.cssClass.split(' '));\n      }\n\n      setStyle(this.element, {\n        overflow: ''\n      });\n      var eleStyles = window.getComputedStyle(this.element);\n      var popup = new Popup(null, {\n        relateTo: this.element,\n        offsetY: this.isVertical ? 0 : this.getElementOffsetY(),\n        enableRtl: this.enableRtl,\n        open: this.popupOpen.bind(this),\n        close: this.popupClose.bind(this),\n        collision: {\n          Y: this.enableCollision ? 'flip' : 'none'\n        },\n        position: this.enableRtl ? {\n          X: 'left',\n          Y: 'top'\n        } : {\n          X: 'right',\n          Y: 'top'\n        }\n      });\n      popup.appendTo(ele);\n\n      if (this.overflowMode === 'Extended') {\n        popup.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n        popup.offsetX = 0;\n      }\n\n      EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n      EventHandler.add(document, 'click ', this.docEvent.bind(this));\n      popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\n      if (this.isVertical) {\n        popup.element.style.visibility = 'hidden';\n      }\n\n      if (this.isExtendedOpen) {\n        var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n      } else {\n        popup.hide();\n      }\n\n      this.popObj = popup;\n      this.element.setAttribute('aria-haspopup', 'true');\n    } else {\n      var popupEle = this.popObj.element;\n      setStyle(popupEle, {\n        maxHeight: '',\n        display: 'block'\n      });\n      setStyle(popupEle, {\n        maxHeight: popupEle.offsetHeight + 'px',\n        display: ''\n      });\n    }\n  };\n\n  Toolbar.prototype.tbarPopupHandler = function (isOpen) {\n    if (this.overflowMode === 'Extended') {\n      if (isOpen) {\n        this.add(this.element, CLS_EXTENDEDPOPOPEN);\n      } else {\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Toolbar.prototype.popupOpen = function (e) {\n    var popObj = this.popObj;\n\n    if (!this.isVertical) {\n      popObj.offsetY = this.getElementOffsetY();\n      popObj.dataBind();\n    }\n\n    var popupEle = this.popObj.element;\n    var toolEle = this.popObj.element.parentElement;\n    var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n    setStyle(popObj.element, {\n      height: 'auto',\n      maxHeight: ''\n    });\n    popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\n    if (this.overflowMode === 'Extended') {\n      popObj.element.style.minHeight = '';\n    }\n\n    var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n    var popIcon = popupNav.firstElementChild;\n    popupNav.classList.add(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n    this.tbarPopupHandler(true);\n    var scrollVal = isNOU(window.scrollY) ? 0 : window.scrollY;\n\n    if (!this.isVertical && window.innerHeight + scrollVal < popupElePos && this.element.offsetTop < popupEle.offsetHeight) {\n      var overflowHeight = popupEle.offsetHeight - (popupElePos - window.innerHeight - scrollVal + 5);\n      popObj.height = overflowHeight + 'px';\n\n      for (var i = 0; i <= popupEle.childElementCount; i++) {\n        var ele = popupEle.children[i];\n\n        if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n          overflowHeight = ele.offsetTop;\n          break;\n        }\n      }\n\n      setStyle(popObj.element, {\n        maxHeight: overflowHeight + 'px'\n      });\n    } else if (this.isVertical) {\n      var tbEleData = this.element.getBoundingClientRect();\n      setStyle(popObj.element, {\n        maxHeight: tbEleData.top + this.element.offsetHeight + 'px',\n        bottom: 0,\n        visibility: ''\n      });\n    }\n\n    if (popObj) {\n      var popupOffset = popupEle.getBoundingClientRect();\n\n      if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {\n        popObj.collision = {\n          Y: 'none'\n        };\n        popObj.dataBind();\n      }\n\n      popObj.refreshPosition();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Toolbar.prototype.popupClose = function (e) {\n    var element = this.element;\n    var popupNav = element.querySelector('.' + CLS_TBARNAV);\n    var popIcon = popupNav.firstElementChild;\n    popupNav.classList.remove(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n    this.tbarPopupHandler(false);\n  };\n\n  Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n    var popPriority = this.popupPriCount > 0;\n    var len = inEle.length;\n    var eleWid = eleWidth;\n    var eleOffset;\n    var checkoffset;\n    var sepCheck = 0;\n    var itemCount = 0;\n    var itemPopCount = 0;\n\n    var checkClass = function (ele, val) {\n      var rVal = false;\n      val.forEach(function (cls) {\n        if (ele.classList.contains(cls)) {\n          rVal = true;\n        }\n      });\n      return rVal;\n    };\n\n    for (var i = len - 1; i >= 0; i--) {\n      var mrgn = void 0;\n      var compuStyle = window.getComputedStyle(inEle[i]);\n\n      if (this.isVertical) {\n        mrgn = parseFloat(compuStyle.marginTop);\n        mrgn += parseFloat(compuStyle.marginBottom);\n      } else {\n        mrgn = parseFloat(compuStyle.marginRight);\n        mrgn += parseFloat(compuStyle.marginLeft);\n      }\n\n      var fstEleCheck = inEle[i] === this.tbarEle[0];\n\n      if (fstEleCheck) {\n        this.tbarEleMrgn = mrgn;\n      }\n\n      eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n      var eleWid_1 = fstEleCheck ? eleOffset + mrgn : eleOffset;\n\n      if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n        inEle[i].classList.add(CLS_POPUP);\n\n        if (this.isVertical) {\n          setStyle(inEle[i], {\n            display: 'none',\n            minHeight: eleWid_1 + 'px'\n          });\n        } else {\n          setStyle(inEle[i], {\n            display: 'none',\n            minWidth: eleWid_1 + 'px'\n          });\n        }\n\n        itemPopCount++;\n      }\n\n      if (this.isVertical) {\n        checkoffset = inEle[i].offsetTop + inEle[i].offsetHeight + mrgn > eleWidth;\n      } else {\n        checkoffset = inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn > eleWidth;\n      }\n\n      if (checkoffset) {\n        if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n          if (this.overflowMode === 'Extended') {\n            if (itemCount === itemPopCount) {\n              var sepEle = inEle[i];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                inEle[i].classList.add(CLS_POPUP);\n                itemPopCount++;\n              }\n            }\n\n            itemCount++;\n          } else if (this.overflowMode === 'Popup') {\n            if (sepCheck > 0 && itemCount === itemPopCount) {\n              var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                setStyle(sepEle, {\n                  display: 'none'\n                });\n              }\n            }\n\n            sepCheck++;\n            itemCount = 0;\n            itemPopCount = 0;\n          }\n        } else {\n          itemCount++;\n        }\n\n        if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        } else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n          inEle[i].classList.add(CLS_POPUP);\n\n          if (this.isVertical) {\n            setStyle(inEle[i], {\n              display: 'none',\n              minHeight: eleWid_1 + 'px'\n            });\n          } else {\n            setStyle(inEle[i], {\n              display: 'none',\n              minWidth: eleWid_1 + 'px'\n            });\n          }\n\n          itemPopCount++;\n        } else {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        }\n      }\n    }\n\n    if (pre) {\n      var popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n      this.checkPriority(ele, popedEle, eleWid, false);\n    }\n  };\n\n  Toolbar.prototype.createPopupIcon = function (element) {\n    var id = element.id.concat('_nav');\n    var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n    className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n    var nav = this.createElement('div', {\n      id: id,\n      className: className\n    });\n\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n      nav.classList.add('e-ie-align');\n    }\n\n    var navItem = this.createElement('div', {\n      className: CLS_POPUPDOWN + ' e-icons'\n    });\n    nav.appendChild(navItem);\n    nav.setAttribute('tabindex', '0');\n    nav.setAttribute('role', 'list');\n    element.appendChild(nav);\n  };\n\n  Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n    var ignoreCount = ig;\n    var popEle = this.popObj.element;\n    var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n    var priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\n    var checkClass = function (ele, val) {\n      return ele.classList.contains(val);\n    };\n\n    if (selectAll(query, inEle).length === 0) {\n      var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n      var ignoreCheck = !isNOU(eleSep) && checkClass(eleSep, CLS_TBARIGNORE);\n\n      if (!isNOU(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep) || ignoreCheck) {\n        var sepDisplay = 'none';\n        eleSep.style.display = 'inherit';\n        var eleSepWidth = eleSep.offsetWidth + parseFloat(window.getComputedStyle(eleSep).marginRight) * 2;\n        var prevSep = eleSep.previousElementSibling;\n\n        if (elWid + eleSepWidth < wid || des) {\n          inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n\n          if (!isNOU(prevSep)) {\n            prevSep.style.display = '';\n          }\n        } else {\n          if (prevSep.classList.contains(CLS_SEPARATOR)) {\n            prevSep.style.display = sepDisplay;\n          }\n        }\n\n        eleSep.style.display = '';\n      } else {\n        inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n      }\n    } else {\n      inEle.insertBefore(el, inEle.children[indx + ignoreCount - priEleCnt]);\n    }\n  };\n\n  Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n    var _this = this;\n\n    var ele = this.element;\n    var isVer = this.isVertical;\n    var innerEle = ele.querySelector('.' + CLS_ITEMS);\n    var popNav = ele.querySelector('.' + CLS_TBARNAV);\n\n    if (isNOU(popNav)) {\n      return;\n    }\n\n    innerEle.removeAttribute('style');\n    popupEle.style.display = 'block';\n    var dimension;\n\n    if (isVer) {\n      dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n    } else {\n      dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n    }\n\n    var popupEleWidth = 0;\n    [].slice.call(popupEle.children).forEach(function (el) {\n      popupEleWidth += _this.popupEleWidth(el);\n      setStyle(el, {\n        'position': ''\n      });\n    });\n\n    if (dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth) > popupEleWidth && this.popupPriCount === 0) {\n      destroy = true;\n    }\n\n    this.popupEleRefresh(dimension, popupEle, destroy);\n    popupEle.style.display = '';\n\n    if (popupEle.children.length === 0 && popNav && this.popObj) {\n      detach(popNav);\n      popNav = null;\n      this.popObj.destroy();\n      detach(this.popObj.element);\n      this.popObj = null;\n      ele.setAttribute('aria-haspopup', 'false');\n    }\n  };\n\n  Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n    var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n    var ignoreInx = [];\n    var count = 0;\n\n    if (ignoreEle.length > 0) {\n      ignoreEle.forEach(function (ele) {\n        ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n      });\n    } else {\n      return 0;\n    }\n\n    ignoreInx.forEach(function (val) {\n      if (val <= index) {\n        count++;\n      }\n    });\n    return count;\n  };\n\n  Toolbar.prototype.checkPopupRefresh = function (root, popEle) {\n    popEle.style.display = 'block';\n    var elWid = this.popupEleWidth(popEle.firstElementChild);\n    popEle.firstElementChild.style.removeProperty('Position');\n    var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n    var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n    popEle.style.removeProperty('display');\n\n    if (tbarWidth > elWid + tbarItemsWid) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Toolbar.prototype.popupEleWidth = function (el) {\n    el.style.position = 'absolute';\n    var elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n    var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\n    if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n      var btn = el.children[0];\n\n      if (!isNOU(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n        btnText.style.display = 'none';\n      } else if (!isNOU(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n        btnText.style.display = 'block';\n      }\n\n      btn.style.minWidth = '0%';\n      elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n      btn.style.minWidth = '';\n      btn.style.minHeight = '';\n\n      if (!isNOU(btnText)) {\n        btnText.style.display = '';\n      }\n    }\n\n    return elWidth;\n  };\n\n  Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n    var popPriority = this.popupPriCount > 0;\n    var eleSplice = this.tbarEle;\n    var priEleCnt;\n    var index;\n    var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n    var ignoreCount = 0;\n\n    var _loop_1 = function (el) {\n      if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n        return \"continue\";\n      }\n\n      var elWidth = this_1.popupEleWidth(el);\n\n      if (el === this_1.tbarEle[0]) {\n        elWidth += this_1.tbarEleMrgn;\n      }\n\n      el.style.position = '';\n\n      if (elWidth < width || destroy) {\n        setStyle(el, {\n          minWidth: '',\n          height: '',\n          minHeight: ''\n        });\n\n        if (!el.classList.contains(CLS_POPOVERFLOW)) {\n          el.classList.remove(CLS_POPUP);\n        }\n\n        index = this_1.tbarEle.indexOf(el);\n\n        if (this_1.tbarAlign) {\n          var pos = this_1.items[index].align;\n          index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n          eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];\n          innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n        }\n\n        var sepBeforePri_1 = 0;\n\n        if (this_1.overflowMode !== 'Extended') {\n          eleSplice.slice(0, index).forEach(function (el) {\n            if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n              if (el.classList.contains(CLS_SEPARATOR)) {\n                el.style.display = '';\n                width -= el.offsetWidth;\n              }\n\n              sepBeforePri_1++;\n            }\n          });\n        }\n\n        ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\n        if (el.classList.contains(CLS_TBAROVERFLOW)) {\n          this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n          width -= el.offsetWidth;\n        } else if (index === 0) {\n          innerEle.insertBefore(el, innerEle.firstChild);\n          width -= el.offsetWidth;\n        } else {\n          priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n          innerEle.insertBefore(el, innerEle.children[index + ignoreCount - priEleCnt]);\n          width -= el.offsetWidth;\n        }\n\n        el.style.height = '';\n      } else {\n        return \"break\";\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n      var el = _a[_i];\n\n      var state_1 = _loop_1(el);\n\n      if (state_1 === \"break\") break;\n    }\n\n    var checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (checkOverflow && !destroy) {\n      this.renderOverflowMode();\n    }\n  };\n\n  Toolbar.prototype.removePositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    this.remove(item, CLS_TBARPOS);\n    var innerItem = [].slice.call(item.childNodes);\n    innerItem[1].removeAttribute('style');\n    innerItem[2].removeAttribute('style');\n  };\n\n  Toolbar.prototype.refreshPositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n    this.add(item, CLS_TBARPOS);\n    this.itemPositioning();\n  };\n\n  Toolbar.prototype.itemPositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n    var margin;\n\n    if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n    var innerItem;\n\n    if (this.scrollModule) {\n      var trgClass = this.isVertical ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n      innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n    } else {\n      innerItem = [].slice.call(item.childNodes);\n    }\n\n    if (this.isVertical) {\n      margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n    } else {\n      margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n    }\n\n    var tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n\n    if (popupNav) {\n      tbarWid -= this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth;\n      var popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n      innerItem[2].removeAttribute('style');\n\n      if (this.isVertical) {\n        if (this.enableRtl) {\n          innerItem[2].style.top = popWid;\n        } else {\n          innerItem[2].style.bottom = popWid;\n        }\n      } else {\n        if (this.enableRtl) {\n          innerItem[2].style.left = popWid;\n        } else {\n          innerItem[2].style.right = popWid;\n        }\n      }\n    }\n\n    if (tbarWid <= margin) {\n      return;\n    }\n\n    var value = (tbarWid - margin - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n    innerItem[1].removeAttribute('style');\n    var mrgn = (!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value + 'px';\n\n    if (this.isVertical) {\n      if (this.enableRtl) {\n        innerItem[1].style.marginBottom = mrgn;\n      } else {\n        innerItem[1].style.marginTop = mrgn;\n      }\n    } else {\n      if (this.enableRtl) {\n        innerItem[1].style.marginRight = mrgn;\n      } else {\n        innerItem[1].style.marginLeft = mrgn;\n      }\n    }\n  };\n\n  Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n    var _this = this;\n\n    if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n      return;\n    }\n\n    var alignDiv = [];\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARLEFT\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARCENTER\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARRIGHT\n    }));\n\n    if (pos === 0 && item.align !== 'Left') {\n      alignDiv.forEach(function (ele) {\n        itemEle.appendChild(ele);\n      });\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    } else if (item.align !== 'Left') {\n      var alignEle = itemEle.childNodes;\n      var leftAlign_1 = alignDiv[0];\n      [].slice.call(alignEle).forEach(function (el) {\n        _this.tbarAlgEle.lefts.push(el);\n\n        leftAlign_1.appendChild(el);\n      });\n      itemEle.appendChild(leftAlign_1);\n      itemEle.appendChild(alignDiv[1]);\n      itemEle.appendChild(alignDiv[2]);\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    }\n  };\n\n  Toolbar.prototype.ctrlTemplate = function () {\n    var _this = this;\n\n    this.ctrlTem = this.trgtEle.cloneNode(true);\n    this.add(this.trgtEle, CLS_ITEMS);\n    this.tbarEle = [];\n    var innerEle = [].slice.call(this.trgtEle.children);\n    innerEle.forEach(function (ele) {\n      if (ele.tagName === 'DIV') {\n        _this.tbarEle.push(ele);\n\n        ele.setAttribute('aria-disabled', 'false');\n\n        _this.add(ele, CLS_ITEM);\n      }\n    });\n  };\n\n  Toolbar.prototype.renderItems = function () {\n    var ele = this.element;\n    var items = this.items;\n\n    if (this.trgtEle != null) {\n      this.ctrlTemplate();\n    } else if (ele && items.length > 0) {\n      var itemEleDom = void 0;\n\n      if (ele && ele.children.length > 0) {\n        itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n      }\n\n      if (!itemEleDom) {\n        itemEleDom = this.createElement('div', {\n          className: CLS_ITEMS\n        });\n      }\n\n      this.itemsAlign(items, itemEleDom);\n      ele.appendChild(itemEleDom);\n    }\n  };\n\n  Toolbar.prototype.setAttr = function (attr, element) {\n    var key = Object.keys(attr);\n    var keyVal;\n\n    for (var i = 0; i < key.length; i++) {\n      keyVal = key[i];\n\n      if (keyVal === 'class') {\n        this.add(element, attr[keyVal]);\n      } else {\n        element.setAttribute(keyVal, attr[keyVal]);\n      }\n    }\n  };\n  /**\n   * Enables or disables the specified Toolbar item.\n   *\n   * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n   * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n   * By default, `isEnable` is set to true.\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.enableItems = function (items, isEnable) {\n    var elements = items;\n    var len = elements.length;\n    var ele;\n\n    if (isNOU(isEnable)) {\n      isEnable = true;\n    }\n\n    var enable = function (isEnable, ele) {\n      if (isEnable) {\n        ele.classList.remove(CLS_DISABLE);\n        ele.setAttribute('aria-disabled', 'false');\n      } else {\n        ele.classList.add(CLS_DISABLE);\n        ele.setAttribute('aria-disabled', 'true');\n      }\n    };\n\n    if (!isNOU(len) && len >= 1) {\n      for (var a = 0, element = [].slice.call(elements); a < len; a++) {\n        var itemElement = element[a];\n\n        if (typeof itemElement === 'number') {\n          ele = this.getElementByIndex(itemElement);\n\n          if (isNOU(ele)) {\n            return;\n          } else {\n            elements[a] = ele;\n          }\n        } else {\n          ele = itemElement;\n        }\n\n        enable(isEnable, ele);\n      }\n\n      if (isEnable) {\n        removeClass(elements, CLS_DISABLE);\n      } else {\n        addClass(elements, CLS_DISABLE);\n      }\n    } else {\n      if (typeof elements === 'number') {\n        ele = this.getElementByIndex(elements);\n\n        if (isNOU(ele)) {\n          return;\n        }\n      } else {\n        ele = items;\n      }\n\n      enable(isEnable, ele);\n    }\n  };\n\n  Toolbar.prototype.getElementByIndex = function (index) {\n    if (this.tbarEle[index]) {\n      return this.tbarEle[index];\n    }\n\n    return null;\n  };\n  /**\n   * Adds new items to the Toolbar that accepts an array as Toolbar items.\n   *\n   * @param  {ItemModel[]} items - DOM element or an array of items to be added to the Toolbar.\n   * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.addItems = function (items, index) {\n    var innerItems;\n    this.extendedOpen();\n    var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNOU(itemsDiv)) {\n      this.itemsRerender(items);\n      return;\n    }\n\n    var innerEle;\n    var itemAgn = 'Left';\n\n    if (isNOU(index)) {\n      index = 0;\n    }\n\n    items.forEach(function (e) {\n      if (!isNOU(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n        itemAgn = e.align;\n      }\n    });\n\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var item = items_1[_i];\n\n      if (isNOU(item.type)) {\n        item.type = 'Button';\n      }\n\n      innerItems = selectAll('.' + CLS_ITEM, this.element);\n      item.align = itemAgn;\n      innerEle = this.renderSubComponent(item, index);\n\n      if (this.tbarEle.length >= index && innerItems.length >= 0) {\n        if (isNOU(this.scrollModule)) {\n          this.destroyMode();\n        }\n\n        var algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n        var ele = void 0;\n\n        if (!this.tbarAlign && itemAgn !== 'Left') {\n          this.tbarItemAlign(item, itemsDiv, 1);\n          this.tbarAlign = true;\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.appendChild(innerEle);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n          this.refreshPositioning();\n        } else if (this.tbarAlign) {\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.insertBefore(innerEle, ele.children[index]);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n          this.refreshPositioning();\n        } else if (innerItems.length === 0) {\n          innerItems = selectAll('.' + CLS_ITEMS, this.element);\n          innerItems[0].appendChild(innerEle);\n        } else {\n          innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n        }\n\n        this.items.splice(index, 0, item);\n\n        if (item.template) {\n          this.tbarEle.splice(this.tbarEle.length - 1, 1);\n        }\n\n        this.tbarEle.splice(index, 0, innerEle);\n        index++;\n        this.offsetWid = itemsDiv.offsetWidth;\n      }\n    }\n\n    itemsDiv.style.width = '';\n    this.renderOverflowMode();\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n   *\n   * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n   * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.removeItems = function (args) {\n    var elements = args;\n    var index;\n    var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (typeof elements === 'number') {\n      index = parseInt(args.toString(), 10);\n      this.removeItemByIndex(index, innerItems);\n    } else {\n      if (elements && elements.length > 1) {\n        for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n          var ele = _a[_i];\n          index = this.tbarEle.indexOf(ele);\n          this.removeItemByIndex(index, innerItems);\n          innerItems = selectAll('.' + CLS_ITEM, this.element);\n        }\n      } else {\n        var ele = elements && elements.length && elements.length === 1 ? elements[0] : args;\n        index = innerItems.indexOf(ele);\n        this.removeItemByIndex(index, innerItems);\n      }\n    }\n\n    this.resize();\n  };\n\n  Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n    if (this.tbarEle[index] && innerItems[index]) {\n      var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\n      if (this.tbarAlign) {\n        var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n        this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n      }\n\n      if (this.isReact) {\n        this.clearTemplate();\n      }\n\n      var btnItem = innerItems[index].querySelector('.e-control.e-btn');\n\n      if (!isNOU(btnItem) && !isNOU(btnItem.ej2_instances[0]) && !btnItem.ej2_instances[0].isDestroyed) {\n        btnItem.ej2_instances[0].destroy();\n      }\n\n      detach(innerItems[index]);\n      this.items.splice(eleIdx, 1);\n      this.tbarEle.splice(eleIdx, 1);\n    }\n  };\n\n  Toolbar.prototype.templateRender = function (templateProp, innerEle, item, index) {\n    var itemType = item.type;\n    var eleObj = templateProp;\n    var isComponent;\n\n    if (typeof templateProp === 'object') {\n      isComponent = typeof eleObj.appendTo === 'function';\n    }\n\n    if (typeof templateProp === 'string' || !isComponent) {\n      var templateFn = void 0;\n      var val = templateProp;\n      var regEx = new RegExp(/<(?=.*? .*?\\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\\/\\1>/i);\n      val = typeof templateProp === 'string' ? templateProp.trim() : templateProp;\n\n      try {\n        if (typeof templateProp === 'object' && !isNOU(templateProp.tagName)) {\n          innerEle.appendChild(templateProp);\n        } else if (typeof templateProp === 'string' && regEx.test(val)) {\n          innerEle.innerHTML = val;\n        } else if (document.querySelectorAll(val).length) {\n          var ele = document.querySelector(val);\n          var tempStr = ele.outerHTML.trim();\n          innerEle.appendChild(ele);\n          ele.style.display = '';\n\n          if (!isNOU(tempStr)) {\n            this.tempId.push(val);\n          }\n        } else {\n          templateFn = templateCompiler(val);\n        }\n      } catch (e) {\n        templateFn = templateCompiler(val);\n      }\n\n      var tempArray = void 0;\n\n      if (!isNOU(templateFn)) {\n        var toolbarTemplateID = this.element.id + index + '_template';\n        tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n      }\n\n      if (!isNOU(tempArray) && tempArray.length > 0) {\n        [].slice.call(tempArray).forEach(function (ele) {\n          if (!isNOU(ele.tagName)) {\n            ele.style.display = '';\n          }\n\n          innerEle.appendChild(ele);\n        });\n      }\n    } else if (itemType === 'Input') {\n      var ele = this.createElement('input');\n\n      if (item.id) {\n        ele.id = item.id;\n      } else {\n        ele.id = getUniqueID('tbr-ipt');\n      }\n\n      innerEle.appendChild(ele);\n      eleObj.appendTo(ele);\n    }\n\n    this.add(innerEle, CLS_TEMPLATE);\n    this.tbarEle.push(innerEle);\n  };\n\n  Toolbar.prototype.buttonRendering = function (item, innerEle) {\n    var dom = this.createElement('button', {\n      className: CLS_TBARBTN\n    });\n    dom.setAttribute('type', 'button');\n    var textStr = item.text;\n    var iconCss;\n    var iconPos;\n\n    if (item.id) {\n      dom.id = item.id;\n    } else {\n      dom.id = getUniqueID('e-tbr-btn');\n    }\n\n    var btnTxt = this.createElement('span', {\n      className: 'e-tbar-btn-text'\n    });\n\n    if (textStr) {\n      btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n      dom.appendChild(btnTxt);\n      dom.classList.add('e-tbtn-txt');\n    } else {\n      this.add(innerEle, 'e-tbtn-align');\n    }\n\n    if (item.prefixIcon || item.suffixIcon) {\n      if (item.prefixIcon && item.suffixIcon || item.prefixIcon) {\n        iconCss = item.prefixIcon + ' e-icons';\n        iconPos = 'Left';\n      } else {\n        iconCss = item.suffixIcon + ' e-icons';\n        iconPos = 'Right';\n      }\n    }\n\n    var btnObj = new Button({\n      iconCss: iconCss,\n      iconPosition: iconPos\n    });\n    btnObj.createElement = this.createElement;\n    btnObj.appendTo(dom);\n\n    if (item.width) {\n      setStyle(dom, {\n        'width': formatUnit(item.width)\n      });\n    }\n\n    return dom;\n  };\n\n  Toolbar.prototype.renderSubComponent = function (item, index) {\n    var dom;\n    var innerEle = this.createElement('div', {\n      className: CLS_ITEM\n    });\n    innerEle.setAttribute('aria-disabled', 'false');\n    var tempDom = this.createElement('div', {\n      innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n    });\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    if (item.htmlAttributes) {\n      this.setAttr(item.htmlAttributes, innerEle);\n    }\n\n    if (item.tooltipText) {\n      innerEle.setAttribute('title', tempDom.textContent);\n    }\n\n    if (item.cssClass) {\n      innerEle.className = innerEle.className + ' ' + item.cssClass;\n    }\n\n    if (item.template) {\n      this.templateRender(item.template, innerEle, item, index);\n    } else {\n      switch (item.type) {\n        case 'Button':\n          dom = this.buttonRendering(item, innerEle);\n          dom.setAttribute('tabindex', '-1');\n          dom.setAttribute('aria-label', item.text || item.tooltipText);\n          innerEle.appendChild(dom);\n          innerEle.addEventListener('click', this.itemClick.bind(this));\n          break;\n\n        case 'Separator':\n          this.add(innerEle, CLS_SEPARATOR);\n          break;\n      }\n    }\n\n    if (item.showTextOn) {\n      var sTxt = item.showTextOn;\n\n      if (sTxt === 'Toolbar') {\n        this.add(innerEle, CLS_POPUPTEXT);\n        this.add(innerEle, 'e-tbtn-align');\n      } else if (sTxt === 'Overflow') {\n        this.add(innerEle, CLS_TBARTEXT);\n      }\n    }\n\n    if (item.overflow) {\n      var overflow = item.overflow;\n\n      if (overflow === 'Show') {\n        this.add(innerEle, CLS_TBAROVERFLOW);\n      } else if (overflow === 'Hide') {\n        if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n          this.add(innerEle, CLS_POPOVERFLOW);\n        }\n      }\n    }\n\n    if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n      this.add(innerEle, CLS_POPPRI);\n      this.popupPriCount++;\n    }\n\n    if (item.disabled) {\n      this.add(innerEle, CLS_DISABLE);\n    }\n\n    if (item.visible === false) {\n      this.add(innerEle, CLS_HIDDEN);\n    }\n\n    return innerEle;\n  };\n\n  Toolbar.prototype.itemClick = function (e) {\n    this.activeEleSwitch(e.currentTarget);\n  };\n\n  Toolbar.prototype.activeEleSwitch = function (ele) {\n    this.activeEleRemove(ele.firstElementChild);\n    this.activeEle.focus();\n  };\n\n  Toolbar.prototype.activeEleRemove = function (curEle) {\n    if (!isNOU(this.activeEle)) {\n      this.activeEle.setAttribute('tabindex', '-1');\n    }\n\n    this.activeEle = curEle;\n\n    if (isNOU(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n      curEle.removeAttribute('tabindex');\n    } else {\n      this.activeEle.setAttribute('tabindex', '0');\n    }\n  };\n\n  Toolbar.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - Returns the module name as string.\n   * @private\n   */\n\n\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n\n  Toolbar.prototype.itemsRerender = function (newProp) {\n    this.items = this.tbarItemsCol;\n\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    this.destroyMode();\n    this.destroyItems();\n    this.items = newProp;\n    this.tbarItemsCol = this.items;\n    this.renderItems();\n    this.renderOverflowMode();\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Toolbar.prototype.resize = function () {\n    var ele = this.element;\n    this.tbResize = true;\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.overflowMode === 'Popup') {\n      this.popObj.hide();\n    }\n\n    var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (!checkOverflow) {\n      this.destroyScroll();\n      var multirowele = ele.querySelector('.' + CLS_ITEMS);\n\n      if (!isNOU(multirowele)) {\n        this.remove(multirowele, CLS_MULTIROWPOS);\n\n        if (this.tbarAlign) {\n          this.add(multirowele, CLS_TBARPOS);\n        }\n      }\n    }\n\n    if (checkOverflow && this.scrollModule && this.offsetWid === ele.offsetWidth) {\n      return;\n    }\n\n    if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n      this.renderOverflowMode();\n    }\n\n    if (this.popObj) {\n      if (this.overflowMode === 'Extended') {\n        var eleStyles = window.getComputedStyle(this.element);\n        this.popObj.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n      }\n\n      if (this.tbarAlign) {\n        this.removePositioning();\n      }\n\n      this.popupRefresh(this.popObj.element, false);\n\n      if (this.tbarAlign) {\n        this.refreshPositioning();\n      }\n    }\n\n    if (this.element.querySelector('.' + CLS_HSCROLLBAR)) {\n      this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR).offsetWidth;\n    }\n\n    this.offsetWid = ele.offsetWidth;\n    this.tbResize = false;\n    this.separator();\n  };\n\n  Toolbar.prototype.extendedOpen = function () {\n    var sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n\n    if (this.overflowMode === 'Extended' && sib) {\n      this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n    }\n  };\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   *\n   * @param  {ToolbarModel} newProp - It contains new value of the data.\n   * @param  {ToolbarModel} oldProp - It contains old value of the data.\n   * @returns {void}\n   * @private\n   */\n\n\n  Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var tEle = this.element;\n    var wid = tEle.offsetWidth;\n    this.extendedOpen();\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'items':\n          if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n            var changedProb = Object.keys(newProp.items);\n\n            for (var i = 0; i < changedProb.length; i++) {\n              var index = parseInt(Object.keys(newProp.items)[i], 10);\n              var property = Object.keys(newProp.items[index])[0];\n              var newProperty = Object(newProp.items[index])[property];\n\n              if (typeof newProperty !== 'function') {\n                if (this.tbarAlign || property === 'align') {\n                  this.refresh();\n                  this.trigger('created');\n                  break;\n                }\n\n                var popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                var booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n\n                if (popupPriCheck || this.items[index].showAlwaysInPopup && booleanCheck) {\n                  --this.popupPriCount;\n                }\n\n                if (isNOU(this.scrollModule)) {\n                  this.destroyMode();\n                }\n\n                var itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n\n                if (this.isReact) {\n                  this.clearTemplate();\n                }\n\n                detach(itemCol[index]);\n                this.tbarEle.splice(index, 1);\n                this.addItems([this.items[index]], index);\n                this.items.splice(index, 1);\n\n                if (this.items[index].template) {\n                  this.tbarEle.splice(this.items.length, 1);\n                }\n              }\n            }\n          } else {\n            this.itemsRerender(newProp.items);\n          }\n\n          break;\n\n        case 'width':\n          setStyle(tEle, {\n            'width': formatUnit(newProp.width)\n          });\n          this.renderOverflowMode();\n\n          if (this.popObj && wid < tEle.offsetWidth) {\n            this.popupRefresh(this.popObj.element, false);\n          }\n\n          break;\n\n        case 'height':\n          setStyle(this.element, {\n            'height': formatUnit(newProp.height)\n          });\n          break;\n\n        case 'overflowMode':\n          this.destroyMode();\n          this.renderOverflowMode();\n\n          if (this.enableRtl) {\n            this.add(tEle, CLS_RTL);\n          }\n\n          this.refreshOverflow();\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.add(tEle, CLS_RTL);\n          } else {\n            this.remove(tEle, CLS_RTL);\n          }\n\n          if (!isNOU(this.scrollModule)) {\n            if (newProp.enableRtl) {\n              this.add(this.scrollModule.element, CLS_RTL);\n            } else {\n              this.remove(this.scrollModule.element, CLS_RTL);\n            }\n          }\n\n          if (!isNOU(this.popObj)) {\n            if (newProp.enableRtl) {\n              this.add(this.popObj.element, CLS_RTL);\n            } else {\n              this.remove(this.popObj.element, CLS_RTL);\n            }\n          }\n\n          if (this.tbarAlign) {\n            this.itemPositioning();\n          }\n\n          break;\n\n        case 'scrollStep':\n          if (this.scrollModule) {\n            this.scrollModule.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'enableCollision':\n          if (this.popObj) {\n            this.popObj.collision = {\n              Y: this.enableCollision ? 'flip' : 'none'\n            };\n          }\n\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'allowKeyboard':\n          this.unwireKeyboardEvent();\n\n          if (newProp.allowKeyboard) {\n            this.wireKeyboardEvent();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\n   * Shows or hides the Toolbar item that is in the specified index.\n   *\n   * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n   * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n   * @returns {void}.\n   */\n\n\n  Toolbar.prototype.hideItem = function (index, value) {\n    var isElement = typeof index === 'object' ? true : false;\n    var eleIndex = index;\n    var initIndex;\n    var ele;\n    var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (isElement) {\n      ele = index;\n    } else if (this.tbarEle[eleIndex]) {\n      var innerItems_1 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n      ele = innerItems_1[eleIndex];\n    }\n\n    if (ele) {\n      if (value) {\n        ele.classList.add(CLS_HIDDEN);\n      } else {\n        ele.classList.remove(CLS_HIDDEN);\n      }\n\n      if (value && isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        if (isNOU(ele.firstElementChild.getAttribute('tabindex'))) {\n          ele.firstElementChild.setAttribute('tabindex', '-1');\n          var innerItems_2 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n          if (isElement) {\n            eleIndex = innerItems_2.indexOf(ele);\n          }\n\n          var nextEle = innerItems_2[++eleIndex];\n\n          while (nextEle) {\n            var skipEle = this.eleContains(nextEle);\n\n            if (!skipEle) {\n              nextEle.firstElementChild.removeAttribute('tabindex');\n              break;\n            }\n\n            nextEle = innerItems_2[++eleIndex];\n          }\n        }\n      } else if (isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        initIndex = 0;\n        var setFlag = false;\n        var removeFlag = false;\n        var initELe = innerItems[initIndex];\n\n        while (initELe) {\n          if (!initELe.classList.contains(CLS_SEPARATOR)) {\n            if (isNOU(initELe.firstElementChild.getAttribute('tabindex'))) {\n              initELe.firstElementChild.setAttribute('tabindex', '-1');\n              setFlag = true;\n            } else {\n              if (setFlag && removeFlag) {\n                break;\n              }\n\n              var skipEle = this.eleContains(initELe);\n\n              if (!skipEle) {\n                initELe.firstElementChild.removeAttribute('tabindex');\n                removeFlag = true;\n              }\n\n              initELe = innerItems[++initIndex];\n            }\n          } else {\n            initELe = innerItems[++initIndex];\n          }\n        }\n      }\n\n      this.refreshOverflow();\n    }\n  };\n\n  __decorate([Collection([], Item)], Toolbar.prototype, \"items\", void 0);\n\n  __decorate([Property('auto')], Toolbar.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Toolbar.prototype, \"height\", void 0);\n\n  __decorate([Property('')], Toolbar.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('Scrollable')], Toolbar.prototype, \"overflowMode\", void 0);\n\n  __decorate([Property()], Toolbar.prototype, \"scrollStep\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"enableCollision\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"allowKeyboard\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"clicked\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"created\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"beforeCreate\", void 0);\n\n  Toolbar = __decorate([NotifyPropertyChanges], Toolbar);\n  return Toolbar;\n}(Component);\n\nexport { Toolbar };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","EventHandler","Property","Event","addClass","removeClass","isVisible","closest","attributes","detach","classList","KeyboardEvents","selectAll","setStyleAttribute","setStyle","select","isNullOrUndefined","isNOU","getUniqueID","formatUnit","Collection","compile","templateCompiler","NotifyPropertyChanges","ChildProperty","Browser","SanitizeHtmlHelper","Popup","calculatePosition","Button","HScroll","VScroll","CLS_VERTICAL","CLS_ITEMS","CLS_ITEM","CLS_RTL","CLS_SEPARATOR","CLS_POPUPICON","CLS_POPUPDOWN","CLS_POPUPOPEN","CLS_TEMPLATE","CLS_DISABLE","CLS_POPUPTEXT","CLS_TBARTEXT","CLS_TBAROVERFLOW","CLS_POPOVERFLOW","CLS_TBARBTN","CLS_TBARNAV","CLS_TBARSCRLNAV","CLS_TBARRIGHT","CLS_TBARLEFT","CLS_TBARCENTER","CLS_TBARPOS","CLS_HSCROLLCNT","CLS_VSCROLLCNT","CLS_HSCROLLBAR","CLS_POPUPNAV","CLS_POPUPCLASS","CLS_POPUP","CLS_TBARBTNTEXT","CLS_TBARNAVACT","CLS_TBARIGNORE","CLS_POPPRI","CLS_HIDDEN","CLS_MULTIROW","CLS_MULTIROWPOS","CLS_MULTIROW_SEPARATOR","CLS_EXTENDABLE_SEPARATOR","CLS_EXTEANDABLE_TOOLBAR","CLS_EXTENDABLECLASS","CLS_EXTENDPOPUP","CLS_EXTENDEDPOPOPEN","Item","_super","apply","Toolbar","options","element","_this","call","resizeContext","resize","bind","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","destroy","isReact","isAngular","clearTemplate","btnItems","querySelectorAll","slice","forEach","el","ej2_instances","isDestroyed","unwireEvents","tempId","ele","querySelector","document","body","appendChild","style","display","destroyItems","lastElementChild","removeChild","trgtEle","ctrlTem","popObj","activeEle","tbarAlign","tbarItemsCol","remove","cssClass","split","removeAttribute","attrb","preRender","eventArgs","enableCollision","scrollStep","trigger","scrollModule","items","isVertical","contains","isExtendedOpen","popupPriCount","enableRtl","add","wireEvents","clickHandler","window","addEventListener","allowKeyboard","wireKeyboardEvent","keyModule","keyAction","keyActionHandler","docKeyDown","setAttribute","unwireKeyboardEvent","e","tagName","popCheck","overflowMode","keyCode","hide","name","duration","keyCheck","preventDefault","destroyScroll","removeEventListener","docEvent","clearProperty","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","tbarItems","children","destroyMode","tempEle","popupRefresh","val","elementFocus","fChild","firstElementChild","focus","activeEleSwitch","clstElement","tbrNavChk","trgt","clst","keyHandling","navChk","scrollChk","rootEle","popAnimate","value","action","nodes","eleFocus","popupCheck","extendedPopup","popFrstEle","ele_1","activeEleRemove","top","offsetHeight","show","tbarScrollChk","disable","id","eleContains","getAttribute","pos","sib","skipEle","elem","parentElement","isPopupElement","clsList","popupNav","popupClickHandler","itemObj","tempItem","indexOf","originalEvent","item","click","cancel","clickedArgs","type","position","X","Y","offsetX","dataBind","refreshPosition","getElementOffsetY","minHeight","render","initialize","renderControl","renderComplete","width","height","info","ariaAttr","renderItems","renderLayout","renderOverflowMode","itemPositioning","childElementCount","checkPopupRefresh","separator","itemsAlign","itemEleDom","innerItem","innerPos","renderSubComponent","push","tbarItemAlign","align","toLowerCase","showAlwaysInPopup","overflow","portals","notify","renderReactTemplates","changeOrientation","refreshOverflow","initScroll","innerItems","checkOverflow","itemWidthCal","getComputedStyle","offsetWidth","parseFloat","marginTop","marginRight","marginBottom","marginLeft","getScrollCntEle","trgClass","eleWidth","itemWidth","popNav","scrollNav","navEleWidth","toolbarAlign","priorityCheck","offsetWid","getElementsByClassName","removePositioning","setOverflowAttributes","createPopupEle","eleItem","multiVar","extendVar","eleInlineItem","offsetLeft","innerEle","innerNav","vertical","createPopupIcon","innerNavDom","direction","checkPriority","removeProperty","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","sepHeight","poppedEle","nodeIndex","nodePri","index","tbResize","insertBefore","firstChild","childNodes","tbarElement","sepItem","extendEle","createElement","className","popupEle","popupInit","getPropertyValue","clientHeight","eleStyles","popup","relateTo","offsetY","open","close","collision","appendTo","borderRightWidth","maxHeight","visibility","tbarPopupHandler","isOpen","toolEle","popupElePos","offsetTop","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","tbEleData","getBoundingClientRect","bottom","popupOffset","right","documentElement","clientWidth","inEle","pre","popPriority","len","eleWid","eleOffset","checkoffset","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","compuStyle","fstEleCheck","tbarEleMrgn","eleWid_1","minWidth","sepEle","popedEle","concat","nav","navItem","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","query","priEleCnt","eleSep","ignoreCheck","sepDisplay","eleSepWidth","prevSep","previousElementSibling","isVer","dimension","popupEleWidth","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","root","tbarWidth","tbarItemsWid","elWidth","btnText","btn","eleSplice","_loop_1","this_1","sepBeforePri_1","_i","_a","state_1","refreshPositioning","margin","tbarWid","popWid","left","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","setAttr","attr","keys","keyVal","enableItems","isEnable","elements","enable","a","itemElement","getElementByIndex","addItems","extendedOpen","itemsDiv","itemsRerender","itemAgn","items_1","algIndex","splice","parentNode","template","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","btnItem","templateRender","templateProp","itemType","eleObj","isComponent","templateFn","regEx","RegExp","trim","test","innerHTML","tempStr","outerHTML","tempArray","toolbarTemplateID","isStringTemplate","buttonRendering","dom","textStr","text","iconCss","iconPos","btnTxt","enableHtmlSanitizer","sanitize","prefixIcon","suffixIcon","btnObj","iconPosition","tempDom","tooltipText","htmlAttributes","textContent","itemClick","showTextOn","sTxt","disabled","visible","currentTarget","curEle","getPersistData","addOnPersist","getModuleName","newProp","multirowele","onPropertyChanged","oldProp","tEle","prop","changedProb","property","newProperty","refresh","popupPriCheck","booleanCheck","itemCol","hideItem","isElement","eleIndex","initIndex","innerItems_1","innerItems_2","nextEle","setFlag","removeFlag","initELe"],"sources":["C:/Project/show-me-the-code-test/view/node_modules/@syncfusion/ej2-navigations/src/toolbar/toolbar.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, EventHandler, Property, Event } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, isVisible, closest, attributes, detach, classList, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { selectAll, setStyleAttribute as setStyle, select } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, getUniqueID, formatUnit, Collection, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Browser, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { HScroll } from '../common/h-scroll';\nimport { VScroll } from '../common/v-scroll';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_ITEMS = 'e-toolbar-items';\nvar CLS_ITEM = 'e-toolbar-item';\nvar CLS_RTL = 'e-rtl';\nvar CLS_SEPARATOR = 'e-separator';\nvar CLS_POPUPICON = 'e-popup-up-icon';\nvar CLS_POPUPDOWN = 'e-popup-down-icon';\nvar CLS_POPUPOPEN = 'e-popup-open';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_POPUPTEXT = 'e-toolbar-text';\nvar CLS_TBARTEXT = 'e-popup-text';\nvar CLS_TBAROVERFLOW = 'e-overflow-show';\nvar CLS_POPOVERFLOW = 'e-overflow-hide';\nvar CLS_TBARBTN = 'e-tbar-btn';\nvar CLS_TBARNAV = 'e-hor-nav';\nvar CLS_TBARSCRLNAV = 'e-scroll-nav';\nvar CLS_TBARRIGHT = 'e-toolbar-right';\nvar CLS_TBARLEFT = 'e-toolbar-left';\nvar CLS_TBARCENTER = 'e-toolbar-center';\nvar CLS_TBARPOS = 'e-tbar-pos';\nvar CLS_HSCROLLCNT = 'e-hscroll-content';\nvar CLS_VSCROLLCNT = 'e-vscroll-content';\nvar CLS_HSCROLLBAR = 'e-hscroll-bar';\nvar CLS_POPUPNAV = 'e-hor-nav';\nvar CLS_POPUPCLASS = 'e-toolbar-pop';\nvar CLS_POPUP = 'e-toolbar-popup';\nvar CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nvar CLS_TBARNAVACT = 'e-nav-active';\nvar CLS_TBARIGNORE = 'e-ignore';\nvar CLS_POPPRI = 'e-popup-alone';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_MULTIROW = 'e-toolbar-multirow';\nvar CLS_MULTIROWPOS = 'e-multirow-pos';\nvar CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nvar CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nvar CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nvar CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nvar CLS_EXTENDPOPUP = 'e-expended-nav';\nvar CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Item.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"text\", void 0);\n    __decorate([\n        Property('auto')\n    ], Item.prototype, \"width\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Item.prototype, \"showAlwaysInPopup\", void 0);\n    __decorate([\n        Property(false)\n    ], Item.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"prefixIcon\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"suffixIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], Item.prototype, \"visible\", void 0);\n    __decorate([\n        Property('None')\n    ], Item.prototype, \"overflow\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"template\", void 0);\n    __decorate([\n        Property('Button')\n    ], Item.prototype, \"type\", void 0);\n    __decorate([\n        Property('Both')\n    ], Item.prototype, \"showTextOn\", void 0);\n    __decorate([\n        Property(null)\n    ], Item.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"tooltipText\", void 0);\n    __decorate([\n        Property('Left')\n    ], Item.prototype, \"align\", void 0);\n    __decorate([\n        Event()\n    ], Item.prototype, \"click\", void 0);\n    return Item;\n}(ChildProperty));\nexport { Item };\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    /**\n     * Initializes a new instance of the Toolbar class.\n     *\n     * @param {ToolbarModel} options  - Specifies Toolbar model properties as options.\n     * @param { string | HTMLElement} element  - Specifies the element that is rendered as a Toolbar.\n     */\n    function Toolbar(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.resizeContext = _this.resize.bind(_this);\n        /**\n         * Contains the keyboard configuration of the Toolbar.\n         */\n        _this.keyConfigs = {\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            popupOpen: 'enter',\n            popupClose: 'escape',\n            tab: 'tab',\n            home: 'home',\n            end: 'end'\n        };\n        return _this;\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     *\n     * @returns {void}.\n     */\n    Toolbar.prototype.destroy = function () {\n        var _this = this;\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        var btnItems = this.element.querySelectorAll('.e-control.e-btn');\n        [].slice.call(btnItems).forEach(function (el) {\n            if (!isNOU(el) && !isNOU(el.ej2_instances) && !isNOU(el.ej2_instances[0]) && !(el.ej2_instances[0].isDestroyed)) {\n                el.ej2_instances[0].destroy();\n            }\n        });\n        this.unwireEvents();\n        this.tempId.forEach(function (ele) {\n            if (!isNOU(_this.element.querySelector(ele))) {\n                document.body.appendChild(_this.element.querySelector(ele)).style.display = 'none';\n            }\n        });\n        this.destroyItems();\n        while (this.element.lastElementChild) {\n            this.element.removeChild(this.element.lastElementChild);\n        }\n        if (this.trgtEle) {\n            this.element.appendChild(this.ctrlTem);\n            this.trgtEle = null;\n            this.ctrlTem = null;\n        }\n        if (this.popObj) {\n            this.popObj.destroy();\n            detach(this.popObj.element);\n        }\n        if (this.activeEle) {\n            this.activeEle = null;\n        }\n        this.popObj = null;\n        this.tbarAlign = null;\n        this.tbarItemsCol = [];\n        this.remove(this.element, 'e-toolpop');\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.removeAttribute('style');\n        ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n            return _this.element.removeAttribute(attrb);\n        });\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    Toolbar.prototype.preRender = function () {\n        var eventArgs = { enableCollision: this.enableCollision, scrollStep: this.scrollStep };\n        this.trigger('beforeCreate', eventArgs);\n        this.enableCollision = eventArgs.enableCollision;\n        this.scrollStep = eventArgs.scrollStep;\n        this.scrollModule = null;\n        this.popObj = null;\n        this.tempId = [];\n        this.tbarItemsCol = this.items;\n        this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n        this.isExtendedOpen = false;\n        this.popupPriCount = 0;\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        window.addEventListener('resize', this.resizeContext);\n        if (this.allowKeyboard) {\n            this.wireKeyboardEvent();\n        }\n    };\n    Toolbar.prototype.wireKeyboardEvent = function () {\n        this.keyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs\n        });\n        EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n        this.element.setAttribute('tabIndex', '0');\n    };\n    Toolbar.prototype.unwireKeyboardEvent = function () {\n        if (this.keyModule) {\n            EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n            this.keyModule.destroy();\n            this.keyModule = null;\n        }\n    };\n    Toolbar.prototype.docKeyDown = function (e) {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        var popCheck = !isNOU(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n        if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        var keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n        if (keyCheck) {\n            e.preventDefault();\n        }\n    };\n    Toolbar.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        this.destroyScroll();\n        this.unwireKeyboardEvent();\n        window.removeEventListener('resize', this.resizeContext);\n        EventHandler.remove(document, 'scroll', this.docEvent);\n        EventHandler.remove(document, 'click', this.docEvent);\n    };\n    Toolbar.prototype.clearProperty = function () {\n        this.tbarEle = [];\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n    };\n    Toolbar.prototype.docEvent = function (e) {\n        var popEle = closest(e.target, '.e-popup');\n        if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n    };\n    Toolbar.prototype.destroyScroll = function () {\n        if (this.scrollModule) {\n            if (this.tbarAlign) {\n                this.add(this.scrollModule.element, CLS_TBARPOS);\n            }\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n    };\n    Toolbar.prototype.destroyItems = function () {\n        if (this.element) {\n            [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) { detach(el); });\n        }\n        if (this.tbarAlign) {\n            var tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n            [].slice.call(tbarItems.children).forEach(function (el) {\n                detach(el);\n            });\n            this.tbarAlign = false;\n            this.remove(tbarItems, CLS_TBARPOS);\n        }\n        this.clearProperty();\n    };\n    Toolbar.prototype.destroyMode = function () {\n        if (this.scrollModule) {\n            this.remove(this.scrollModule.element, CLS_RTL);\n            this.destroyScroll();\n        }\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n        var tempEle = this.element.querySelector('.e-toolbar-multirow');\n        if (tempEle) {\n            this.remove(tempEle, CLS_MULTIROW);\n        }\n        if (this.popObj) {\n            this.popupRefresh(this.popObj.element, true);\n        }\n    };\n    Toolbar.prototype.add = function (ele, val) {\n        ele.classList.add(val);\n    };\n    Toolbar.prototype.remove = function (ele, val) {\n        ele.classList.remove(val);\n    };\n    Toolbar.prototype.elementFocus = function (ele) {\n        var fChild = ele.firstElementChild;\n        if (fChild) {\n            fChild.focus();\n            this.activeEleSwitch(ele);\n        }\n        else {\n            ele.focus();\n        }\n    };\n    Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n        var clst;\n        if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n            clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n        }\n        else if (this.element === trgt || tbrNavChk) {\n            clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n        }\n        else {\n            clst = closest(trgt, '.' + CLS_ITEM);\n        }\n        return clst;\n    };\n    Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n        var popObj = this.popObj;\n        var rootEle = this.element;\n        var popAnimate = { name: 'FadeOut', duration: 100 };\n        var value = e.action === 'moveUp' ? 'previous' : 'next';\n        var ele;\n        var nodes;\n        switch (e.action) {\n            case 'moveRight':\n                if (this.isVertical) {\n                    return;\n                }\n                if (rootEle === trgt) {\n                    this.elementFocus(clst);\n                }\n                else if (!navChk) {\n                    this.eleFocus(clst, 'next');\n                }\n                break;\n            case 'moveLeft':\n                if (this.isVertical) {\n                    return;\n                }\n                if (!navChk) {\n                    this.eleFocus(clst, 'previous');\n                }\n                break;\n            case 'home':\n            case 'end':\n                if (clst) {\n                    var popupCheck = closest(clst, '.e-popup');\n                    var extendedPopup = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n                    if (this.overflowMode === 'Extended' && extendedPopup && extendedPopup.classList.contains('e-popup-open')) {\n                        popupCheck = e.action === 'end' ? extendedPopup : null;\n                    }\n                    if (popupCheck) {\n                        if (isVisible(this.popObj.element)) {\n                            nodes = [].slice.call(popupCheck.children);\n                            if (e.action === 'home') {\n                                ele = nodes[0];\n                            }\n                            else {\n                                ele = nodes[nodes.length - 1];\n                            }\n                        }\n                    }\n                    else {\n                        nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + ')');\n                        if (e.action === 'home') {\n                            ele = nodes[0];\n                        }\n                        else {\n                            ele = nodes[nodes.length - 1];\n                        }\n                    }\n                    if (ele) {\n                        this.elementFocus(ele);\n                    }\n                }\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                if (!this.isVertical) {\n                    if (popObj && closest(trgt, '.e-popup')) {\n                        var popEle = popObj.element;\n                        var popFrstEle = popEle.firstElementChild;\n                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n                            return;\n                        }\n                        else {\n                            this.eleFocus(clst, value);\n                        }\n                    }\n                    else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n                        this.elementFocus(clst);\n                    }\n                }\n                else {\n                    if (e.action === 'moveUp') {\n                        this.eleFocus(clst, 'previous');\n                    }\n                    else {\n                        this.eleFocus(clst, 'next');\n                    }\n                }\n                break;\n            case 'tab':\n                if (!scrollChk && !navChk) {\n                    var ele_1 = clst.firstElementChild;\n                    if (rootEle === trgt) {\n                        if (this.activeEle) {\n                            this.activeEle.focus();\n                        }\n                        else {\n                            this.activeEleRemove(ele_1);\n                            ele_1.focus();\n                        }\n                        this.element.removeAttribute('tabindex');\n                    }\n                }\n                break;\n            case 'popupClose':\n                if (popObj && this.overflowMode !== 'Extended') {\n                    popObj.hide(popAnimate);\n                }\n                break;\n            case 'popupOpen':\n                if (!navChk) {\n                    return;\n                }\n                if (popObj && !isVisible(popObj.element)) {\n                    popObj.element.style.top = rootEle.offsetHeight + 'px';\n                    popObj.show({ name: 'FadeIn', duration: 100 });\n                }\n                else {\n                    popObj.hide(popAnimate);\n                }\n                break;\n        }\n    };\n    Toolbar.prototype.keyActionHandler = function (e) {\n        var trgt = e.target;\n        if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        e.preventDefault();\n        var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n        var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n        var clst = this.clstElement(tbrNavChk, trgt);\n        if (clst || tbarScrollChk) {\n            this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n        }\n    };\n    /**\n     * Specifies the value to disable/enable the Toolbar component.\n     * When set to `true`, the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    Toolbar.prototype.disable = function (value) {\n        var rootEle = this.element;\n        if (value) {\n            rootEle.classList.add(CLS_DISABLE);\n        }\n        else {\n            rootEle.classList.remove(CLS_DISABLE);\n        }\n        rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n        if (this.activeEle) {\n            this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n        }\n        if (this.scrollModule) {\n            this.scrollModule.disable(value);\n        }\n        if (this.popObj) {\n            if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n                this.popObj.hide();\n            }\n            rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n        }\n    };\n    Toolbar.prototype.eleContains = function (el) {\n        return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el);\n    };\n    Toolbar.prototype.eleFocus = function (closest, pos) {\n        var sib = Object(closest)[pos + 'ElementSibling'];\n        if (sib) {\n            var skipEle = this.eleContains(sib);\n            if (skipEle) {\n                this.eleFocus(sib, pos);\n                return;\n            }\n            this.elementFocus(sib);\n        }\n        else if (this.tbarAlign) {\n            var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n            if (!isNOU(elem) && elem.children.length === 0) {\n                elem = Object(elem)[pos + 'ElementSibling'];\n            }\n            if (!isNOU(elem) && elem.children.length > 0) {\n                if (pos === 'next') {\n                    var el = elem.querySelector('.' + CLS_ITEM);\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        el.firstElementChild.focus();\n                        this.activeEleSwitch(el);\n                    }\n                }\n                else {\n                    var el = elem.lastElementChild;\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        this.elementFocus(el);\n                    }\n                }\n            }\n        }\n    };\n    Toolbar.prototype.clickHandler = function (e) {\n        var _this = this;\n        var trgt = e.target;\n        var ele = this.element;\n        var isPopupElement = !isNOU(closest(trgt, '.' + CLS_POPUPCLASS));\n        var clsList = trgt.classList;\n        var popupNav = closest(trgt, ('.' + CLS_TBARNAV));\n        if (!popupNav) {\n            popupNav = trgt;\n        }\n        if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll')\n            && (clsList.contains(CLS_TBARNAV))) {\n            clsList = trgt.querySelector('.e-icons').classList;\n        }\n        if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n            this.popupClickHandler(ele, popupNav, CLS_RTL);\n        }\n        var itemObj;\n        var clst = closest(e.target, '.' + CLS_ITEM);\n        if ((isNOU(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n            return;\n        }\n        if (clst) {\n            var tempItem = this.items[this.tbarEle.indexOf(clst)];\n            itemObj = tempItem;\n        }\n        var eventArgs = { originalEvent: e, item: itemObj };\n        if (itemObj && !isNOU(itemObj.click)) {\n            this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n        }\n        if (!eventArgs.cancel) {\n            this.trigger('clicked', eventArgs, function (clickedArgs) {\n                if (!isNOU(_this.popObj) && isPopupElement && !clickedArgs.cancel && _this.overflowMode === 'Popup' &&\n                    clickedArgs.item && clickedArgs.item.type !== 'Input') {\n                    _this.popObj.hide({ name: 'FadeOut', duration: 100 });\n                }\n            });\n        }\n    };\n    Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n        var popObj = this.popObj;\n        if (isVisible(popObj.element)) {\n            popupNav.classList.remove(CLS_TBARNAVACT);\n            popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        else {\n            if (ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = true;\n                popObj.position = { X: 'left', Y: 'top' };\n            }\n            if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = false;\n                popObj.position = { X: 'right', Y: 'top' };\n            }\n            popObj.dataBind();\n            popObj.refreshPosition();\n            popObj.element.style.top = this.getElementOffsetY() + 'px';\n            if (this.overflowMode === 'Extended') {\n                popObj.element.style.minHeight = '0px';\n            }\n            popupNav.classList.add(CLS_TBARNAVACT);\n            popObj.show({ name: 'FadeIn', duration: 100 });\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Toolbar.prototype.render = function () {\n        this.initialize();\n        this.renderControl();\n        this.wireEvents();\n        this.renderComplete();\n    };\n    Toolbar.prototype.initialize = function () {\n        var width = formatUnit(this.width);\n        var height = formatUnit(this.height);\n        if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n            setStyle(this.element, { 'height': height });\n        }\n        setStyle(this.element, { 'width': width });\n        var ariaAttr = {\n            'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false',\n            'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical'\n        };\n        attributes(this.element, ariaAttr);\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' '));\n        }\n    };\n    Toolbar.prototype.renderControl = function () {\n        var ele = this.element;\n        this.trgtEle = (ele.children.length > 0) ? ele.querySelector('div') : null;\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n        this.renderItems();\n        this.renderLayout();\n    };\n    Toolbar.prototype.renderLayout = function () {\n        this.renderOverflowMode();\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n            this.popupRefresh(this.popObj.element, false);\n        }\n        this.separator();\n    };\n    Toolbar.prototype.itemsAlign = function (items, itemEleDom) {\n        var innerItem;\n        var innerPos;\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        for (var i = 0; i < items.length; i++) {\n            innerItem = this.renderSubComponent(items[i], i);\n            if (this.tbarEle.indexOf(innerItem) === -1) {\n                this.tbarEle.push(innerItem);\n            }\n            if (!this.tbarAlign) {\n                this.tbarItemAlign(items[i], itemEleDom, i);\n            }\n            innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n            if (innerPos) {\n                if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n                    this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n                }\n                innerPos.appendChild(innerItem);\n            }\n            else {\n                itemEleDom.appendChild(innerItem);\n            }\n        }\n        if (this.isReact) {\n            var portals = 'portals';\n            this.notify('render-react-toolbar-template', this[portals]);\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * @hidden\n     * @returns {void}\n     */\n    Toolbar.prototype.changeOrientation = function () {\n        var ele = this.element;\n        if (this.isVertical) {\n            ele.classList.remove(CLS_VERTICAL);\n            this.isVertical = false;\n            if (this.height === 'auto' || this.height === '100%') {\n                ele.style.height = this.height;\n            }\n            ele.setAttribute('aria-orientation', 'horizontal');\n        }\n        else {\n            ele.classList.add(CLS_VERTICAL);\n            this.isVertical = true;\n            ele.setAttribute('aria-orientation', 'vertical');\n            setStyle(this.element, { 'height': formatUnit(this.height), 'width': formatUnit(this.width) });\n        }\n        this.destroyMode();\n        this.refreshOverflow();\n    };\n    Toolbar.prototype.initScroll = function (element, innerItems) {\n        if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n            if (this.tbarAlign) {\n                this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n            }\n            if (this.isVertical) {\n                this.scrollModule = new VScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            else {\n                this.scrollModule = new HScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            if (this.cssClass) {\n                addClass([innerItems[0]], this.cssClass.split(' '));\n            }\n            this.remove(this.scrollModule.element, CLS_TBARPOS);\n            setStyle(this.element, { overflow: 'hidden' });\n        }\n    };\n    Toolbar.prototype.itemWidthCal = function (items) {\n        var _this = this;\n        var width = 0;\n        var style;\n        [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n            if (isVisible(el)) {\n                style = window.getComputedStyle(el);\n                width += _this.isVertical ? el.offsetHeight : el.offsetWidth;\n                width += parseFloat(_this.isVertical ? style.marginTop : style.marginRight);\n                width += parseFloat(_this.isVertical ? style.marginBottom : style.marginLeft);\n            }\n        });\n        return width;\n    };\n    Toolbar.prototype.getScrollCntEle = function (innerItem) {\n        var trgClass = (this.isVertical) ? '.e-vscroll-content' : '.e-hscroll-content';\n        return innerItem.querySelector(trgClass);\n    };\n    Toolbar.prototype.checkOverflow = function (element, innerItem) {\n        if (isNOU(element) || isNOU(innerItem) || !isVisible(element)) {\n            return false;\n        }\n        var eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n        var itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n        if (this.tbarAlign || this.scrollModule || (eleWidth === itemWidth)) {\n            itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n        }\n        var popNav = element.querySelector('.' + CLS_TBARNAV);\n        var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n        var navEleWidth = 0;\n        if (popNav) {\n            navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n        }\n        else if (scrollNav) {\n            navEleWidth = this.isVertical ? (scrollNav.offsetHeight * (2)) : (scrollNav.offsetWidth * 2);\n        }\n        if (itemWidth > eleWidth - navEleWidth) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Refresh the whole Toolbar component without re-rendering.\n     * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n     * - It will refresh the Toolbar component after loading items dynamically.\n     *\n     * @returns {void}.\n     */\n    Toolbar.prototype.refreshOverflow = function () {\n        this.resize();\n    };\n    Toolbar.prototype.toolbarAlign = function (innerItems) {\n        if (this.tbarAlign) {\n            this.add(innerItems, CLS_TBARPOS);\n            this.itemPositioning();\n        }\n    };\n    Toolbar.prototype.renderOverflowMode = function () {\n        var ele = this.element;\n        var innerItems = ele.querySelector('.' + CLS_ITEMS);\n        var priorityCheck = this.popupPriCount > 0;\n        if (ele && ele.children.length > 0) {\n            this.offsetWid = ele.offsetWidth;\n            this.remove(this.element, 'e-toolpop');\n            if (Browser.info.name === 'msie' && this.height === 'auto') {\n                ele.style.height = '';\n            }\n            switch (this.overflowMode) {\n                case 'Scrollable':\n                    if (isNOU(this.scrollModule)) {\n                        this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n                    }\n                    break;\n                case 'Popup':\n                    this.add(this.element, 'e-toolpop');\n                    if (this.tbarAlign) {\n                        this.removePositioning();\n                    }\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n                    break;\n                case 'MultiRow':\n                    this.add(innerItems, CLS_MULTIROW);\n                    if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n                        this.removePositioning();\n                        this.add(innerItems, CLS_MULTIROWPOS);\n                    }\n                    if (ele.style.overflow === 'hidden') {\n                        ele.style.overflow = '';\n                    }\n                    if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n                        ele.style.height = 'auto';\n                    }\n                    break;\n                case 'Extended':\n                    this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        if (this.tbarAlign) {\n                            this.removePositioning();\n                        }\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n            }\n        }\n    };\n    Toolbar.prototype.setOverflowAttributes = function (ele) {\n        this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n    };\n    Toolbar.prototype.separator = function () {\n        var element = this.element;\n        var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n        var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n        var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n        var eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n        if (eleInlineItem !== null) {\n            if (this.overflowMode === 'MultiRow') {\n                eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n            }\n            else if (this.overflowMode === 'Extended') {\n                eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n            }\n        }\n        for (var i = 0; i <= eleItem.length - 1; i++) {\n            if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n                if (this.overflowMode === 'MultiRow') {\n                    eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n                }\n                else if (this.overflowMode === 'Extended') {\n                    eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n                }\n            }\n        }\n    };\n    Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n        var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        var vertical = this.isVertical;\n        if (!innerNav) {\n            this.createPopupIcon(ele);\n        }\n        innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        var innerNavDom = (vertical ? innerNav.offsetHeight : innerNav.offsetWidth);\n        var eleWidth = ((vertical ? ele.offsetHeight : ele.offsetWidth) - (innerNavDom));\n        this.element.classList.remove('e-rtl');\n        setStyle(this.element, { direction: 'initial' });\n        this.checkPriority(ele, innerEle, eleWidth, true);\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        this.element.style.removeProperty('direction');\n        this.createPopup();\n    };\n    Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {\n        var element = tbarObj.element;\n        var poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n        var nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n        var nodeIndex = 0;\n        var nodePri = 0;\n        poppedEle.forEach(function (el, index) {\n            nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n            if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n                if (tbarObj.tbResize && nodes.length > index) {\n                    ele.insertBefore(el, nodes[index]);\n                    ++nodePri;\n                }\n                else {\n                    ele.insertBefore(el, ele.children[nodes.length]);\n                    ++nodePri;\n                }\n            }\n            else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (el.classList.contains(CLS_POPOVERFLOW)) {\n                popupPri.push(el);\n            }\n            else if (tbarObj.tbResize) {\n                ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n                ++nodeIndex;\n            }\n            else {\n                ele.appendChild(el);\n            }\n            if (el.classList.contains(CLS_SEPARATOR)) {\n                setStyle(el, { display: '', height: sepHeight + 'px' });\n            }\n            else {\n                setStyle(el, { display: '', height: eleHeight + 'px' });\n            }\n        });\n        popupPri.forEach(function (el) {\n            ele.appendChild(el);\n        });\n        var tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n        for (var i = tbarEle.length - 1; i >= 0; i--) {\n            var tbarElement = tbarEle[i];\n            if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n                setStyle(tbarElement, { display: 'none' });\n            }\n            else {\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.createPopup = function () {\n        var element = this.element;\n        var sepHeight;\n        var sepItem;\n        if (this.overflowMode === 'Extended') {\n            sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n            sepHeight = (element.style.height === 'auto' || element.style.height === '') ? null : sepItem.offsetHeight;\n        }\n        var eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n        var eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : (eleItem && eleItem.offsetHeight);\n        var ele;\n        var popupPri = [];\n        if (select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element)) {\n            ele = select('#' + element.id + '_popup.' + CLS_POPUPCLASS, element);\n        }\n        else {\n            var extendEle = this.createElement('div', {\n                id: element.id + '_popup', className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n            });\n            var popupEle = this.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n            ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n        }\n        this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n        this.popupInit(element, ele);\n    };\n    Toolbar.prototype.getElementOffsetY = function () {\n        return (this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ?\n            this.element.clientHeight : this.element.offsetHeight);\n    };\n    Toolbar.prototype.popupInit = function (element, ele) {\n        if (!this.popObj) {\n            element.appendChild(ele);\n            if (this.cssClass) {\n                addClass([ele], this.cssClass.split(' '));\n            }\n            setStyle(this.element, { overflow: '' });\n            var eleStyles = window.getComputedStyle(this.element);\n            var popup = new Popup(null, {\n                relateTo: this.element,\n                offsetY: (this.isVertical) ? 0 : this.getElementOffsetY(),\n                enableRtl: this.enableRtl,\n                open: this.popupOpen.bind(this),\n                close: this.popupClose.bind(this),\n                collision: { Y: this.enableCollision ? 'flip' : 'none' },\n                position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n            });\n            popup.appendTo(ele);\n            if (this.overflowMode === 'Extended') {\n                popup.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n                popup.offsetX = 0;\n            }\n            EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n            EventHandler.add(document, 'click ', this.docEvent.bind(this));\n            popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n            if (this.isVertical) {\n                popup.element.style.visibility = 'hidden';\n            }\n            if (this.isExtendedOpen) {\n                var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n                popupNav.classList.add(CLS_TBARNAVACT);\n                classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n                this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n            }\n            else {\n                popup.hide();\n            }\n            this.popObj = popup;\n            this.element.setAttribute('aria-haspopup', 'true');\n        }\n        else {\n            var popupEle = this.popObj.element;\n            setStyle(popupEle, { maxHeight: '', display: 'block' });\n            setStyle(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n        }\n    };\n    Toolbar.prototype.tbarPopupHandler = function (isOpen) {\n        if (this.overflowMode === 'Extended') {\n            if (isOpen) {\n                this.add(this.element, CLS_EXTENDEDPOPOPEN);\n            }\n            else {\n                this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Toolbar.prototype.popupOpen = function (e) {\n        var popObj = this.popObj;\n        if (!this.isVertical) {\n            popObj.offsetY = this.getElementOffsetY();\n            popObj.dataBind();\n        }\n        var popupEle = this.popObj.element;\n        var toolEle = this.popObj.element.parentElement;\n        var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n        setStyle(popObj.element, { height: 'auto', maxHeight: '' });\n        popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n        if (this.overflowMode === 'Extended') {\n            popObj.element.style.minHeight = '';\n        }\n        var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.tbarPopupHandler(true);\n        var scrollVal = isNOU(window.scrollY) ? 0 : window.scrollY;\n        if (!this.isVertical && ((window.innerHeight + scrollVal) < popupElePos) && (this.element.offsetTop < popupEle.offsetHeight)) {\n            var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n            popObj.height = overflowHeight + 'px';\n            for (var i = 0; i <= popupEle.childElementCount; i++) {\n                var ele = popupEle.children[i];\n                if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n                    overflowHeight = ele.offsetTop;\n                    break;\n                }\n            }\n            setStyle(popObj.element, { maxHeight: overflowHeight + 'px' });\n        }\n        else if (this.isVertical) {\n            var tbEleData = this.element.getBoundingClientRect();\n            setStyle(popObj.element, { maxHeight: (tbEleData.top + this.element.offsetHeight) + 'px', bottom: 0, visibility: '' });\n        }\n        if (popObj) {\n            var popupOffset = popupEle.getBoundingClientRect();\n            if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {\n                popObj.collision = { Y: 'none' };\n                popObj.dataBind();\n            }\n            popObj.refreshPosition();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Toolbar.prototype.popupClose = function (e) {\n        var element = this.element;\n        var popupNav = element.querySelector('.' + CLS_TBARNAV);\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.remove(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n        this.tbarPopupHandler(false);\n    };\n    Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n        var popPriority = this.popupPriCount > 0;\n        var len = inEle.length;\n        var eleWid = eleWidth;\n        var eleOffset;\n        var checkoffset;\n        var sepCheck = 0;\n        var itemCount = 0;\n        var itemPopCount = 0;\n        var checkClass = function (ele, val) {\n            var rVal = false;\n            val.forEach(function (cls) {\n                if (ele.classList.contains(cls)) {\n                    rVal = true;\n                }\n            });\n            return rVal;\n        };\n        for (var i = len - 1; i >= 0; i--) {\n            var mrgn = void 0;\n            var compuStyle = window.getComputedStyle(inEle[i]);\n            if (this.isVertical) {\n                mrgn = parseFloat((compuStyle).marginTop);\n                mrgn += parseFloat((compuStyle).marginBottom);\n            }\n            else {\n                mrgn = parseFloat((compuStyle).marginRight);\n                mrgn += parseFloat((compuStyle).marginLeft);\n            }\n            var fstEleCheck = inEle[i] === this.tbarEle[0];\n            if (fstEleCheck) {\n                this.tbarEleMrgn = mrgn;\n            }\n            eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n            var eleWid_1 = fstEleCheck ? (eleOffset + mrgn) : eleOffset;\n            if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n                inEle[i].classList.add(CLS_POPUP);\n                if (this.isVertical) {\n                    setStyle(inEle[i], { display: 'none', minHeight: eleWid_1 + 'px' });\n                }\n                else {\n                    setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                }\n                itemPopCount++;\n            }\n            if (this.isVertical) {\n                checkoffset = (inEle[i].offsetTop + inEle[i].offsetHeight + mrgn) > eleWidth;\n            }\n            else {\n                checkoffset = (inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth;\n            }\n            if (checkoffset) {\n                if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n                    if (this.overflowMode === 'Extended') {\n                        if (itemCount === itemPopCount) {\n                            var sepEle = inEle[i];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                inEle[i].classList.add(CLS_POPUP);\n                                itemPopCount++;\n                            }\n                        }\n                        itemCount++;\n                    }\n                    else if (this.overflowMode === 'Popup') {\n                        if (sepCheck > 0 && itemCount === itemPopCount) {\n                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                setStyle(sepEle, { display: 'none' });\n                            }\n                        }\n                        sepCheck++;\n                        itemCount = 0;\n                        itemPopCount = 0;\n                    }\n                }\n                else {\n                    itemCount++;\n                }\n                if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n                else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                    inEle[i].classList.add(CLS_POPUP);\n                    if (this.isVertical) {\n                        setStyle(inEle[i], { display: 'none', minHeight: eleWid_1 + 'px' });\n                    }\n                    else {\n                        setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                    }\n                    itemPopCount++;\n                }\n                else {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n            }\n        }\n        if (pre) {\n            var popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n            this.checkPriority(ele, popedEle, eleWid, false);\n        }\n    };\n    Toolbar.prototype.createPopupIcon = function (element) {\n        var id = element.id.concat('_nav');\n        var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n        className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n        var nav = this.createElement('div', { id: id, className: className });\n        if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n            nav.classList.add('e-ie-align');\n        }\n        var navItem = this.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        nav.setAttribute('role', 'list');\n        element.appendChild(nav);\n    };\n    Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n        var ignoreCount = ig;\n        var popEle = this.popObj.element;\n        var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n        var priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n        var checkClass = function (ele, val) {\n            return ele.classList.contains(val);\n        };\n        if (selectAll(query, inEle).length === 0) {\n            var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n            var ignoreCheck = (!isNOU(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n            if ((!isNOU(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep)) || ignoreCheck) {\n                var sepDisplay = 'none';\n                eleSep.style.display = 'inherit';\n                var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n                var prevSep = eleSep.previousElementSibling;\n                if ((elWid + eleSepWidth) < wid || des) {\n                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n                    if (!isNOU(prevSep)) {\n                        prevSep.style.display = '';\n                    }\n                }\n                else {\n                    if (prevSep.classList.contains(CLS_SEPARATOR)) {\n                        prevSep.style.display = sepDisplay;\n                    }\n                }\n                eleSep.style.display = '';\n            }\n            else {\n                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n            }\n        }\n        else {\n            inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n        }\n    };\n    Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n        var _this = this;\n        var ele = this.element;\n        var isVer = this.isVertical;\n        var innerEle = ele.querySelector('.' + CLS_ITEMS);\n        var popNav = ele.querySelector('.' + CLS_TBARNAV);\n        if (isNOU(popNav)) {\n            return;\n        }\n        innerEle.removeAttribute('style');\n        popupEle.style.display = 'block';\n        var dimension;\n        if (isVer) {\n            dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n        }\n        else {\n            dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n        }\n        var popupEleWidth = 0;\n        [].slice.call(popupEle.children).forEach(function (el) {\n            popupEleWidth += _this.popupEleWidth(el);\n            setStyle(el, { 'position': '' });\n        });\n        if ((dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth)) > (popupEleWidth) && this.popupPriCount === 0) {\n            destroy = true;\n        }\n        this.popupEleRefresh(dimension, popupEle, destroy);\n        popupEle.style.display = '';\n        if (popupEle.children.length === 0 && popNav && this.popObj) {\n            detach(popNav);\n            popNav = null;\n            this.popObj.destroy();\n            detach(this.popObj.element);\n            this.popObj = null;\n            ele.setAttribute('aria-haspopup', 'false');\n        }\n    };\n    Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n        var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n        var ignoreInx = [];\n        var count = 0;\n        if (ignoreEle.length > 0) {\n            ignoreEle.forEach(function (ele) {\n                ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n            });\n        }\n        else {\n            return 0;\n        }\n        ignoreInx.forEach(function (val) {\n            if (val <= index) {\n                count++;\n            }\n        });\n        return count;\n    };\n    Toolbar.prototype.checkPopupRefresh = function (root, popEle) {\n        popEle.style.display = 'block';\n        var elWid = this.popupEleWidth(popEle.firstElementChild);\n        popEle.firstElementChild.style.removeProperty('Position');\n        var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n        var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n        popEle.style.removeProperty('display');\n        if (tbarWidth > (elWid + tbarItemsWid)) {\n            return true;\n        }\n        return false;\n    };\n    Toolbar.prototype.popupEleWidth = function (el) {\n        el.style.position = 'absolute';\n        var elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n        var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n        if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n            var btn = el.children[0];\n            if (!isNOU(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n                btnText.style.display = 'none';\n            }\n            else if (!isNOU(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n                btnText.style.display = 'block';\n            }\n            btn.style.minWidth = '0%';\n            elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n            btn.style.minWidth = '';\n            btn.style.minHeight = '';\n            if (!isNOU(btnText)) {\n                btnText.style.display = '';\n            }\n        }\n        return elWidth;\n    };\n    Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n        var popPriority = this.popupPriCount > 0;\n        var eleSplice = this.tbarEle;\n        var priEleCnt;\n        var index;\n        var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n        var ignoreCount = 0;\n        var _loop_1 = function (el) {\n            if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n                return \"continue\";\n            }\n            var elWidth = this_1.popupEleWidth(el);\n            if (el === this_1.tbarEle[0]) {\n                elWidth += this_1.tbarEleMrgn;\n            }\n            el.style.position = '';\n            if (elWidth < width || destroy) {\n                setStyle(el, { minWidth: '', height: '', minHeight: '' });\n                if (!el.classList.contains(CLS_POPOVERFLOW)) {\n                    el.classList.remove(CLS_POPUP);\n                }\n                index = this_1.tbarEle.indexOf(el);\n                if (this_1.tbarAlign) {\n                    var pos = this_1.items[index].align;\n                    index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n                    eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];\n                    innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n                }\n                var sepBeforePri_1 = 0;\n                if (this_1.overflowMode !== 'Extended') {\n                    eleSplice.slice(0, index).forEach(function (el) {\n                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n                            if (el.classList.contains(CLS_SEPARATOR)) {\n                                el.style.display = '';\n                                width -= el.offsetWidth;\n                            }\n                            sepBeforePri_1++;\n                        }\n                    });\n                }\n                ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n                if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                    this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n                    width -= el.offsetWidth;\n                }\n                else if (index === 0) {\n                    innerEle.insertBefore(el, innerEle.firstChild);\n                    width -= el.offsetWidth;\n                }\n                else {\n                    priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n                    innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n                    width -= el.offsetWidth;\n                }\n                el.style.height = '';\n            }\n            else {\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var state_1 = _loop_1(el);\n            if (state_1 === \"break\")\n                break;\n        }\n        var checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n        if (checkOverflow && !destroy) {\n            this.renderOverflowMode();\n        }\n    };\n    Toolbar.prototype.removePositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        this.remove(item, CLS_TBARPOS);\n        var innerItem = [].slice.call(item.childNodes);\n        innerItem[1].removeAttribute('style');\n        innerItem[2].removeAttribute('style');\n    };\n    Toolbar.prototype.refreshPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        this.add(item, CLS_TBARPOS);\n        this.itemPositioning();\n    };\n    Toolbar.prototype.itemPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        var margin;\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        var innerItem;\n        if (this.scrollModule) {\n            var trgClass = (this.isVertical) ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n            innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n        }\n        else {\n            innerItem = [].slice.call(item.childNodes);\n        }\n        if (this.isVertical) {\n            margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n        }\n        else {\n            margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n        }\n        var tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n        if (popupNav) {\n            tbarWid -= (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth);\n            var popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n            innerItem[2].removeAttribute('style');\n            if (this.isVertical) {\n                if (this.enableRtl) {\n                    innerItem[2].style.top = popWid;\n                }\n                else {\n                    innerItem[2].style.bottom = popWid;\n                }\n            }\n            else {\n                if (this.enableRtl) {\n                    innerItem[2].style.left = popWid;\n                }\n                else {\n                    innerItem[2].style.right = popWid;\n                }\n            }\n        }\n        if (tbarWid <= margin) {\n            return;\n        }\n        var value = (((tbarWid - margin)) - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n        innerItem[1].removeAttribute('style');\n        var mrgn = ((!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value) + 'px';\n        if (this.isVertical) {\n            if (this.enableRtl) {\n                innerItem[1].style.marginBottom = mrgn;\n            }\n            else {\n                innerItem[1].style.marginTop = mrgn;\n            }\n        }\n        else {\n            if (this.enableRtl) {\n                innerItem[1].style.marginRight = mrgn;\n            }\n            else {\n                innerItem[1].style.marginLeft = mrgn;\n            }\n        }\n    };\n    Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n        var _this = this;\n        if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n            return;\n        }\n        var alignDiv = [];\n        alignDiv.push(this.createElement('div', { className: CLS_TBARLEFT }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARCENTER }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARRIGHT }));\n        if (pos === 0 && item.align !== 'Left') {\n            alignDiv.forEach(function (ele) {\n                itemEle.appendChild(ele);\n            });\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n        else if (item.align !== 'Left') {\n            var alignEle = itemEle.childNodes;\n            var leftAlign_1 = alignDiv[0];\n            [].slice.call(alignEle).forEach(function (el) {\n                _this.tbarAlgEle.lefts.push(el);\n                leftAlign_1.appendChild(el);\n            });\n            itemEle.appendChild(leftAlign_1);\n            itemEle.appendChild(alignDiv[1]);\n            itemEle.appendChild(alignDiv[2]);\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n    };\n    Toolbar.prototype.ctrlTemplate = function () {\n        var _this = this;\n        this.ctrlTem = this.trgtEle.cloneNode(true);\n        this.add(this.trgtEle, CLS_ITEMS);\n        this.tbarEle = [];\n        var innerEle = [].slice.call(this.trgtEle.children);\n        innerEle.forEach(function (ele) {\n            if (ele.tagName === 'DIV') {\n                _this.tbarEle.push(ele);\n                ele.setAttribute('aria-disabled', 'false');\n                _this.add(ele, CLS_ITEM);\n            }\n        });\n    };\n    Toolbar.prototype.renderItems = function () {\n        var ele = this.element;\n        var items = this.items;\n        if (this.trgtEle != null) {\n            this.ctrlTemplate();\n        }\n        else if (ele && items.length > 0) {\n            var itemEleDom = void 0;\n            if (ele && ele.children.length > 0) {\n                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n            }\n            if (!itemEleDom) {\n                itemEleDom = this.createElement('div', { className: CLS_ITEMS });\n            }\n            this.itemsAlign(items, itemEleDom);\n            ele.appendChild(itemEleDom);\n        }\n    };\n    Toolbar.prototype.setAttr = function (attr, element) {\n        var key = Object.keys(attr);\n        var keyVal;\n        for (var i = 0; i < key.length; i++) {\n            keyVal = key[i];\n            if (keyVal === 'class') {\n                this.add(element, attr[keyVal]);\n            }\n            else {\n                element.setAttribute(keyVal, attr[keyVal]);\n            }\n        }\n    };\n    /**\n     * Enables or disables the specified Toolbar item.\n     *\n     * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n     * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, `isEnable` is set to true.\n     * @returns {void}.\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        var elements = items;\n        var len = elements.length;\n        var ele;\n        if (isNOU(isEnable)) {\n            isEnable = true;\n        }\n        var enable = function (isEnable, ele) {\n            if (isEnable) {\n                ele.classList.remove(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'false');\n            }\n            else {\n                ele.classList.add(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'true');\n            }\n        };\n        if (!isNOU(len) && len >= 1) {\n            for (var a = 0, element = [].slice.call(elements); a < len; a++) {\n                var itemElement = element[a];\n                if (typeof (itemElement) === 'number') {\n                    ele = this.getElementByIndex(itemElement);\n                    if (isNOU(ele)) {\n                        return;\n                    }\n                    else {\n                        elements[a] = ele;\n                    }\n                }\n                else {\n                    ele = itemElement;\n                }\n                enable(isEnable, ele);\n            }\n            if (isEnable) {\n                removeClass(elements, CLS_DISABLE);\n            }\n            else {\n                addClass(elements, CLS_DISABLE);\n            }\n        }\n        else {\n            if (typeof (elements) === 'number') {\n                ele = this.getElementByIndex(elements);\n                if (isNOU(ele)) {\n                    return;\n                }\n            }\n            else {\n                ele = items;\n            }\n            enable(isEnable, ele);\n        }\n    };\n    Toolbar.prototype.getElementByIndex = function (index) {\n        if (this.tbarEle[index]) {\n            return this.tbarEle[index];\n        }\n        return null;\n    };\n    /**\n     * Adds new items to the Toolbar that accepts an array as Toolbar items.\n     *\n     * @param  {ItemModel[]} items - DOM element or an array of items to be added to the Toolbar.\n     * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n     * @returns {void}.\n     */\n    Toolbar.prototype.addItems = function (items, index) {\n        var innerItems;\n        this.extendedOpen();\n        var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(itemsDiv)) {\n            this.itemsRerender(items);\n            return;\n        }\n        var innerEle;\n        var itemAgn = 'Left';\n        if (isNOU(index)) {\n            index = 0;\n        }\n        items.forEach(function (e) {\n            if (!isNOU(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n                itemAgn = e.align;\n            }\n        });\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (isNOU(item.type)) {\n                item.type = 'Button';\n            }\n            innerItems = selectAll('.' + CLS_ITEM, this.element);\n            item.align = itemAgn;\n            innerEle = this.renderSubComponent(item, index);\n            if (this.tbarEle.length >= index && innerItems.length >= 0) {\n                if (isNOU(this.scrollModule)) {\n                    this.destroyMode();\n                }\n                var algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n                var ele = void 0;\n                if (!this.tbarAlign && itemAgn !== 'Left') {\n                    this.tbarItemAlign(item, itemsDiv, 1);\n                    this.tbarAlign = true;\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.appendChild(innerEle);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n                    this.refreshPositioning();\n                }\n                else if (this.tbarAlign) {\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.insertBefore(innerEle, ele.children[index]);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n                    this.refreshPositioning();\n                }\n                else if (innerItems.length === 0) {\n                    innerItems = selectAll('.' + CLS_ITEMS, this.element);\n                    innerItems[0].appendChild(innerEle);\n                }\n                else {\n                    innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n                }\n                this.items.splice(index, 0, item);\n                if (item.template) {\n                    this.tbarEle.splice(this.tbarEle.length - 1, 1);\n                }\n                this.tbarEle.splice(index, 0, innerEle);\n                index++;\n                this.offsetWid = itemsDiv.offsetWidth;\n            }\n        }\n        itemsDiv.style.width = '';\n        this.renderOverflowMode();\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n     *\n     * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n     * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n     * @returns {void}.\n     */\n    Toolbar.prototype.removeItems = function (args) {\n        var elements = args;\n        var index;\n        var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (typeof (elements) === 'number') {\n            index = parseInt(args.toString(), 10);\n            this.removeItemByIndex(index, innerItems);\n        }\n        else {\n            if (elements && elements.length > 1) {\n                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n                    var ele = _a[_i];\n                    index = this.tbarEle.indexOf(ele);\n                    this.removeItemByIndex(index, innerItems);\n                    innerItems = selectAll('.' + CLS_ITEM, this.element);\n                }\n            }\n            else {\n                var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n                index = innerItems.indexOf(ele);\n                this.removeItemByIndex(index, innerItems);\n            }\n        }\n        this.resize();\n    };\n    Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n        if (this.tbarEle[index] && innerItems[index]) {\n            var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n            if (this.tbarAlign) {\n                var indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n                this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n            }\n            if (this.isReact) {\n                this.clearTemplate();\n            }\n            var btnItem = innerItems[index].querySelector('.e-control.e-btn');\n            if (!isNOU(btnItem) && !isNOU(btnItem.ej2_instances[0]) && !(btnItem.ej2_instances[0].isDestroyed)) {\n                btnItem.ej2_instances[0].destroy();\n            }\n            detach(innerItems[index]);\n            this.items.splice(eleIdx, 1);\n            this.tbarEle.splice(eleIdx, 1);\n        }\n    };\n    Toolbar.prototype.templateRender = function (templateProp, innerEle, item, index) {\n        var itemType = item.type;\n        var eleObj = templateProp;\n        var isComponent;\n        if (typeof (templateProp) === 'object') {\n            isComponent = typeof (eleObj.appendTo) === 'function';\n        }\n        if (typeof (templateProp) === 'string' || !isComponent) {\n            var templateFn = void 0;\n            var val = templateProp;\n            var regEx = new RegExp(/<(?=.*? .*?\\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\\/\\1>/i);\n            val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n            try {\n                if (typeof (templateProp) === 'object' && !isNOU(templateProp.tagName)) {\n                    innerEle.appendChild(templateProp);\n                }\n                else if (typeof (templateProp) === 'string' && regEx.test(val)) {\n                    innerEle.innerHTML = val;\n                }\n                else if (document.querySelectorAll(val).length) {\n                    var ele = document.querySelector(val);\n                    var tempStr = ele.outerHTML.trim();\n                    innerEle.appendChild(ele);\n                    ele.style.display = '';\n                    if (!isNOU(tempStr)) {\n                        this.tempId.push(val);\n                    }\n                }\n                else {\n                    templateFn = templateCompiler(val);\n                }\n            }\n            catch (e) {\n                templateFn = templateCompiler(val);\n            }\n            var tempArray = void 0;\n            if (!isNOU(templateFn)) {\n                var toolbarTemplateID = this.element.id + index + '_template';\n                tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n            }\n            if (!isNOU(tempArray) && tempArray.length > 0) {\n                [].slice.call(tempArray).forEach(function (ele) {\n                    if (!isNOU(ele.tagName)) {\n                        ele.style.display = '';\n                    }\n                    innerEle.appendChild(ele);\n                });\n            }\n        }\n        else if (itemType === 'Input') {\n            var ele = this.createElement('input');\n            if (item.id) {\n                ele.id = item.id;\n            }\n            else {\n                ele.id = getUniqueID('tbr-ipt');\n            }\n            innerEle.appendChild(ele);\n            eleObj.appendTo(ele);\n        }\n        this.add(innerEle, CLS_TEMPLATE);\n        this.tbarEle.push(innerEle);\n    };\n    Toolbar.prototype.buttonRendering = function (item, innerEle) {\n        var dom = this.createElement('button', { className: CLS_TBARBTN });\n        dom.setAttribute('type', 'button');\n        var textStr = item.text;\n        var iconCss;\n        var iconPos;\n        if (item.id) {\n            dom.id = item.id;\n        }\n        else {\n            dom.id = getUniqueID('e-tbr-btn');\n        }\n        var btnTxt = this.createElement('span', { className: 'e-tbar-btn-text' });\n        if (textStr) {\n            btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n            dom.appendChild(btnTxt);\n            dom.classList.add('e-tbtn-txt');\n        }\n        else {\n            this.add(innerEle, 'e-tbtn-align');\n        }\n        if (item.prefixIcon || item.suffixIcon) {\n            if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n                iconCss = item.prefixIcon + ' e-icons';\n                iconPos = 'Left';\n            }\n            else {\n                iconCss = item.suffixIcon + ' e-icons';\n                iconPos = 'Right';\n            }\n        }\n        var btnObj = new Button({ iconCss: iconCss, iconPosition: iconPos });\n        btnObj.createElement = this.createElement;\n        btnObj.appendTo(dom);\n        if (item.width) {\n            setStyle(dom, { 'width': formatUnit(item.width) });\n        }\n        return dom;\n    };\n    Toolbar.prototype.renderSubComponent = function (item, index) {\n        var dom;\n        var innerEle = this.createElement('div', { className: CLS_ITEM });\n        innerEle.setAttribute('aria-disabled', 'false');\n        var tempDom = this.createElement('div', {\n            innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n        });\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        if (item.htmlAttributes) {\n            this.setAttr(item.htmlAttributes, innerEle);\n        }\n        if (item.tooltipText) {\n            innerEle.setAttribute('title', tempDom.textContent);\n        }\n        if (item.cssClass) {\n            innerEle.className = innerEle.className + ' ' + item.cssClass;\n        }\n        if (item.template) {\n            this.templateRender(item.template, innerEle, item, index);\n        }\n        else {\n            switch (item.type) {\n                case 'Button':\n                    dom = this.buttonRendering(item, innerEle);\n                    dom.setAttribute('tabindex', '-1');\n                    dom.setAttribute('aria-label', (item.text || item.tooltipText));\n                    innerEle.appendChild(dom);\n                    innerEle.addEventListener('click', this.itemClick.bind(this));\n                    break;\n                case 'Separator':\n                    this.add(innerEle, CLS_SEPARATOR);\n                    break;\n            }\n        }\n        if (item.showTextOn) {\n            var sTxt = item.showTextOn;\n            if (sTxt === 'Toolbar') {\n                this.add(innerEle, CLS_POPUPTEXT);\n                this.add(innerEle, 'e-tbtn-align');\n            }\n            else if (sTxt === 'Overflow') {\n                this.add(innerEle, CLS_TBARTEXT);\n            }\n        }\n        if (item.overflow) {\n            var overflow = item.overflow;\n            if (overflow === 'Show') {\n                this.add(innerEle, CLS_TBAROVERFLOW);\n            }\n            else if (overflow === 'Hide') {\n                if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n                    this.add(innerEle, CLS_POPOVERFLOW);\n                }\n            }\n        }\n        if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n            this.add(innerEle, CLS_POPPRI);\n            this.popupPriCount++;\n        }\n        if (item.disabled) {\n            this.add(innerEle, CLS_DISABLE);\n        }\n        if (item.visible === false) {\n            this.add(innerEle, CLS_HIDDEN);\n        }\n        return innerEle;\n    };\n    Toolbar.prototype.itemClick = function (e) {\n        this.activeEleSwitch(e.currentTarget);\n    };\n    Toolbar.prototype.activeEleSwitch = function (ele) {\n        this.activeEleRemove(ele.firstElementChild);\n        this.activeEle.focus();\n    };\n    Toolbar.prototype.activeEleRemove = function (curEle) {\n        if (!isNOU(this.activeEle)) {\n            this.activeEle.setAttribute('tabindex', '-1');\n        }\n        this.activeEle = curEle;\n        if (isNOU(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n            curEle.removeAttribute('tabindex');\n        }\n        else {\n            this.activeEle.setAttribute('tabindex', '0');\n        }\n    };\n    Toolbar.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - Returns the module name as string.\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    Toolbar.prototype.itemsRerender = function (newProp) {\n        this.items = this.tbarItemsCol;\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        this.destroyMode();\n        this.destroyItems();\n        this.items = newProp;\n        this.tbarItemsCol = this.items;\n        this.renderItems();\n        this.renderOverflowMode();\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Toolbar.prototype.resize = function () {\n        var ele = this.element;\n        this.tbResize = true;\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.overflowMode === 'Popup') {\n            this.popObj.hide();\n        }\n        var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n        if (!checkOverflow) {\n            this.destroyScroll();\n            var multirowele = ele.querySelector('.' + CLS_ITEMS);\n            if (!isNOU(multirowele)) {\n                this.remove(multirowele, CLS_MULTIROWPOS);\n                if (this.tbarAlign) {\n                    this.add(multirowele, CLS_TBARPOS);\n                }\n            }\n        }\n        if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n            return;\n        }\n        if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n            this.renderOverflowMode();\n        }\n        if (this.popObj) {\n            if (this.overflowMode === 'Extended') {\n                var eleStyles = window.getComputedStyle(this.element);\n                this.popObj.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n            }\n            if (this.tbarAlign) {\n                this.removePositioning();\n            }\n            this.popupRefresh(this.popObj.element, false);\n            if (this.tbarAlign) {\n                this.refreshPositioning();\n            }\n        }\n        if (this.element.querySelector('.' + CLS_HSCROLLBAR)) {\n            this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR).offsetWidth;\n        }\n        this.offsetWid = ele.offsetWidth;\n        this.tbResize = false;\n        this.separator();\n    };\n    Toolbar.prototype.extendedOpen = function () {\n        var sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n        if (this.overflowMode === 'Extended' && sib) {\n            this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n        }\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     *\n     * @param  {ToolbarModel} newProp - It contains new value of the data.\n     * @param  {ToolbarModel} oldProp - It contains old value of the data.\n     * @returns {void}\n     * @private\n     */\n    Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var tEle = this.element;\n        var wid = tEle.offsetWidth;\n        this.extendedOpen();\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n                        var changedProb = Object.keys(newProp.items);\n                        for (var i = 0; i < changedProb.length; i++) {\n                            var index = parseInt(Object.keys(newProp.items)[i], 10);\n                            var property = Object.keys(newProp.items[index])[0];\n                            var newProperty = Object(newProp.items[index])[property];\n                            if (typeof newProperty !== 'function') {\n                                if (this.tbarAlign || property === 'align') {\n                                    this.refresh();\n                                    this.trigger('created');\n                                    break;\n                                }\n                                var popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                                var booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n                                if ((popupPriCheck) || (this.items[index].showAlwaysInPopup) && booleanCheck) {\n                                    --this.popupPriCount;\n                                }\n                                if (isNOU(this.scrollModule)) {\n                                    this.destroyMode();\n                                }\n                                var itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n                                if (this.isReact) {\n                                    this.clearTemplate();\n                                }\n                                detach(itemCol[index]);\n                                this.tbarEle.splice(index, 1);\n                                this.addItems([this.items[index]], index);\n                                this.items.splice(index, 1);\n                                if (this.items[index].template) {\n                                    this.tbarEle.splice(this.items.length, 1);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        this.itemsRerender(newProp.items);\n                    }\n                    break;\n                case 'width':\n                    setStyle(tEle, { 'width': formatUnit(newProp.width) });\n                    this.renderOverflowMode();\n                    if (this.popObj && wid < tEle.offsetWidth) {\n                        this.popupRefresh(this.popObj.element, false);\n                    }\n                    break;\n                case 'height':\n                    setStyle(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'overflowMode':\n                    this.destroyMode();\n                    this.renderOverflowMode();\n                    if (this.enableRtl) {\n                        this.add(tEle, CLS_RTL);\n                    }\n                    this.refreshOverflow();\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.add(tEle, CLS_RTL);\n                    }\n                    else {\n                        this.remove(tEle, CLS_RTL);\n                    }\n                    if (!isNOU(this.scrollModule)) {\n                        if (newProp.enableRtl) {\n                            this.add(this.scrollModule.element, CLS_RTL);\n                        }\n                        else {\n                            this.remove(this.scrollModule.element, CLS_RTL);\n                        }\n                    }\n                    if (!isNOU(this.popObj)) {\n                        if (newProp.enableRtl) {\n                            this.add(this.popObj.element, CLS_RTL);\n                        }\n                        else {\n                            this.remove(this.popObj.element, CLS_RTL);\n                        }\n                    }\n                    if (this.tbarAlign) {\n                        this.itemPositioning();\n                    }\n                    break;\n                case 'scrollStep':\n                    if (this.scrollModule) {\n                        this.scrollModule.scrollStep = this.scrollStep;\n                    }\n                    break;\n                case 'enableCollision':\n                    if (this.popObj) {\n                        this.popObj.collision = { Y: this.enableCollision ? 'flip' : 'none' };\n                    }\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'allowKeyboard':\n                    this.unwireKeyboardEvent();\n                    if (newProp.allowKeyboard) {\n                        this.wireKeyboardEvent();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Shows or hides the Toolbar item that is in the specified index.\n     *\n     * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n     * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n     * @returns {void}.\n     */\n    Toolbar.prototype.hideItem = function (index, value) {\n        var isElement = (typeof (index) === 'object') ? true : false;\n        var eleIndex = index;\n        var initIndex;\n        var ele;\n        var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (isElement) {\n            ele = index;\n        }\n        else if (this.tbarEle[eleIndex]) {\n            var innerItems_1 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n            ele = innerItems_1[eleIndex];\n        }\n        if (ele) {\n            if (value) {\n                ele.classList.add(CLS_HIDDEN);\n            }\n            else {\n                ele.classList.remove(CLS_HIDDEN);\n            }\n            if (value && isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                if (isNOU(ele.firstElementChild.getAttribute('tabindex'))) {\n                    ele.firstElementChild.setAttribute('tabindex', '-1');\n                    var innerItems_2 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n                    if (isElement) {\n                        eleIndex = innerItems_2.indexOf(ele);\n                    }\n                    var nextEle = innerItems_2[++eleIndex];\n                    while (nextEle) {\n                        var skipEle = this.eleContains(nextEle);\n                        if (!skipEle) {\n                            nextEle.firstElementChild.removeAttribute('tabindex');\n                            break;\n                        }\n                        nextEle = innerItems_2[++eleIndex];\n                    }\n                }\n            }\n            else if (isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                initIndex = 0;\n                var setFlag = false;\n                var removeFlag = false;\n                var initELe = innerItems[initIndex];\n                while (initELe) {\n                    if (!initELe.classList.contains(CLS_SEPARATOR)) {\n                        if (isNOU(initELe.firstElementChild.getAttribute('tabindex'))) {\n                            initELe.firstElementChild.setAttribute('tabindex', '-1');\n                            setFlag = true;\n                        }\n                        else {\n                            if (setFlag && removeFlag) {\n                                break;\n                            }\n                            var skipEle = this.eleContains(initELe);\n                            if (!skipEle) {\n                                initELe.firstElementChild.removeAttribute('tabindex');\n                                removeFlag = true;\n                            }\n                            initELe = innerItems[++initIndex];\n                        }\n                    }\n                    else {\n                        initELe = innerItems[++initIndex];\n                    }\n                }\n            }\n            this.refreshOverflow();\n        }\n    };\n    __decorate([\n        Collection([], Item)\n    ], Toolbar.prototype, \"items\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], Toolbar.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('Scrollable')\n    ], Toolbar.prototype, \"overflowMode\", void 0);\n    __decorate([\n        Property()\n    ], Toolbar.prototype, \"scrollStep\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"enableCollision\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"clicked\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"beforeCreate\", void 0);\n    Toolbar = __decorate([\n        NotifyPropertyChanges\n    ], Toolbar);\n    return Toolbar;\n}(Component));\nexport { Toolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}