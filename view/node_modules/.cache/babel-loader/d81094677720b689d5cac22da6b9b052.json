{"ast":null,"code":"import { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { EventHandler, select, removeClass, addClass, detach, compile, L10n } from '@syncfusion/ej2-base';\nimport { Browser, attributes, isNullOrUndefined, append, closest, prepend } from '@syncfusion/ej2-base';\nimport { dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\n\nvar CheckBoxSelection =\n/** @class */\nfunction () {\n  function CheckBoxSelection(parent) {\n    this.activeLi = [];\n    this.activeEle = [];\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n\n  CheckBoxSelection.prototype.getModuleName = function () {\n    return 'CheckBoxSelection';\n  };\n\n  CheckBoxSelection.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on('updatelist', this.listSelection, this);\n    this.parent.on('listoption', this.listOption, this);\n    this.parent.on('selectAll', this.setSelectAll, this);\n    this.parent.on('checkSelectAll', this.checkSelectAll, this);\n    this.parent.on('searchBox', this.setSearchBox, this);\n    this.parent.on('blur', this.onBlurHandler, this);\n    this.parent.on('targetElement', this.targetElement, this);\n    this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n    this.parent.on('inputFocus', this.getFocus, this);\n    this.parent.on('reOrder', this.setReorder, this);\n    this.parent.on('activeList', this.getActiveList, this);\n    this.parent.on('selectAllText', this.setLocale, this);\n    this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n    EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n    this.parent.on('addItem', this.checboxCreate, this);\n    this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n  };\n\n  CheckBoxSelection.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('updatelist', this.listSelection);\n    this.parent.off('listoption', this.listOption);\n    this.parent.off('selectAll', this.setSelectAll);\n    this.parent.off('checkSelectAll', this.checkSelectAll);\n    this.parent.off('searchBox', this.setSearchBox);\n    this.parent.off('blur', this.onBlurHandler);\n    this.parent.off('targetElement', this.targetElement);\n    this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n    this.parent.off('inputFocus', this.getFocus);\n    this.parent.off('reOrder', this.setReorder);\n    this.parent.off('activeList', this.getActiveList);\n    this.parent.off('selectAllText', this.setLocale);\n    this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n    this.parent.off('addItem', this.checboxCreate);\n    this.parent.off('popupFullScreen', this.setPopupFullScreen);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.listOption = function (args) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n      };\n    } else {\n      var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n  };\n\n  CheckBoxSelection.prototype.setPlaceholder = function (props) {\n    Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n  };\n\n  CheckBoxSelection.prototype.checboxCreate = function (e) {\n    var item;\n\n    if (!isNullOrUndefined(e.item)) {\n      item = e.item;\n    } else {\n      item = e;\n    }\n\n    if (this.parent.enableGroupCheckBox || item.className !== 'e-list-group-item ' && item.className !== 'e-list-group-item') {\n      var checkboxEle = createCheckBox(this.parent.createElement, true);\n      var icon = select('div.' + ICON, item);\n      item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n      select('.' + CHECKBOXFRAME, checkboxEle);\n\n      if (this.parent.enableGroupCheckBox) {\n        this.parent.popupWrapper.classList.add('e-multiselect-group');\n      }\n\n      return item;\n    } else {\n      return item;\n    }\n  };\n\n  CheckBoxSelection.prototype.setSelectAll = function () {\n    if (this.parent.showSelectAll) {\n      if (isNullOrUndefined(this.checkAllParent)) {\n        this.checkAllParent = this.parent.createElement('div', {\n          className: checkAllParent\n        });\n        this.selectAllSpan = this.parent.createElement('span', {\n          className: 'e-all-text'\n        });\n        this.selectAllSpan.textContent = '';\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        this.checboxCreate(this.checkAllParent);\n\n        if (this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            append([this.checkAllParent], this.parent.filterParent);\n          } else {\n            append([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        if (!this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n          } else {\n            prepend([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n      }\n\n      if (this.parent.list.classList.contains('e-nodata') || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {\n        this.checkAllParent.style.display = 'none';\n      } else {\n        this.checkAllParent.style.display = 'block';\n      }\n\n      this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    } else if (!isNullOrUndefined(this.checkAllParent)) {\n      this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n\n  CheckBoxSelection.prototype.destroy = function () {\n    this.removeEventListener();\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n  };\n\n  CheckBoxSelection.prototype.listSelection = function (args) {\n    var target;\n\n    if (!isNullOrUndefined(args.e)) {\n      var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n      target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains('e-frame') && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1] : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n    } else {\n      var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n      target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n    }\n\n    if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n      target = args.li.firstElementChild.childNodes[1];\n    }\n\n    if (!isNullOrUndefined(target)) {\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n    }\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n      var selectAll = false;\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), args.li, args.e, selectAll);\n    }\n  };\n\n  CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll) {\n    this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll);\n  };\n\n  CheckBoxSelection.prototype.clickHandler = function (e) {\n    var target;\n\n    if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.currentTarget;\n    }\n\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n    var selectAll = true;\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), null, e, selectAll);\n    }\n\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll) {\n    var ariaState;\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.remove(INDETERMINATE);\n      frameSpan.classList.add(CHECK);\n      ariaState = 'true';\n\n      if (selectAll) {\n        this.parent.selectAllItems(true, e);\n        this.setLocale(true);\n      }\n    } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n      removeClass([frameSpan], [CHECK, INDETERMINATE]);\n      ariaState = 'false';\n\n      if (selectAll) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    } else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n      removeClass([frameSpan], [CHECK]);\n      frameSpan.classList.add(INDETERMINATE);\n      ariaState = 'false';\n\n      if (selectAll) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    }\n\n    ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n  };\n\n  CheckBoxSelection.prototype.setSearchBox = function (args) {\n    if (isNullOrUndefined(this.parent.filterParent)) {\n      this.parent.filterParent = this.parent.createElement('span', {\n        className: filterParent\n      });\n      this.filterInput = this.parent.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: filterInput\n      });\n      this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n        this.parent.mobFilter = false;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n        properties: {\n          placeholder: this.parent.filterBarPlaceholder\n        }\n      }, this.parent.createElement);\n\n      if (!isNullOrUndefined(this.parent.cssClass)) {\n        if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], this.parent.filterParent);\n      prepend([this.parent.filterParent], args.popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-owns': this.parent.element.id + '_options',\n        'role': 'listbox',\n        'aria-activedescendant': null,\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n      EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n      EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n      this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;\n      return this.filterInputObj;\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n    this.parent.hidePopup();\n    removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.inputElement.focus();\n  };\n\n  CheckBoxSelection.prototype.clearText = function (e) {\n    this.parent.targetInputElement.value = '';\n\n    if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n      this.parent.search(null);\n    }\n\n    this.parent.refreshPopup();\n    this.parent.refreshListItems(null);\n    this.clearIconElement.style.visibility = 'hidden';\n    this.filterInput.focus();\n    this.setReorder(e);\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n    this.parent.popupObj.element.classList.add(device);\n    this.parent.popupObj.element.classList.add(mobileFilter);\n    this.parent.popupObj.position = {\n      X: 0,\n      Y: 0\n    };\n    this.parent.popupObj.dataBind();\n    this.setSearchBoxPosition();\n    this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n    this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n    this.clearIconElement.style.visibility = 'hidden';\n    EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n    EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n  };\n\n  CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    var selectAllHeight = 0;\n\n    if (this.checkAllParent) {\n      selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    }\n\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n    this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  CheckBoxSelection.prototype.setPopupFullScreen = function () {\n    attributes(this.parent.popupObj.element, {\n      style: 'left:0px;right:0px;top:0px;bottom:0px;'\n    });\n    addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n  };\n\n  CheckBoxSelection.prototype.targetElement = function () {\n    if (!isNullOrUndefined(this.clearIconElement)) {\n      this.parent.targetInputElement = this.filterInput;\n      this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n    }\n\n    return this.parent.targetInputElement.value;\n  };\n\n  CheckBoxSelection.prototype.onBlurHandler = function (e) {\n    if (!this.parent.element.classList.contains('e-listbox')) {\n      var target = void 0;\n\n      if (this.parent.keyAction) {\n        return;\n      }\n\n      if (Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.target;\n      }\n\n      if (!Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.relatedTarget;\n      } // eslint-disable-next-line max-len\n\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {\n        this.filterInput.focus();\n        return;\n      }\n\n      if (this.parent.scrollFocusStatus && this.filterInput) {\n        e.preventDefault();\n        this.filterInput.focus();\n        this.parent.scrollFocusStatus = false;\n        return;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n        this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.overAllWrapper.classList.remove(FOCUS);\n        this.parent.trigger('blur');\n        this.parent.focused = true;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n        this.parent.hidePopup();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.onDocumentClick = function (e) {\n    if (this.parent.getLocaleName() !== 'listbox') {\n      var target = e.target;\n\n      if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n        if (!(this.filterInput && this.filterInput.value !== '')) {\n          e.preventDefault();\n        }\n      }\n\n      if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) && !this.parent.overAllWrapper.contains(e.target)) {\n        if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n          this.parent.inputFocus = false;\n          this.parent.scrollFocusStatus = false;\n          this.parent.hidePopup();\n          this.parent.onBlurHandler(e, true);\n          this.parent.focused = true;\n        }\n      } else {\n        this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.filterInput;\n      }\n\n      if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') && !this.parent.isPopupOpen()) {\n        if (Browser.isIE) {\n          this.parent.onBlurHandler();\n        } else {\n          this.parent.onBlurHandler(e);\n        }\n      }\n\n      if (this.filterInput === target) {\n        this.filterInput.focus();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.getFocus = function (e) {\n    this.parent.overAllWrapper.classList.remove(FOCUS);\n\n    if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n      this.parent.keyAction = false;\n      return;\n    }\n\n    if (e.value === 'focus') {\n      this.filterInput.focus();\n      this.parent.removeFocus();\n      EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n    }\n\n    if (e.value === 'clear') {\n      this.filterInput.value = '';\n      this.clearIconElement.style.visibility = 'hidden';\n    }\n  };\n\n  CheckBoxSelection.prototype.checkSelectAll = function (e) {\n    if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale(true);\n    }\n\n    if (e.value === 'uncheck') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n\n    if (e.value === 'indeterminate') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n  };\n\n  CheckBoxSelection.prototype.setLocale = function (unSelect) {\n    if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n      this.selectAllSpan.textContent = '';\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n      for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      var l10nLocale = {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      };\n      var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n\n      if (l10n.getConstant('selectAllText') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n      }\n\n      this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n    }\n  };\n\n  CheckBoxSelection.prototype.getActiveList = function (args) {\n    if (args.li.classList.contains('e-active')) {\n      this.activeLi.push(args.li.cloneNode(true));\n    } else {\n      this.activeLi.splice(args.index, 1);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.setReorder = function (args) {\n    if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n      var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n      var remLi = void 0;\n      var ulEle = this.parent.createElement('ul', {\n        className: 'e-list-parent e-ul e-reorder'\n      });\n\n      if (activeLiCount > 0) {\n        append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n        remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n        addClass(remLi, 'e-reorder-hide');\n        prepend([ulEle], this.parent.list);\n      }\n\n      this.parent.focusAtFirstListItem();\n    }\n  };\n\n  return CheckBoxSelection;\n}();\n\nexport { CheckBoxSelection };","map":{"version":3,"names":["createCheckBox","Input","EventHandler","select","removeClass","addClass","detach","compile","L10n","Browser","attributes","isNullOrUndefined","append","closest","prepend","dropDownBaseClasses","ICON","CHECKBOXFRAME","CHECK","CHECKBOXWRAP","INDETERMINATE","checkAllParent","searchBackIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","clearIcon","popupFullScreen","device","FOCUS","CheckBoxSelection","parent","activeLi","activeEle","removeEventListener","addEventListener","prototype","getModuleName","isDestroyed","on","listSelection","listOption","setSelectAll","checkSelectAll","setSearchBox","onBlurHandler","targetElement","setDeviceSearchBox","getFocus","setReorder","getActiveList","setLocale","setPlaceholder","add","document","onDocumentClick","checboxCreate","setPopupFullScreen","off","args","_this","listCurrentOptions","itemCreated","e","itemCreated_1","apply","props","filterBarPlaceholder","item","enableGroupCheckBox","className","checkboxEle","createElement","icon","insertBefore","childNodes","popupWrapper","classList","showSelectAll","selectAllSpan","textContent","appendChild","headerTemplate","parentNode","nextSibling","clickHandler","list","contains","listData","length","isDynamicDataChange","style","display","selectAllHeight","getBoundingClientRect","height","parentElement","removeChild","destroy","remove","target","frameElm","li","querySelector","checkboxWrapper","lastElementChild","itemTemplate","firstElementChild","checkWrapper","checkElement","selectAll","validateCheckNode","checkWrap","isCheck","changeState","currentTarget","preventDefault","wrapper","state","isPrevent","ariaState","frameSpan","getElementsByClassName","selectAllItems","setAttribute","attrs","type","element","backIcon","isDevice","mobFilter","filterInputObj","createInput","buttons","properties","placeholder","cssClass","split","indexOf","container","popupElement","id","clearIconElement","clearText","visibility","onInput","keyUp","onKeyDown","pasteHandler","searchBoxHeight","clickOnBackIcon","hidePopup","body","popupObj","inputElement","focus","targetInputElement","value","allowFiltering","search","refreshPopup","refreshListItems","position","X","Y","dataBind","setSearchBoxPosition","backIconElement","maxHeight","width","window","innerHeight","clearElement","keyAction","isIE","relatedTarget","scrollFocusStatus","inputFocus","updateValueState","tempValues","dispatchEvent","hiddenElement","overAllWrapper","trigger","focused","getLocaleName","isPopupOpen","info","name","activeElement","removeFocus","getAttribute","unSelect","selectAllText","unSelectAllText","template","compiledString","templateName","_i","_a","isStringTemplate","l10nLocale","l10n","locale","getConstant","push","cloneNode","splice","index","enableSelectionOrder","activeLiCount","ulElement","querySelectorAll","remLi","ulEle","focusAtFirstListItem"],"sources":["C:/Project/show-me-the-code-test/view/node_modules/@syncfusion/ej2-dropdowns/src/multi-select/checkbox-selection.js"],"sourcesContent":["import { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { EventHandler, select, removeClass, addClass, detach, compile, L10n } from '@syncfusion/ej2-base';\nimport { Browser, attributes, isNullOrUndefined, append, closest, prepend } from '@syncfusion/ej2-base';\nimport { dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nvar CheckBoxSelection = /** @class */ (function () {\n    function CheckBoxSelection(parent) {\n        this.activeLi = [];\n        this.activeEle = [];\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    CheckBoxSelection.prototype.getModuleName = function () {\n        return 'CheckBoxSelection';\n    };\n    CheckBoxSelection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('updatelist', this.listSelection, this);\n        this.parent.on('listoption', this.listOption, this);\n        this.parent.on('selectAll', this.setSelectAll, this);\n        this.parent.on('checkSelectAll', this.checkSelectAll, this);\n        this.parent.on('searchBox', this.setSearchBox, this);\n        this.parent.on('blur', this.onBlurHandler, this);\n        this.parent.on('targetElement', this.targetElement, this);\n        this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n        this.parent.on('inputFocus', this.getFocus, this);\n        this.parent.on('reOrder', this.setReorder, this);\n        this.parent.on('activeList', this.getActiveList, this);\n        this.parent.on('selectAllText', this.setLocale, this);\n        this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        this.parent.on('addItem', this.checboxCreate, this);\n        this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    };\n    CheckBoxSelection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('updatelist', this.listSelection);\n        this.parent.off('listoption', this.listOption);\n        this.parent.off('selectAll', this.setSelectAll);\n        this.parent.off('checkSelectAll', this.checkSelectAll);\n        this.parent.off('searchBox', this.setSearchBox);\n        this.parent.off('blur', this.onBlurHandler);\n        this.parent.off('targetElement', this.targetElement);\n        this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n        this.parent.off('inputFocus', this.getFocus);\n        this.parent.off('reOrder', this.setReorder);\n        this.parent.off('activeList', this.getActiveList);\n        this.parent.off('selectAllText', this.setLocale);\n        this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n        this.parent.off('addItem', this.checboxCreate);\n        this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.listOption = function (args) {\n        var _this = this;\n        if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n            };\n        }\n        else {\n            var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n    };\n    CheckBoxSelection.prototype.setPlaceholder = function (props) {\n        Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    };\n    CheckBoxSelection.prototype.checboxCreate = function (e) {\n        var item;\n        if (!isNullOrUndefined(e.item)) {\n            item = e.item;\n        }\n        else {\n            item = e;\n        }\n        if (this.parent.enableGroupCheckBox || (item.className !== 'e-list-group-item '\n            && item.className !== 'e-list-group-item')) {\n            var checkboxEle = createCheckBox(this.parent.createElement, true);\n            var icon = select('div.' + ICON, item);\n            item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            select('.' + CHECKBOXFRAME, checkboxEle);\n            if (this.parent.enableGroupCheckBox) {\n                this.parent.popupWrapper.classList.add('e-multiselect-group');\n            }\n            return item;\n        }\n        else {\n            return item;\n        }\n    };\n    CheckBoxSelection.prototype.setSelectAll = function () {\n        if (this.parent.showSelectAll) {\n            if (isNullOrUndefined(this.checkAllParent)) {\n                this.checkAllParent = this.parent.createElement('div', {\n                    className: checkAllParent\n                });\n                this.selectAllSpan = this.parent.createElement('span', {\n                    className: 'e-all-text'\n                });\n                this.selectAllSpan.textContent = '';\n                this.checkAllParent.appendChild(this.selectAllSpan);\n                this.setLocale();\n                this.checboxCreate(this.checkAllParent);\n                if (this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        append([this.checkAllParent], this.parent.filterParent);\n                    }\n                    else {\n                        append([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                if (!this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n                    }\n                    else {\n                        prepend([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n            }\n            if (this.parent.list.classList.contains('e-nodata') || (this.parent.listData && this.parent.listData.length <= 1 &&\n                !(this.parent.isDynamicDataChange)) || (this.parent.isDynamicDataChange &&\n                this.parent.listData && this.parent.listData.length <= 1)) {\n                this.checkAllParent.style.display = 'none';\n            }\n            else {\n                this.checkAllParent.style.display = 'block';\n            }\n            this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        else if (!isNullOrUndefined(this.checkAllParent)) {\n            this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    CheckBoxSelection.prototype.destroy = function () {\n        this.removeEventListener();\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    };\n    CheckBoxSelection.prototype.listSelection = function (args) {\n        var target;\n        if (!isNullOrUndefined(args.e)) {\n            var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n            target = !isNullOrUndefined(args.e.target) ?\n                (args.e.target.classList.contains('e-frame')\n                    && (!this.parent.showSelectAll\n                        || (this.checkAllParent && !this.checkAllParent.contains(args.e.target)))) ?\n                    args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1]\n                : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n        }\n        else {\n            var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n            target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n        }\n        if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n            target = args.li.firstElementChild.childNodes[1];\n        }\n        if (!isNullOrUndefined(target)) {\n            this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        }\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            var selectAll = false;\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), args.li, args.e, selectAll);\n        }\n    };\n    CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll) {\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll);\n    };\n    CheckBoxSelection.prototype.clickHandler = function (e) {\n        var target;\n        if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.currentTarget;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        var selectAll = true;\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), null, e, selectAll);\n        }\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll) {\n        var ariaState;\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK);\n            ariaState = 'true';\n            if (selectAll) {\n                this.parent.selectAllItems(true, e);\n                this.setLocale(true);\n            }\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK, INDETERMINATE]);\n            ariaState = 'false';\n            if (selectAll) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        else if (state === 'indeterminate' && !(frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK]);\n            frameSpan.classList.add(INDETERMINATE);\n            ariaState = 'false';\n            if (selectAll) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        ariaState = state === 'check' ? 'true' : state === 'uncheck' ? 'false' : ariaState;\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    };\n    CheckBoxSelection.prototype.setSearchBox = function (args) {\n        if (isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent = this.parent.createElement('span', {\n                className: filterParent\n            });\n            this.filterInput = this.parent.createElement('input', {\n                attrs: { type: 'text' },\n                className: filterInput\n            });\n            this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n                this.parent.mobFilter = false;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n                properties: { placeholder: this.parent.filterBarPlaceholder }\n            }, this.parent.createElement);\n            if (!isNullOrUndefined(this.parent.cssClass)) {\n                if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], this.parent.filterParent);\n            prepend([this.parent.filterParent], args.popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-owns': this.parent.element.id + '_options',\n                'role': 'listbox',\n                'aria-activedescendant': null,\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n            EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n            EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n            this.parent.searchBoxHeight = (this.filterInputObj.container.parentElement).getBoundingClientRect().height;\n            return this.filterInputObj;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n        this.parent.hidePopup();\n        removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.inputElement.focus();\n    };\n    CheckBoxSelection.prototype.clearText = function (e) {\n        this.parent.targetInputElement.value = '';\n        if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n            this.parent.search(null);\n        }\n        this.parent.refreshPopup();\n        this.parent.refreshListItems(null);\n        this.clearIconElement.style.visibility = 'hidden';\n        this.filterInput.focus();\n        this.setReorder(e);\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n        this.parent.popupObj.element.classList.add(device);\n        this.parent.popupObj.element.classList.add(mobileFilter);\n        this.parent.popupObj.position = { X: 0, Y: 0 };\n        this.parent.popupObj.dataBind();\n        this.setSearchBoxPosition();\n        this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n        this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n        this.clearIconElement.style.visibility = 'hidden';\n        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    };\n    CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        var selectAllHeight = 0;\n        if (this.checkAllParent) {\n            selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n        this.parent.list.style.maxHeight = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        this.parent.list.style.height = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    CheckBoxSelection.prototype.setPopupFullScreen = function () {\n        attributes(this.parent.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n        addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n    };\n    CheckBoxSelection.prototype.targetElement = function () {\n        if (!isNullOrUndefined(this.clearIconElement)) {\n            this.parent.targetInputElement = this.filterInput;\n            this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n        }\n        return this.parent.targetInputElement.value;\n    };\n    CheckBoxSelection.prototype.onBlurHandler = function (e) {\n        if (!this.parent.element.classList.contains('e-listbox')) {\n            var target = void 0;\n            if (this.parent.keyAction) {\n                return;\n            }\n            if (Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.target;\n            }\n            if (!Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.relatedTarget;\n            }\n            // eslint-disable-next-line max-len\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target)\n                && !Browser.isIE && this.filterInput) {\n                this.filterInput.focus();\n                return;\n            }\n            if (this.parent.scrollFocusStatus && this.filterInput) {\n                e.preventDefault();\n                this.filterInput.focus();\n                this.parent.scrollFocusStatus = false;\n                return;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element)\n                && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n                this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.overAllWrapper.classList.remove(FOCUS);\n                this.parent.trigger('blur');\n                this.parent.focused = true;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n                this.parent.hidePopup();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.onDocumentClick = function (e) {\n        if (this.parent.getLocaleName() !== 'listbox') {\n            var target = e.target;\n            if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n                if (!(this.filterInput && this.filterInput.value !== '')) {\n                    e.preventDefault();\n                }\n            }\n            if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) &&\n                !this.parent.overAllWrapper.contains(e.target)) {\n                if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n                    this.parent.inputFocus = false;\n                    this.parent.scrollFocusStatus = false;\n                    this.parent.hidePopup();\n                    this.parent.onBlurHandler(e, true);\n                    this.parent.focused = true;\n                }\n            }\n            else {\n                this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') &&\n                    (document.activeElement === this.filterInput);\n            }\n            if (!this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') &&\n                !this.parent.isPopupOpen()) {\n                if (Browser.isIE) {\n                    this.parent.onBlurHandler();\n                }\n                else {\n                    this.parent.onBlurHandler(e);\n                }\n            }\n            if (this.filterInput === target) {\n                this.filterInput.focus();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.getFocus = function (e) {\n        this.parent.overAllWrapper.classList.remove(FOCUS);\n        if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n            this.parent.keyAction = false;\n            return;\n        }\n        if (e.value === 'focus') {\n            this.filterInput.focus();\n            this.parent.removeFocus();\n            EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n        }\n        if (e.value === 'clear') {\n            this.filterInput.value = '';\n            this.clearIconElement.style.visibility = 'hidden';\n        }\n    };\n    CheckBoxSelection.prototype.checkSelectAll = function (e) {\n        if (e.value === 'check' && this.checkAllParent.getAttribute('aria-checked') !== 'true') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale(true);\n        }\n        if (e.value === 'uncheck') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n        if (e.value === 'indeterminate') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n    };\n    CheckBoxSelection.prototype.setLocale = function (unSelect) {\n        if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n            this.selectAllSpan.textContent = '';\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            var l10nLocale = { selectAllText: 'Select All', unSelectAllText: 'Unselect All' };\n            var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n            if (l10n.getConstant('selectAllText') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n            }\n            this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n        }\n    };\n    CheckBoxSelection.prototype.getActiveList = function (args) {\n        if (args.li.classList.contains('e-active')) {\n            this.activeLi.push(args.li.cloneNode(true));\n        }\n        else {\n            this.activeLi.splice(args.index, 1);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.setReorder = function (args) {\n        if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n            var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n            var remLi = void 0;\n            var ulEle = this.parent.createElement('ul', {\n                className: 'e-list-parent e-ul e-reorder'\n            });\n            if (activeLiCount > 0) {\n                append(this.parent.ulElement.querySelectorAll('li.e-active'), ulEle);\n                remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n                addClass(remLi, 'e-reorder-hide');\n                prepend([ulEle], this.parent.list);\n            }\n            this.parent.focusAtFirstListItem();\n        }\n    };\n    return CheckBoxSelection;\n}());\nexport { CheckBoxSelection };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}